{
  "version": "https://jsonfeed.org/version/1.1",
  "title": "Springlearn",
  "home_page_url": "https://vuepress-theme-hope-demo.mrhope.site/",
  "feed_url": "https://vuepress-theme-hope-demo.mrhope.site/feed.json",
  "description": "桃花潭水深千尺",
  "author": {
    "name": "西魏陶渊明"
  },
  "items": [
    {
      "title": "Redis缓存穿透雪崩问题",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/nosql/redis/Redis%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E9%9B%AA%E5%B4%A9%E9%97%AE%E9%A2%98/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/nosql/redis/Redis%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E9%9B%AA%E5%B4%A9%E9%97%AE%E9%A2%98/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h2 id=\"一、缓存穿透\"> 一、缓存穿透</h2>\n<p><strong>数据层没有,导致查询一直都是穿透了缓存去查db。</strong></p>\n<p>缓存穿透的概念很简单，用户想要查询一个数据，发现redis内存数据库没有，也就是缓存没有命中，于是向持久层数据库查询。发现也没有，于是本次查询失败。当用户很多的时候，缓存都没有命中，于是都去请求了持久层数据库。这会给持久层数据库造成很大的压力，这时候就相当于出现了缓存穿透。</p>\n<h3 id=\"解决方案\"> 解决方案</h3>\n<h4 id=\"_1-布隆过滤器\"> （1）布隆过滤器</h4>\n<p>布隆过滤器是一种数据结构，垃圾网站和正常网站加起来全世界据统计也有几十亿个。网警要过滤这些垃圾网站，总不能到数据库里面一个一个去比较吧，这就可以使用布隆过滤器。假设我们存储一亿个垃圾网站地址。将者一亿个都放到布隆过滤器中。</p>\n<p>原理: 将User中的指定的字段进行hash计算到某一个位置上,比如在本案例中name和age是两个字段分别映射到了。1和4。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596446105000.png\" alt=\"\" /></p>\n<p>当用xiaoming去查询发现，1和4都已经被标记成1了,说明就有这个值了。\n而用xiaozhang去查询,发现小张对应的位置上都还是0说明就不存在这个值。</p>\n<p>但是这也存在一个问题,假如说xiaozhang也被hash映射到了1和4,不存在xiaozhang但是布隆判断缺存在。</p>\n<div><pre><code>public class BloomFilterTest {\n\n    private static class User {\n\n        private String name;\n\n        private int age;\n\n        public User(String name, int age) {\n            this.name = name;\n            this.age = age;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public int getAge() {\n            return age;\n        }\n\n        public void setName(String name) {\n            this.name = name;\n        }\n\n        public void setAge(int age) {\n            this.age = age;\n        }\n    }\n\n    public static void main(String[] args) {\n        BloomFilter&lt;User&gt; bloomFilter = BloomFilter.create((Funnel&lt;User&gt;) (user, primitiveSink) -&gt; primitiveSink.putString(user.getName(), Charset.defaultCharset())\n                .putInt(user.getAge()), 10, 0.01);\n        User xiaoming = new User(&quot;xiaoming&quot;, 1);\n        bloomFilter.put(xiaoming);\n\n        System.out.println(bloomFilter.mightContain(xiaoming));\n        System.out.println(bloomFilter.mightContain(new User(&quot;xiaozhang&quot;, 2)));\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div><h4 id=\"_2-设置空对象\"> （2） 设置空对象</h4>\n<p>当存储层不命中后，即使返回的空对象也将其缓存起来，同时会设置一个过期时间，之后再访问这个数据将会从缓存中获取，保护了后端数据源；</p>\n<p>当数据层也没有发现就放一个空对象,空对象设置一个过期时间</p>\n<h2 id=\"二、缓存击穿\"> 二、缓存击穿</h2>\n<p>这种数据正常情况。就是给了一个说法名字而已</p>\n<p><strong>缓存中本来存在,但是某一个顺序缓存过期失效了,就被击穿访问到db层。</strong></p>\n<p>缓存击穿，是指一个key非常热点，在不停的扛着大并发，大并发集中对这一个点进行访问，当这个key在失效的瞬间，持续的大并发就穿破缓存，直接请求数据库，就像在一个屏障上凿开了一个洞。</p>\n<h2 id=\"三、缓存雪崩\"> 三、缓存雪崩</h2>\n<p>缓存雪崩是指，缓存层出现了错误，不能正常工作了。于是所有的请求都会达到存储层，存储层的调用量会暴增，造成存储层也会挂掉的情况。</p>\n<h3 id=\"解决方案-2\"> 解决方案</h3>\n<h4 id=\"_1-redis高可用\"> （1）redis高可用</h4>\n<p>这个思想的含义是，既然redis有可能挂掉，那我多增设几台redis，这样一台挂掉之后其他的还可以继续工作，其实就是搭建的集群。</p>\n<h4 id=\"_2-限流降级\"> （2）限流降级</h4>\n<p>这个解决方案的思想是，在缓存失效后，通过加锁或者队列来控制读数据库写缓存的线程数量。比如对某个key只允许一个线程查询数据和写缓存，其他线程等待。</p>\n<h4 id=\"_3-数据预热\"> （3）数据预热</h4>\n<p>数据加热的含义就是在正式部署之前，我先把可能的数据先预先访问一遍，这样部分可能大量访问的数据就会加载到缓存中。在即将发生大并发访问前手动触发加载缓存不同的key，设置不同的过期时间，让缓存失效的时间点尽量均匀。</p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Redis",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/nosql/redis/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/nosql/redis/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "博客主页",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/blog-readme/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/blog-readme/",
      "content_html": "<p>这是一个博客主页。</p>\n<p>要使用此布局，您应该在页面前端设置 <code>blog: true</code> 和 <code>home: true</code>。</p>\n<p>相关配置文档请见 <a href=\"https://vuepress-theme-hope.github.io/zh/guide/blog/home/\" target=\"_blank\" rel=\"noopener noreferrer\">博客主页</a></p>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Hexo",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/blog/hexo/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/blog/hexo/",
      "content_html": "<h2 id=\"一、hexo\"> 一、Hexo</h2>\n<p><code>Hexo</code> 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。\n<a href=\"https://hexo.io/zh-cn/\" target=\"_blank\" rel=\"noopener noreferrer\">hexo</a></p>\n<h2 id=\"二、安装\"> 二、安装</h2>\n<h3 id=\"_2-1-安装前提\"> 2.1 安装前提</h3>\n<p>安装 Hexo 相当简单，只需要先安装下列应用程序即可：</p>\n<ul>\n<li>Node.js (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)</li>\n<li>Git</li>\n<li>npm</li>\n</ul>\n<h3 id=\"_2-2-安装\"> 2.2 安装</h3>\n<p>首先利用 <code>npm</code> 下载</p>\n<div><pre><code><span>npm</span> <span>install</span> -g hexo-cli<span>;</span>\n\nmdkir myblog<span>;</span>\n\n<span>cd</span> myblog<span>;</span>\n\nhexo init<span>;</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id=\"三、使用\"> 三、使用</h2>\n<p><code>hexo</code> 的命令非常简单，小编用了很多年，基本上只有2个。你知道是哪两个吗?</p>\n<h3 id=\"_3-1-new-新建文章\"> 3.1 new 新建文章</h3>\n<p><code>$ hexo new [layout] &lt;title&gt;</code></p>\n<ul>\n<li>layout 是博客布局，基本不会用</li>\n<li>title 就是博客的名字</li>\n</ul>\n<h3 id=\"_3-2-generate-文章编译\"> 3.2 generate 文章编译</h3>\n<p>生成静态文件。</p>\n<p><code>$ hexo generate</code></p>\n<p>该命令可以简写为：</p>\n<p><code>$ hexo g</code></p>\n<h3 id=\"_3-3-server-本地运行\"> 3.3 server 本地运行</h3>\n<p>启动服务器,本地运行</p>\n<p><code>$ hexo server</code></p>\n<h3 id=\"_3-4-deploy-远程部署\"> 3.4 deploy 远程部署</h3>\n<p>部署远程</p>\n<p><code>$ hexo deploy</code></p>\n<p>该命令可以简写为：</p>\n<p><code>$ hexo d</code></p>\n<h3 id=\"_3-5-clean-清理缓存\"> 3.5 clean 清理缓存</h3>\n<p><code>$ hexo clean</code></p>\n<p>清除缓存文件 (db.json) 和已生成的静态文件 (public)。</p>\n<p>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。</p>\n<h3 id=\"_3-6-version\"> 3.6 version</h3>\n<p><code>$ hexo version</code></p>\n<p>显示 Hexo 版本。</p>\n<h2 id=\"四、部署\"> 四、部署</h2>\n<p><code>hexo</code> 的配置文件都在根目录下的 <code>_config.yml</code> 文件下。如果要部署远程，非常简单。</p>\n<div><pre><code><span>deploy</span><span>:</span>\n    <span>type</span><span>:</span> git\n    <span>repo</span><span>:</span>\n<span>#      可以使用github    </span>\n<span>#      github: https://github.com/lxchinesszz/lxchinesszz.github.io.git</span>\n      <span>coding</span><span>:</span> https<span>:</span>//e.coding.net/lxchinesszz/lxchinesszz.git\n    <span>branch</span><span>:</span> master\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><ul>\n<li>\n<ol>\n<li>这里需要注意，如果使用github部署, 仓库的名字是有讲究的。名字要跟github的账户名前缀一直。\n<code>lxchinesszz.github.io</code></li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>打开设置要配置一下域名，如果不配置域名默认就是 <code>https://lxchinesszz.github.io/</code></li>\n</ol>\n</li>\n</ul>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1640502249000.png\" alt=\"\" /></p>\n<h3 id=\"_4-1-本地部署\"> 4.1 本地部署</h3>\n<p><code>hexo s</code></p>\n<h3 id=\"_4-2-远程部署\"> 4.2 远程部署</h3>\n<p><code>hexo g -d</code></p>\n<p>或者是</p>\n<p><code>hexo g</code>  + <code>hexo d</code></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1640502249000.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "SQL锁机制",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/SQL%E9%94%81%E6%9C%BA%E5%88%B6/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/SQL%E9%94%81%E6%9C%BA%E5%88%B6/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h2 id=\"一、场景模拟\"> 一、场景模拟</h2>\n<div><pre><code><span>create</span> <span>table</span> shop\n<span>(</span>\n  id <span>int</span><span>(</span><span>4</span><span>)</span> <span>primary</span> <span>key</span> <span>default</span> <span>0</span><span>,</span>\n  name <span>varchar</span><span>(</span><span>20</span><span>)</span> <span>default</span> <span>'衣服'</span><span>,</span>\n  <span>status</span> <span>varchar</span><span>(</span><span>20</span><span>)</span> <span>default</span> <span>'可售'</span>\n<span>)</span><span>engine</span> <span>=</span> <span>innodb</span> <span>default</span> <span>charset</span><span>=</span>utf8<span>;</span>\n\n<span>insert</span> <span>into</span> shop  <span>values</span><span>(</span><span>1</span><span>,</span><span>'衣服'</span><span>,</span><span>'可售'</span><span>)</span><span>;</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><div><pre><code>mysql&gt; select * from shop;\n+----+--------+--------+\n| id | name   | status |\n+----+--------+--------+\n|  1 | 衣服   | 可售   |\n+----+--------+--------+\n1 row in set (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>有一个X姨夫,两个用户并发操作问题</p>\n<p>A先看到衣服: X加锁 -&gt; 试衣服 -&gt; 下单 -&gt; 付款 -&gt; 打包 -&gt; X解锁\nB也相对衣服: 发现X已经被A加锁了,等待X解锁。</p>\n<h2 id=\"二、锁知识\"> 二、锁知识</h2>\n<h3 id=\"锁类型\"> 锁类型</h3>\n<p>a. 读锁(共享锁):\nb. 写锁(互斥锁): 如果当前写操作没有完毕,则无法进行其他的写操作。</p>\n<h3 id=\"锁范围\"> 锁范围</h3>\n<ul>\n<li>innodb默认行锁(开销大,加锁慢,锁范围小,易死锁,不容器锁冲突,并发度高)</li>\n<li>MyISAM默认表锁(开销小,加锁块,无死锁,但是锁范围大容器锁冲突,并发度低)</li>\n</ul>\n<ol>\n<li>表锁(对一张表整体加锁)</li>\n<li>行锁(对一行数据进行加锁)</li>\n</ol>\n<hr>\n<h2 id=\"三、锁分析\"> 三、锁分析</h2>\n<h3 id=\"_1-查看加锁的表\"> 1. 查看加锁的表</h3>\n<p><code>show open tables;</code></p>\n<p>1代表加锁</p>\n<div><pre><code>mysql&gt; show open tables;\n+--------------------+---------------------------+--------+-------------+\n| Database           | Table                     | In_use | Name_locked |\n+--------------------+---------------------------+--------+-------------+\n| test               | emp                       |      0 |           0 |\n| test               | test_innodb_lock          |      0 |           0 |\n| test               | test03                    |      0 |           0 |\n| test               | teacher2                  |      0 |           0 |\n| test               | course2                   |      0 |           0 |\n| test               | book                      |      0 |           0 |\n| test               | shop                      |      1 |           0 |\n| test               | staffs                    |      0 |           0 |\n| test               | dept                      |      0 |           0 |\n+--------------------+---------------------------+--------+-------------+\n73 rows in set (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h3 id=\"_2-查看锁的严重程度\"> 2. 查看锁的严重程度</h3>\n<p><code>show status like '%Table_locks%';</code></p>\n<div><pre><code>mysql&gt; show status like &#39;%Table_locks%&#39;;\n+-----------------------+-------+\n| Variable_name         | Value |\n+-----------------------+-------+\n| Table_locks_immediate | 79    |\n| Table_locks_waited    | 0     |\n+-----------------------+-------+\n2 rows in set (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p><strong>Table_locks_immediate</strong> 能立马加锁\n<strong>Table_locks_waited</strong> 越大说明竞争越大</p>\n<p>建议:\nTable_locks_immediate/Table_locks_waited &gt; 5000,建议采用innodb,否则建议MyISAM。</p>\n<h2 id=\"四、模拟加表锁\"> 四、模拟加表锁</h2>\n<p><code>lock table 表1 read/write,表2 read/write</code></p>\n<div><pre><code>lock table shop write;\n</code></pre>\n<div><span>1</span><br></div></div><h3 id=\"加表读锁\"> 加表读锁</h3>\n<p>如A会话,对shop表加了read锁,则该会话可以对shop表进行读操作,不能进行写操作。\n并且只能读自己加锁了的表,如下面列子最shop加锁,能读shop不能写shop,不能读test03</p>\n<p><strong>如果对shop表加了read锁,那么只能对shop进行读,其他任何操作都不行了</strong></p>\n<div><pre><code>mysql&gt; lock table shop read;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; select * from shop\n    -&gt; ;\n+----+--------+-----------+\n| id | name   | status    |\n+----+--------+-----------+\n|  1 | 衣服   | 已占用    |\n+----+--------+-----------+\n1 row in set (0.00 sec)\n\nmysql&gt; update shop set status = &#39;可售&#39; where id = 1;\nERROR 1099 (HY000): Table &#39;shop&#39; was locked with a READ lock and can&#39;t be updated\nmysql&gt; select * from test03;\nERROR 1100 (HY000): Table &#39;test03&#39; was not locked with LOCK TABLES\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p><img src=\"https://img.springlearn.cn/blog/learn_1596460128000.png\" alt=\"\" /></p>\n<p>其他B会话中,对于shop表能读不能写,但是不影响操作其他表。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596460283000.png\" alt=\"\" /></p>\n<h3 id=\"加表写锁\"> 加表写锁</h3>\n<ul>\n<li>会话A: lock table shop write;\n当前会话可以对加了锁的表进行任意操作;但是不能操作其他表。</li>\n<li>其他会话B:\n当会话A释放了锁,B才能对这个表进行增删改查;</li>\n</ul>\n<h2 id=\"五、模拟加行锁\"> 五、模拟加行锁</h2>\n<div><pre><code><span>create</span> <span>table</span> linelock\n<span>(</span>\n    id <span>int</span><span>(</span><span>5</span><span>)</span> <span>primary</span> <span>key</span> <span>auto_increment</span><span>,</span>\n    name <span>varchar</span><span>(</span><span>20</span><span>)</span>\n<span>)</span> <span>engine</span> <span>=</span> <span>innodb</span><span>;</span>\n\n<span>insert</span> <span>into</span> linelock<span>(</span>name<span>)</span> <span>values</span><span>(</span><span>'1'</span><span>)</span><span>;</span>\n<span>insert</span> <span>into</span> linelock<span>(</span>name<span>)</span> <span>values</span><span>(</span><span>'2'</span><span>)</span><span>;</span>\n<span>insert</span> <span>into</span> linelock<span>(</span>name<span>)</span> <span>values</span><span>(</span><span>'3'</span><span>)</span><span>;</span>\n<span>insert</span> <span>into</span> linelock<span>(</span>name<span>)</span> <span>values</span><span>(</span><span>'4'</span><span>)</span><span>;</span>\n<span>insert</span> <span>into</span> linelock<span>(</span>name<span>)</span> <span>values</span><span>(</span><span>'5'</span><span>)</span><span>;</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h3 id=\"a窗口写操作\"> A窗口写操作</h3>\n<p><code>insert into linelock(name) values('6');</code></p>\n<p>此时B窗口执行update更新会被锁定。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596463371000.png\" alt=\"\" /></p>\n<p>当A会话commit之后B就能继续操作了。\n<img src=\"https://img.springlearn.cn/blog/learn_1596463461000.png\" alt=\"\" /></p>\n<p>行锁是通过事务进行解锁的。</p>\n<h3 id=\"行锁转表锁\"> 行锁转表锁</h3>\n<p>如果索引列进行了类型转换,则索引失效。</p>\n<p>A窗口执行\n<code>update linelock set name = 'ai' where name = 3;</code></p>\n<p>B窗口执行\n<code>update linelock set name = 'ax' where name = 4;</code></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596464724000.png\" alt=\"\" /></p>\n<h3 id=\"间隙锁\"> 间隙锁</h3>\n<p>update linelock set name = 'x' where id &gt; 1 and id &lt; 8;</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596465102000.png\" alt=\"\" /></p>\n<h3 id=\"行锁分析\"> 行锁分析</h3>\n<p><code>show status like '%innodb_row_lock%';</code></p>\n<div><pre><code>mysql&gt; show status like &#39;%innodb_row_lock%&#39;;\n+-------------------------------+--------+\n| Variable_name                 | Value  |\n+-------------------------------+--------+\n| Innodb_row_lock_current_waits | 1      |\n| Innodb_row_lock_time          | 207248 |\n| Innodb_row_lock_time_avg      | 34541  |\n| Innodb_row_lock_time_max      | 51605  |\n| Innodb_row_lock_waits         | 6      |\n+-------------------------------+--------+\n5 rows in set (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p><img src=\"https://img.springlearn.cn/blog/learn_1596465415000.png\" alt=\"\" /></p>\n<table>\n<thead>\n<tr>\n<th>Variable_name</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Innodb_row_lock_current_waits</td>\n<td>当前正在等待的锁的数量</td>\n</tr>\n<tr>\n<td>Innodb_row_lock_time</td>\n<td>等待总时长,从系统启动到现在一共等待时间</td>\n</tr>\n<tr>\n<td>Innodb_row_lock_time_avg</td>\n<td>平均等待时长</td>\n</tr>\n<tr>\n<td>Innodb_row_lock_time_max</td>\n<td>最大等待时长</td>\n</tr>\n<tr>\n<td>Innodb_row_lock_waits</td>\n<td>等待的次数</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"查询语句加锁\"> 查询语句加锁</h3>\n<p><code>set autocommit=0;</code>\n<code>select * from linelock for update;</code></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596466172000.png\" alt=\"\" /></p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Mysql优化示例",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/SQL%E4%BC%98%E5%8C%96%E7%A4%BA%E4%BE%8B/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/SQL%E4%BC%98%E5%8C%96%E7%A4%BA%E4%BE%8B/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h2 id=\"创建表\"> 创建表</h2>\n<div><pre><code><span>use</span> test<span>;</span>\n<span>create</span> <span>table</span> test03\n<span>(</span>\n a1 <span>int</span><span>(</span><span>4</span><span>)</span> <span>not</span> <span>null</span><span>,</span>\n a2 <span>int</span><span>(</span><span>4</span><span>)</span> <span>not</span> <span>null</span><span>,</span>\n a3 <span>int</span><span>(</span><span>4</span><span>)</span> <span>not</span> <span>null</span><span>,</span>\n a4 <span>int</span><span>(</span><span>4</span><span>)</span> <span>not</span> <span>null</span>\n<span>)</span><span>;</span>\n<span>alter</span> <span>table</span> test03 <span>add</span> <span>index</span> idx_a1_a2_a3_a4<span>(</span>a1<span>,</span>a2<span>,</span>a3<span>,</span>a4<span>)</span><span>;</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><hr>\n<h2 id=\"建议一、按照复合索引顺序查询\"> 建议一、按照复合索引顺序查询</h2>\n<p><strong>需知</strong></p>\n<ol>\n<li>如果(a,b,c,d)复合索引和查询使用的顺序全部一致,则复合索引全部使用,如果不部分一致或者跨列使用则就是部分使用.</li>\n<li>where和order by拼起来也不要跨列,参考反例2和3</li>\n</ol>\n<h3 id=\"_1-建议\"> 1. 建议</h3>\n<ul>\n<li>建议: 按照where后面按照顺序使用复合索引</li>\n<li>建议: where 和 order by不要跨列\n<code>explain select a1,a2,a3,a4 from test03 where a1=1 and a2=2 and a3=3 and a4=4;</code></li>\n</ul>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596388059000.png\" alt=\"\" /></p>\n<h3 id=\"_2-反例1\"> 2. 反例1</h3>\n<p><code>explain select a1,a2,a3,a4 from test03 where a4=1 and a3=2 and a2=3 and a1=4;</code></p>\n<p>可以看到还是一样的,索引都用了，原因是sql在执行时候被sql优化器进行了调整,最后被调整成了上面的顺序写法。\n这是最理想的情况,但是实际中建议开发按照顺序来进行查询。\n<img src=\"https://img.springlearn.cn/blog/learn_1596388250000.png\" alt=\"\" /></p>\n<h3 id=\"_3-反例2\"> 3. 反例2</h3>\n<p><code>explain select a1,a2,a3,a4 from test03 where a1=1 and a2=2 and a4=4 order by a3;</code></p>\n<ul>\n<li>因为查询条件中复合索引跨列了(跨了a3)，所以导致只能用a1 和a2索引。索引key_len变成8了</li>\n<li>索引中没有查询a3但是却用a3排序了,导致要回表查询a3\n<img src=\"https://img.springlearn.cn/blog/learn_1596388567000.png\" alt=\"\" /></li>\n</ul>\n<h3 id=\"_4-反例3\"> 4. 反例3</h3>\n<p><code>explain select a1,a2,a3,a4 from test03 where a1=1 and a4=4 order by a3;</code></p>\n<ul>\n<li>跨了a2 a3 所以a4失效只能用a1 所以key_len只有一个\nwhere 和 order by拼接起来是否也满足复合顺序,如果不满足\n就会出现Using filesort</li>\n<li>反例2中where 生效的是a1和a2，但是order by是a3。满足复合索引顺序,所以不会出现Using filesort</li>\n</ul>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596389005000.png\" alt=\"\" /></p>\n<p><code>explain select a1,a2,a3,a4 from test03 where a1=1 and a4=4 order by a2,a3;</code></p>\n<ul>\n<li>where a1 order by a2 a3 所以不会出现上面Using fileSort\n<img src=\"https://img.springlearn.cn/blog/learn_1596389167000.png\" alt=\"\" /></li>\n</ul>\n<h2 id=\"建议二、单表优化\"> 建议二、单表优化</h2>\n<h3 id=\"建表及需求sql\"> 建表及需求sql</h3>\n<div><pre><code>\ncreate table book\n(\n bid int(4) primary key,\n name varchar(20) not null,\n authorid int(4) not null,\n publicid int(4) not null,\n typeid int(4) not null\n);\n\ninsert into book values(1,&#39;tjava&#39;,1,1,2);\ninsert into book values(2,&#39;tjava&#39;,2,1,2);\ninsert into book values(3,&#39;tjava&#39;,3,2,1);\ninsert into book values(4,&#39;tjava&#39;,4,2,3);\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><p><strong>查询authorid = 1 并且 typeid 等于2或者3 然后根据typeid 排序</strong></p>\n<p><code>explain select bid from book where typeid in (2,3) and authorid = 1 order by typeid desc;</code></p>\n<div><pre><code>mysql&gt; explain select bid from book where  typeid in (2,3) and authorid = 1  order by typeid desc;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                       |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+\n|  1 | SIMPLE      | book  | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    4 |    25.00 | Using where; Using filesort |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+\n1 row in set, 1 warning (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>可以看出来未用到索引,type是all。就是全表查询了。</p>\n<h3 id=\"_1-优化1加索引\"> 1. 优化1加索引</h3>\n<p><code>alter table book add index idx_bta(bid,typeid,authorid);</code></p>\n<div><pre><code>mysql&gt; explain select bid from book where  typeid in (2,3) and authorid = 1  order by typeid desc;\n+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+------------------------------------------+\n| id | select_type | table | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra                                    |\n+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+------------------------------------------+\n|  1 | SIMPLE      | book  | NULL       | index | NULL          | idx_bta | 12      | NULL |    4 |    25.00 | Using where; Using index; Using filesort |\n+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+------------------------------------------+\n1 row in set, 1 warning (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>可以看到通过了加索引type由之前的all变成了index,说明有一点进步。但是我们看到还有一个<code>Using filesort</code>.前面我们说了出现这个\n是因为额外多了一次查询。根据sql的解析规则，第一个解析的是typeid,第二个是authorid。那么我们先对索引顺序做一个优化。</p>\n<h3 id=\"_2-优化索引顺序\"> 2. 优化索引顺序</h3>\n<p>复合索引一旦进行了升级优化，就要删除了，否则会进行干扰。<code>drop index idx_bta on book;</code></p>\n<p>按照sql执行顺序来创建索引。这里我们其实也可以不创建bid，但是如果不创建bid,就要回表去查询bid,所以也建议加上。\n<code>alter table book add index idx_tab(typeid,authorid,bid);</code></p>\n<div><pre><code>mysql&gt; explain select bid,typeid from book where  typeid in (2,3) and authorid = 1  order by typeid desc;\n+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------------------------+\n| id | select_type | table | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra                                         |\n+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------------------------+\n|  1 | SIMPLE      | book  | NULL       | range | idx_tab       | idx_tab | 8       | NULL |    2 |   100.00 | Using where; Backward index scan; Using index |\n+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------------------------+\n1 row in set, 1 warning (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>可以看到已经没有了,Using filesort。</p>\n<h3 id=\"_3-总结\"> 3. 总结</h3>\n<ul>\n<li>索引优化不会一步到位,要多次优化。</li>\n<li>索引顺序会影响查询效率,如果不知道怎么优化,建议sql执行顺序,多尝试几次不同顺序。通过看type的级别来调整。</li>\n<li>type如果是range或者ref。其实就可以了。如果是index或者all就要考虑是否要进行优化。</li>\n<li>in会是索引失效</li>\n</ul>\n<h2 id=\"建议三、多表优化\"> 建议三、多表优化</h2>\n<h3 id=\"建表及需求sql-2\"> 建表及需求sql</h3>\n<div><pre><code>create table teacher2\n(\n    tid int(4) primary key,\n    cid int(4) not null\n);\n\ninsert into teacher2 values(1,2);\ninsert into teacher2 values(2,1);\ninsert into teacher2 values(3,3);\n\ncreate table course2\n(\n    cid int(4),\n    cname varchar(20)\n);\ninsert into course2 values(1,&#39;java&#39;);\ninsert into course2 values(2,&#39;python&#39;);\ninsert into course2 values(3,&#39;kotlin&#39;);\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><p><strong>需求sql</strong></p>\n<p><code>select * from teacher2 t left outer join course2 c on t.cid=c.cid where c.cname = 'java';</code></p>\n<div><pre><code>mysql&gt; select * from teacher2 t left outer join course2 c on t.cid=c.cid where c.cname = &#39;java&#39;;\n+-----+-----+------+-------+\n| tid | cid | cid  | cname |\n+-----+-----+------+-------+\n|   2 |   1 |    1 | java  |\n+-----+-----+------+-------+\n1 row in set (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>执行计划分析</p>\n<div><pre><code>mysql&gt; explain select * from teacher2 t left outer join course2 c on t.cid=c.cid where c.cname = &#39;java&#39;;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                                              |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+\n|  1 | SIMPLE      | c     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    3 |    33.33 | Using where                                        |\n|  1 | SIMPLE      | t     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    3 |    33.33 | Using where; Using join buffer (Block Nested Loop) |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+\n2 rows in set, 1 warning (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>可以看到有一个<code>Using join buffer</code>。 说明Sql写的太差了，mysql给你加了一个缓存。经过下面的索引优化会去掉。</p>\n<h3 id=\"优化1小表驱动大表\"> 优化1小表驱动大表</h3>\n<p>当编写语句时候,将数据量小的表放左边(假设此时t表小,on t.cid = c.cid);反之如果c表小(on c.cid = t.tic)</p>\n<h3 id=\"优化2加索引\"> 优化2加索引</h3>\n<p>索引建立在经常使用的字段上,本例中t.cid使用频繁。</p>\n<p><code>alter table teacher2 add index idx_teacher2_cid(cid);</code></p>\n<div><pre><code>mysql&gt; explain select * from teacher2 t left outer join course2 c on t.cid=c.cid where c.cname = &#39;java&#39;;\n+----+-------------+-------+------------+------+------------------+------------------+---------+------------+------+----------+-------------+\n| id | select_type | table | partitions | type | possible_keys    | key              | key_len | ref        | rows | filtered | Extra       |\n+----+-------------+-------+------------+------+------------------+------------------+---------+------------+------+----------+-------------+\n|  1 | SIMPLE      | c     | NULL       | ALL  | NULL             | NULL             | NULL    | NULL       |    3 |    33.33 | Using where |\n|  1 | SIMPLE      | t     | NULL       | ref  | idx_teacher2_cid | idx_teacher2_cid | 4       | test.c.cid |    1 |   100.00 | Using index |\n+----+-------------+-------+------------+------+------------------+------------------+---------+------------+------+----------+-------------+\n2 rows in set, 1 warning (0.00 sec)\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>给name也加索引</p>\n<p><code>alter table course2 add index idx_course2_name(cname);</code></p>\n<div><pre><code>mysql&gt; explain select * from teacher2 t left outer join course2 c on t.cid=c.cid where c.cname = &#39;java&#39;;\n+----+-------------+-------+------------+------+------------------+------------------+---------+------------+------+----------+-------------+\n| id | select_type | table | partitions | type | possible_keys    | key              | key_len | ref        | rows | filtered | Extra       |\n+----+-------------+-------+------------+------+------------------+------------------+---------+------------+------+----------+-------------+\n|  1 | SIMPLE      | c     | NULL       | ref  | idx_course2_name | idx_course2_name | 83      | const      |    1 |   100.00 | Using where |\n|  1 | SIMPLE      | t     | NULL       | ref  | idx_teacher2_cid | idx_teacher2_cid | 4       | test.c.cid |    1 |   100.00 | Using index |\n+----+-------------+-------+------------+------+------------------+------------------+---------+------------+------+----------+-------------+\n2 rows in set, 1 warning (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>这样两个查询就都用到了索引。</p>\n<h2 id=\"建议四、sql优化\"> 建议四、sql优化</h2>\n<h3 id=\"_1-exist和in\"> 1. exist和in</h3>\n<p>如果主查询的数据集大用 <code>in</code> ,如果子查询数据量大使用 <code>exist</code></p>\n<h3 id=\"_2-order-by优化\"> 2. order by优化</h3>\n<p>Using filesort 有两种算法: 双路排序、单路排序(根据IO的次数,即访问磁盘的顺序)</p>\n<ul>\n<li>MySQL4.1前默认使用双路排序,即扫描两次磁盘(1. 从磁盘读取排序字段,2. 扫描其他字段)</li>\n<li>MySQL4.1后默认使用单路排序,即访问一次磁盘(1. 只读取一次字段,然后在buffer中进行排序)</li>\n</ul>\n<p>但是单路排序有隐患就是不一定是只访问一次磁盘,因为加入数据量特别大,则无法将所有字段的\n数据都放到buffer中,要多次分片读取。此时可以考虑调大buffer容量大小。</p>\n<p><code>set max_length_for_sort_data = 1024</code> (单位/字节)</p>\n<p>如果缓存区大小太小,mysql会自动从单路调整到双路。</p>\n<p><strong>建议</strong></p>\n<ul>\n<li>避免使用<code>select *</code></li>\n<li>复合索引不要跨列使用,如果where和order尽量也按照顺序使用</li>\n<li>order by 如果是多个字段,建议都是升序或者都是降序</li>\n</ul>\n<h3 id=\"_3-慢查询日志\"> 3. 慢查询日志</h3>\n<p><a href=\"https://blog.springlearn.cn/posts/3935/\" target=\"_blank\" rel=\"noopener noreferrer\">如何找到垃圾SQL语句,你知道这些方式吗？</a></p>\n<p>慢sql就是mysql提供的一种日志记录,用于记录响应的时间超过阀值得语句;</p>\n<p><strong>查询是否开启慢查询</strong></p>\n<p><code>show variables like '%slow_query_log%';</code></p>\n<div><pre><code>mysql&gt; show variables like &#39;%slow_query_log%&#39;;\n+---------------------+-----------------------------------------+\n| Variable_name       | Value                                   |\n+---------------------+-----------------------------------------+\n| slow_query_log      | OFF                                     |\n| slow_query_log_file | /usr/local/var/mysql/localhost-slow.log |\n+---------------------+-----------------------------------------+\n2 rows in set (0.06 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p><strong>临时开启:</strong></p>\n<div><pre><code>set global slow_query_log = 1;\nexit;\nservices mysql restart\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p><strong>查询慢查询日志阀值</strong></p>\n<p><code>show variables like '%long_query_time%';</code></p>\n<div><pre><code>mysql&gt; show variables like &#39;%long_query_time%&#39;;\n+-----------------+-----------+\n| Variable_name   | Value     |\n+-----------------+-----------+\n| long_query_time | 10.000000 |\n+-----------------+-----------+\n1 row in set (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p><strong>临时设置阀值</strong></p>\n<p>修改完成之后要重新登录生效</p>\n<div><pre><code>set global long_query_time = 5;\n</code></pre>\n<div><span>1</span><br></div></div><div><pre><code>mysql&gt; show variables like &#39;%long_query_time%&#39;;\n+-----------------+-----------+\n| Variable_name   | Value     |\n+-----------------+-----------+\n| long_query_time | 10.000000 |\n+-----------------+-----------+\n1 row in set (0.00 sec)\n\nmysql&gt; set global long_query_time = 5;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; show variables like &#39;%long_query_time%&#39;;\n+-----------------+-----------+\n| Variable_name   | Value     |\n+-----------------+-----------+\n| long_query_time | 10.000000 |\n+-----------------+-----------+\n1 row in set (0.00 sec)\n\nmysql&gt; exit\nBye\n liuxin@localhost  ~  mysql -u root -p\nEnter password:\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 9\nServer version: 8.0.16 Homebrew\n\nCopyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.\n\nmysql&gt; show variables like &#39;%long_query_time%&#39;;\n+-----------------+----------+\n| Variable_name   | Value    |\n+-----------------+----------+\n| long_query_time | 5.000000 |\n+-----------------+----------+\n1 row in set (0.00 sec)\n\nmysql&gt;\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br></div></div><h4 id=\"超过阀值得数量\"> 超过阀值得数量</h4>\n<p><code>show global status like '%slow_queries%';</code></p>\n<div><pre><code>mysql&gt; show global status like &#39;%slow_queries%&#39;;\n+---------------+-------+\n| Variable_name | Value |\n+---------------+-------+\n| Slow_queries  | 0     |\n+---------------+-------+\n1 row in set (0.01 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id=\"总结\"> 总结</h2>\n<ol>\n<li>复合索引,不要跨列或无序使用</li>\n<li>复合索引,尽量使用全索引匹配</li>\n<li>不要在索引上进行计算、函数、类型转换</li>\n<li>复合索引不能使用 != 、 &lt;&gt; 、 is null</li>\n<li>like尽量以&quot;常量&quot;开头,不要以&quot;%&quot;开头,否则索引失效</li>\n<li>尽量不要使用类型转换（显式、隐式）,否则索引失效。where name = 'lx' 可以。where name\n<img src=\"https://img.springlearn.cn/blog/learn_1596447963000.png\" alt=\"\" /></li>\n<li>尽量不要用or,否则左右索引都可能失效\n<img src=\"https://img.springlearn.cn/blog/learn_1596448080000.png\" alt=\"\" /></li>\n</ol>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "SQL索引性能优化",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/SQL%E7%B4%A2%E5%BC%95%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/SQL%E7%B4%A2%E5%BC%95%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h1 id=\"建表\"> 建表</h1>\n<div><pre><code>// 建表\nCREATE TABLE IF NOT EXISTS staffs(\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(24) NOT NULL DEFAULT &quot;&quot; COMMENT&#39;姓名&#39;,\n    age INT NOT NULL DEFAULT 0 COMMENT&#39;年龄&#39;,\n    pos VARCHAR(20) NOT NULL DEFAULT &quot;&quot; COMMENT&#39;职位&#39;,\n    add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT&#39;入职事件&#39;\n) CHARSET utf8 COMMENT&#39;员工记录表&#39;;\n\n// 插入数据\nINSERT INTO `test`.`staffs` (`name`, `age`, `pos`, `add_time`) VALUES (&#39;z3&#39;, 22, &#39;manager&#39;, now());\nINSERT INTO `test`.`staffs` (`name`, `age`, `pos`, `add_time`) VALUES (&#39;July&#39;, 23, &#39;dev&#39;, now());\nINSERT INTO `test`.`staffs` (`name`, `age`, `pos`, `add_time`) VALUES (&#39;2000&#39;, 23, &#39;dev&#39;, now());\n\n// 建立复合索引（即一个索引包含多个字段）\nALTER TABLE staffs ADD INDEX idx_staffs_nameAgePos(name, age, pos);\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><hr>\n<h2 id=\"优化一、全部用到索引\"> 优化一、全部用到索引</h2>\n<h3 id=\"_1-介绍\"> 1. 介绍</h3>\n<p>建立的复合索引包含了几个字段，查询的时候最好能全部用到，而且严格按照索引顺序，这样查询效率是最高的。（最理想情况，具体情况具体分析）</p>\n<h3 id=\"_2-sql案例\"> 2. SQL案例</h3>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596353647000.png\" alt=\"\" /></p>\n<h2 id=\"优化二、最左前缀法则\"> 优化二、最左前缀法则</h2>\n<h3 id=\"_1-介绍-2\"> 1. 介绍</h3>\n<p>如果建立的是复合索引，索引的顺序要按照建立时的顺序，即从左到右，如：a-&gt;b-&gt;c（和 B+树的数据结构有关）</p>\n<h3 id=\"_2-无效索引举例\"> 2. 无效索引举例</h3>\n<p>如果用了a和c,那么a索引有效,c无效,因为中间跳过了b</p>\n<p>如果用了b和c,那么b索引和c索引都无效,因为跳过了a</p>\n<p>如果只用了c,那么也会无效,因为跳过了a和b</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596354258000.png\" alt=\"\" /></p>\n<h2 id=\"优化三、不要对索引做以下处理\"> 优化三、不要对索引做以下处理</h2>\n<h3 id=\"_1-以下用法会导致索引失效\"> 1. 以下用法会导致索引失效</h3>\n<ul>\n<li>计算，如：+、-、*、/、!=、&lt;&gt;、is null、is not null、or</li>\n<li>函数，如：sum()、round()等等</li>\n<li>手动/自动类型转换，如：id = &quot;1&quot;，本来是数字，给写成字符串了</li>\n</ul>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596354578000.png\" alt=\"\" /></p>\n<h2 id=\"优化四、索引不要放在范围查询右边\"> 优化四、索引不要放在范围查询右边</h2>\n<h3 id=\"_1-举例\"> 1. 举例</h3>\n<p>比如复合索引：a-&gt;b-&gt;c，当 where a=&quot;&quot; and b&gt;10 and 3=&quot;&quot;，这时候只能用到 a 和 b，c 用不到索引，因为在范围之后索引都失效（和 B+树结构有关）</p>\n<p>因为b使用了范围,所以右边的索引c就失效了</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596355600000.png\" alt=\"\" /></p>\n<h2 id=\"优化五、减少-select-的使用\"> 优化五、减少 select * 的使用</h2>\n<h3 id=\"_1-使用覆盖索引\"> 1. 使用覆盖索引</h3>\n<p>即：select 查询字段和 where 中使用的索引字段一致。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596355952000.png\" alt=\"\" /></p>\n<h2 id=\"优化六、like-模糊搜索\"> 优化六、like 模糊搜索</h2>\n<h3 id=\"_1-失效情况\"> 1. 失效情况</h3>\n<p>like &quot;%张三%&quot;\nlike &quot;%张三&quot;</p>\n<h3 id=\"_2-解决方案\"> 2. 解决方案</h3>\n<ul>\n<li>\n<p>使用复合索引，即 like 字段是 select 的查询字段，如：select name from table where name like &quot;%张三%&quot;\n使用 like &quot;张三%&quot;</p>\n</li>\n<li>\n<p>使用 like &quot;张三%&quot;</p>\n</li>\n</ul>\n<h2 id=\"优化七、order-by-优化\"> 优化七、order by 优化</h2>\n<p>当查询语句中使用 order by 进行排序时，如果没有使用索引进行排序，会出现 filesort 文件内排序，这种情况在数据量大或者并发高的时候，会有性能问题，需要优化。</p>\n<h3 id=\"_1-filesort-出现的情况举例\"> 1. filesort 出现的情况举例</h3>\n<ul>\n<li>order by 字段不是索引字段</li>\n<li>order by 字段是索引字段，但是 select 中没有使用覆盖索引，如：<code>select * from staffs order by age asc;</code></li>\n<li>order by 中同时存在 ASC 升序排序和 DESC 降序排序，如：<code>select a, b from staffs order by a desc, b asc;</code></li>\n<li>order by 多个字段排序时，不是按照索引顺序进行 order by，即不是按照最左前缀法则，如：<code>select a, b from staffs order by b asc, a asc;</code></li>\n</ul>\n<h3 id=\"_2-索引层面解决方法\"> 2. 索引层面解决方法</h3>\n<ul>\n<li>使用主键索引排序</li>\n<li>按照最左前缀法则，并且使用覆盖索引排序，多个字段排序时，保持排序方向一致</li>\n<li>在 SQL 语句中强制指定使用某索引，force index(索引名字)</li>\n<li>不在数据库中排序，在代码层面排序</li>\n</ul>\n<h3 id=\"_3-order-by-排序算法\"> 3. order by 排序算法</h3>\n<p><strong>双路排序</strong></p>\n<p><em>Mysql4.1 之前是使用双路排序，字面的意思就是两次扫描磁盘，最终得到数据，读取行指针和 ORDER BY 列，对他们进行排序，然后扫描已经排好序的列表，按照列表中的值重新从列表中读取对数据输出。也就是从磁盘读取排序字段，在 buffer 进行排序，再从磁盘读取其他字段。</em></p>\n<p>文件的磁盘 IO 非常耗时的，所以在 Mysql4.1 之后，出现了第二种算法，就是单路排序。</p>\n<p><em>从磁盘读取查询需要的所有列，按照 orderby 列在 buffer 对它们进行排序，然后扫描排序后的列表进行输出， 它的效率更快一些，避免了第二次读取数据，并且把随机 IO 变成顺序 IO，但是它会使用更多的空间， 因为它把每一行都保存在内存中了。</em></p>\n<p>当我们无可避免要使用排序时，索引层面没法在优化的时候又该怎么办呢？尽可能让 MySQL 选择使用第二种单路算法来进行排序。这样可以减少大量的随机 IO 操作,很大幅度地提高排序工作的效率。下面看看单路排序优化需要注意的点</p>\n<p><strong>单路排序优化点</strong></p>\n<p>增大 max_length_for_sort_data</p>\n<p><em>在 MySQL 中,决定使用&quot;双路排序&quot;算法还是&quot;单路排序&quot;算法是通过参数 maxlength_for sort_data 来决定的。当所有返回字段的最大长度小于这个参数值时,MySQL 就会选择&quot;单路排序&quot;算法,反之,则选择&quot;多路排序&quot;算法。所以,如果有充足的内存让 MySQL 存放须要返回的非排序字段,就可以加大这个参数的值来让 MySQL 选择使用&quot;单路排序&quot;算法。</em></p>\n<p>去掉不必要的返回字段，避免select *</p>\n<p><em>当内存不是很充裕时,不能简单地通过强行加大上面的参数来强迫 MySQL 去使用&quot;单路排序&quot;算法,否则可能会造成 MySQL 不得不将数据分成很多段,然后进行排序,这样可能会得不偿失。此时就须要去掉不必要的返回字段,让返回结果长度适应 max_length_for_sort_data 参数的限制。</em></p>\n<p>增大 sort_buffer_size 参数设置</p>\n<p><em>这个值如果过小的话,再加上你一次返回的条数过多,那么很可能就会分很多次进行排序,然后最后将每次的排序结果再串联起来,这样就会更慢,增大 sort_buffer_size 并不是为了让 MySQL 选择&quot;单路排序&quot;算法,而是为了让 MySQL 尽量减少在排序过程中对须要排序的数据进行分段,因为分段会造成 MySQL 不得不使用临时表来进行交换排序。</em></p>\n<p>但是sort_buffer_size 不是越大越好：</p>\n<ul>\n<li>Sort_Buffer_Size 是一个 connection 级参数,在每个 connection 第一次需要使用这个 buffer 的时候,一次性分配设置的内存。</li>\n<li>Sort_Buffer_Size 并不是越大越好,由于是 connection 级的参数,过大的设置和高并发可能会耗尽系统内存资源。</li>\n<li>据说 Sort_Buffer_Size 超过 2M 的时候,就会使用 mmap() 而不是 malloc() 来进行内存分配,导致效率降低。</li>\n</ul>\n<h2 id=\"优化八、group-by\"> 优化八、group by</h2>\n<p>其原理也是先排序后分组，其优化方式可参考order by。where高于having,能写在where限定的条件就不要去having限定了。</p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "如何找到垃圾SQL语句,你知道这些方式吗？",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/%E5%9E%83%E5%9C%BESQL/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/%E5%9E%83%E5%9C%BESQL/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<blockquote>\n<p>这篇文章主要是讲如何找到需要优化的SQL语句，即找到查询速度非常慢的SQL语句。</p>\n</blockquote>\n<h1 id=\"一、慢查询日志\"> 一、慢查询日志</h1>\n<h2 id=\"_1-何为慢查询日志\"> 1. 何为慢查询日志</h2>\n<ul>\n<li>慢查询日志是MySQL提供的一种日志记录，它用来记录查询响应时间超过阀值的SQL语句</li>\n<li>这个时间阀值通过参数 <code>long_query_time</code> 设置，如果SQL语句查询时间大于这个值，则会被记录到慢查询日志中，这个值默认是10秒</li>\n<li>MySQL默认不开启慢查询日志，在需要调优的时候可以手动开启，但是多少会对数据库性能有点影响</li>\n</ul>\n<h2 id=\"_2-如何开启慢查询日志\"> 2. 如何开启慢查询日志</h2>\n<p>查看是否开启了慢查询日志</p>\n<p><code>SHOW VARIABLES LIKE '%slow_query_log%'</code></p>\n<p>用命令方式开启慢查询日志，但是重启MySQL后此设置会失效</p>\n<p><code>set global slow_query_log = 1</code></p>\n<p>永久生效开启方式可以在my.cnf里进行配置，在<code>mysqld</code>下新增以下两个参数，重启MySQL即可生效</p>\n<div><pre><code>slow_query_log=1\nslow_query_log_file=日志文件存储路径\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><h2 id=\"_3-慢查询时间阀值\"> 3. 慢查询时间阀值</h2>\n<p>查看慢查询时间阀值</p>\n<p><code>SHOW VARIABLES LIKE 'long_query_time%';</code></p>\n<p>修改慢查询时间阀值</p>\n<p><code>set global long_query_time=3;</code></p>\n<p>修改后的时间阀值生效</p>\n<p><code>需要重新连接或者新开一个回话才能看到修改值。</code></p>\n<p>在MySQL配置文件中修改时间阀值</p>\n<div><pre><code>[mysqld]下配置\nslow_query_log=1\nslow_query_log_file=日志文件存储路径\nlong_query_time=3\nlog_output=FILE\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h1 id=\"二、慢查询日志分析工具\"> 二、慢查询日志分析工具</h1>\n<p>慢查询日志可能会数据量非常大，那么我们如何快速找到需要优化的SQL语句呢，这个神奇诞生了，它就是mysqldumpshow。</p>\n<h2 id=\"_1-mysqldumpslow-help语法\"> 1. mysqldumpslow --help语法</h2>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596350361000.png\" alt=\"\" /></p>\n<p>通过mysqldumpslow --help可知这个命令是由三部分组成：mysqldumpslow <code>[日志查找选项] [日志文件存储位置]</code>。</p>\n<h2 id=\"_2-日志查找选项\"> 2. 日志查找选项</h2>\n<ul>\n<li>s：是表示按何种方式排序</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>c</td>\n<td>访问次数</td>\n</tr>\n<tr>\n<td>i</td>\n<td>锁定时间</td>\n</tr>\n<tr>\n<td>r</td>\n<td>返回记录</td>\n</tr>\n<tr>\n<td>t</td>\n<td>查询时间</td>\n</tr>\n<tr>\n<td>al</td>\n<td>平均锁定时间</td>\n</tr>\n<tr>\n<td>ar</td>\n<td>平均返回记录数</td>\n</tr>\n<tr>\n<td>at</td>\n<td>平均查询时间</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>t：即为返回前面多少条的数据</li>\n<li>g：后边搭配一个正则匹配模式，大小写不敏感的</li>\n</ul>\n<h2 id=\"_3-常用分析语法\"> 3. 常用分析语法</h2>\n<p>查找返回记录做多的10条SQL</p>\n<p><code>mysqldumpslow -s r -t 10 日志路径</code></p>\n<p>查找使用频率最高的10条SQL</p>\n<p><code>mysqldumpslow -s c -t 10 日志路径</code></p>\n<p>查找按照时间排序的前10条里包含左连接的SQL</p>\n<p><code>mysqldumpslow -s t -t 10 -g &quot;left join&quot; 日志路径</code></p>\n<p>通过more查看日志，防止爆屏</p>\n<p><code>mysqldumpslow -s r -t 10 日志路径 | more</code></p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "海量数据模拟",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E6%A8%A1%E6%8B%9F/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E6%A8%A1%E6%8B%9F/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h2 id=\"一、创建表\"> 一、创建表</h2>\n<div><pre><code><span>create</span> <span>table</span> dept\n<span>(</span>\n dno <span>int</span><span>(</span><span>5</span><span>)</span> <span>primary</span> <span>key</span> <span>default</span> <span>0</span><span>,</span>\n dname <span>varchar</span><span>(</span><span>20</span><span>)</span> <span>not</span> <span>null</span> <span>default</span> <span>''</span><span>,</span>\n loc <span>varchar</span><span>(</span><span>30</span><span>)</span> <span>default</span> <span>''</span>\n<span>)</span> <span>engine</span> <span>=</span><span>innodb</span> <span>default</span> <span>charset</span><span>=</span>utf8<span>;</span>\n\n<span>create</span> <span>table</span> emp\n<span>(</span>\n eid <span>int</span><span>(</span><span>5</span><span>)</span> <span>primary</span> <span>key</span><span>,</span>\n ename <span>varchar</span><span>(</span><span>20</span><span>)</span> <span>not</span> <span>null</span> <span>default</span> <span>''</span><span>,</span>\n job <span>varchar</span><span>(</span><span>20</span><span>)</span> <span>not</span> <span>null</span> <span>default</span> <span>''</span><span>,</span>\n deptno <span>int</span><span>(</span><span>5</span><span>)</span> <span>not</span> <span>null</span> <span>default</span> <span>0</span>\n<span>)</span> <span>engine</span> <span>=</span><span>innodb</span> <span>default</span>  <span>charset</span><span>=</span>utf8<span>;</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h2 id=\"二、存储函数插入海量数量\"> 二、存储函数插入海量数量</h2>\n<p>存储过程无return,存储函数有。</p>\n<h3 id=\"_1-创建存储函数生成id和name\"> 1. 创建存储函数生成id和name</h3>\n<p>name随机字符串</p>\n<div><pre><code>delimiter $\ncreate function randstring(n int) returns varchar(255)\nbegin \n    declare all_str varchar(100) default &#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;;\n    declare return_str varchar(255) default &#39;&#39;;\n    declare i int default 0;\n    while i &lt;n\n    do\n        set return_str = concat(return_str,substring(all_str,rand()*52,1));\n        set i = i+1;\n    end while;    \n    return return_str;\nend $\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p><code>ERROR 1418 (HY000): This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable)</code></p>\n<p>如果开启了慢慢查询日志,在开启存储函数就会冲突,解决办法1就是管理慢日志查询。</p>\n<p>解决办法2:</p>\n<p><code>show variables like '%log_bin_trust_function_creators%';</code></p>\n<p><code>set global log_bin_trust_function_creators=1;</code></p>\n<p>id随机数</p>\n<div><pre><code>delimiter $\ncreate function rand_num()returns int(5)\nbegin\n    declare i int default 0;\n    set i = floor(rand() * 100);\n    return i;\nend $;    \n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h3 id=\"_2-通过存储过程插入海量数据emp\"> 2. 通过存储过程插入海量数据emp</h3>\n<div><pre><code>create procedure insert_emp(in eid_start int(10),in data_times int(10))\nbegin\n    declare i int default 0;\n    set autocommit = 0;\n    repeat\n        insert into emp values(eid_start + i,randstring(5),&#39;other&#39;,rand_num());\n        set i = i + 1;\n        until i = data_times\n    end repeat;   \n    commit;\nend $;    \n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h3 id=\"_2-通过存储过程插入海量数据dept\"> 2. 通过存储过程插入海量数据dept</h3>\n<div><pre><code>create procedure insert_dept(in dno_start int(10),in data_times int(10))\nbegin\n    declare i int default 0;\n    set autocommit = 0;\n    repeat\n        insert into dept values(dno_start+i,randstring(6),randstring(8));\n        set i = i + 1;\n        until i = data_times\n    end repeat;\ncommit;\nend$    \n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h3 id=\"_3-插入海量数据\"> 3. 插入海量数据</h3>\n<p><code>delimiter ;</code>分割符改回原来</p>\n<p>员工表插入80w条数据\n<code>call insert_emp(1000,800000);</code>\n部门表插入30条数据\n<code>call insert_dept(10,30);</code></p>\n<div><pre><code>mysql&gt; select count(1) from emp;\n+----------+\n| count(1) |\n+----------+\n|   800000 |\n+----------+\n1 row in set (0.05 sec)\n\nmysql&gt; select count(1) from dept;\n+----------+\n| count(1) |\n+----------+\n|       30 |\n+----------+\n1 row in set (0.00 sec)\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><h2 id=\"三、利用profiles分析海量数据\"> 三、利用profiles分析海量数据</h2>\n<h3 id=\"_1-打开profiles\"> 1. 打开profiles</h3>\n<div><pre><code>set profiling = on;\nshow variables like &#39;%profiling%&#39;;\n\nmysql&gt; set profiling = on;\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\nmysql&gt; show variables like &#39;%profiling%&#39;;\n+------------------------+-------+\n| Variable_name          | Value |\n+------------------------+-------+\n| have_profiling         | YES   |\n| profiling              | ON    |\n| profiling_history_size | 15    |\n+------------------------+-------+\n3 rows in set (0.00 sec)\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p><img src=\"https://img.springlearn.cn/blog/learn_1596455359000.png\" alt=\"\" /></p>\n<h3 id=\"_2-查询每条耗时\"> 2. 查询每条耗时</h3>\n<p>profiles会记录每个sql的耗时</p>\n<div><pre><code>mysql&gt; show profiles;\n+----------+------------+-----------------------------------+\n| Query_ID | Duration   | Query                             |\n+----------+------------+-----------------------------------+\n|        1 | 0.00164000 | show variables like &#39;%profiling%&#39; |\n|        2 | 0.04513900 | select count(1) from emp          |\n|        3 | 0.00056200 | select count(1) from dept         |\n+----------+------------+-----------------------------------+\n3 rows in set, 1 warning (0.00 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>但是这样不能精确匹配到耗时在哪里。此时可以使用profile精确来分析sql</p>\n<h3 id=\"_3-精确查询耗时\"> 3. 精确查询耗时</h3>\n<p><strong>精确</strong>\n根据上面的Query_ID来精确查找\n<code>show profile all for query 2;</code></p>\n<div><pre><code>+--------------------------------+----------+----------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+-------------------------+----------------------+-------------+\n| Status                         | Duration | CPU_user | CPU_system | Context_voluntary | Context_involuntary | Block_ops_in | Block_ops_out | Messages_sent | Messages_received | Page_faults_major | Page_faults_minor | Swaps | Source_function         | Source_file          | Source_line |\n+--------------------------------+----------+----------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+-------------------------+----------------------+-------------+\n| starting                       | 0.000106 | 0.000094 |   0.000012 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | NULL                    | NULL                 |        NULL |\n| Executing hook on transaction  | 0.000008 | 0.000004 |   0.000004 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | launch_hook_trans_begin | rpl_handler.cc       |        1106 |\n| starting                       | 0.000013 | 0.000010 |   0.000002 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | launch_hook_trans_begin | rpl_handler.cc       |        1108 |\n| checking permissions           | 0.000009 | 0.000007 |   0.000003 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | check_access            | sql_authorization.cc |        2202 |\n| Opening tables                 | 0.000047 | 0.000045 |   0.000002 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | open_tables             | sql_base.cc          |        5587 |\n| init                           | 0.000012 | 0.000008 |   0.000003 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | execute                 | sql_select.cc        |         661 |\n| System lock                    | 0.000014 | 0.000012 |   0.000003 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_lock_tables       | lock.cc              |         332 |\n| optimizing                     | 0.000010 | 0.000007 |   0.000002 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | optimize                | sql_optimizer.cc     |         213 |\n| statistics                     | 0.000037 | 0.000023 |   0.000014 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 1 |     0 | optimize                | sql_optimizer.cc     |         423 |\n| preparing                      | 0.000025 | 0.000023 |   0.000003 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | optimize                | sql_optimizer.cc     |         497 |\n| executing                      | 0.000007 | 0.000004 |   0.000003 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | exec                    | sql_executor.cc      |         228 |\n| Sending data                   | 0.044768 | 0.072019 |   0.003191 |                 0 |                 810 |            0 |             0 |             0 |                 0 |                 0 |                 9 |     0 | exec                    | sql_executor.cc      |         304 |\n| end                            | 0.000018 | 0.000009 |   0.000010 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | execute                 | sql_select.cc        |         714 |\n| query end                      | 0.000006 | 0.000004 |   0.000002 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command   | sql_parse.cc         |        4520 |\n| waiting for handler commit     | 0.000013 | 0.000011 |   0.000001 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | ha_commit_trans         | handler.cc           |        1533 |\n| closing tables                 | 0.000009 | 0.000008 |   0.000002 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command   | sql_parse.cc         |        4566 |\n| freeing items                  | 0.000026 | 0.000012 |   0.000013 |                 0 |                   0 |            0 |             0 |             1 |                 0 |                 0 |                 0 |     0 | mysql_parse             | sql_parse.cc         |        5237 |\n| cleaning up                    | 0.000011 | 0.000009 |   0.000002 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | dispatch_command        | sql_parse.cc         |        2147 |\n+--------------------------------+----------+----------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+-------------------------+----------------------+-------------+\n18 rows in set, 1 warning (0.00 sec)\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div><p>我们可以看到信息太多了,我们其实只用关系几列的数据就行了。</p>\n<div><pre><code>mysql&gt; show profile cpu,block io for query 2;\n+--------------------------------+----------+----------+------------+--------------+---------------+\n| Status                         | Duration | CPU_user | CPU_system | Block_ops_in | Block_ops_out |\n+--------------------------------+----------+----------+------------+--------------+---------------+\n| starting                       | 0.000106 | 0.000094 |   0.000012 |            0 |             0 |\n| Executing hook on transaction  | 0.000008 | 0.000004 |   0.000004 |            0 |             0 |\n| starting                       | 0.000013 | 0.000010 |   0.000002 |            0 |             0 |\n| checking permissions           | 0.000009 | 0.000007 |   0.000003 |            0 |             0 |\n| Opening tables                 | 0.000047 | 0.000045 |   0.000002 |            0 |             0 |\n| init                           | 0.000012 | 0.000008 |   0.000003 |            0 |             0 |\n| System lock                    | 0.000014 | 0.000012 |   0.000003 |            0 |             0 |\n| optimizing                     | 0.000010 | 0.000007 |   0.000002 |            0 |             0 |\n| statistics                     | 0.000037 | 0.000023 |   0.000014 |            0 |             0 |\n| preparing                      | 0.000025 | 0.000023 |   0.000003 |            0 |             0 |\n| executing                      | 0.000007 | 0.000004 |   0.000003 |            0 |             0 |\n| Sending data                   | 0.044768 | 0.072019 |   0.003191 |            0 |             0 |\n| end                            | 0.000018 | 0.000009 |   0.000010 |            0 |             0 |\n| query end                      | 0.000006 | 0.000004 |   0.000002 |            0 |             0 |\n| waiting for handler commit     | 0.000013 | 0.000011 |   0.000001 |            0 |             0 |\n| closing tables                 | 0.000009 | 0.000008 |   0.000002 |            0 |             0 |\n| freeing items                  | 0.000026 | 0.000012 |   0.000013 |            0 |             0 |\n| cleaning up                    | 0.000011 | 0.000009 |   0.000002 |            0 |             0 |\n+--------------------------------+----------+----------+------------+--------------+---------------+\n18 rows in set, 1 warning (0.01 sec)\n\nmysql&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br></div></div><h3 id=\"_4-全局查询日志\"> 4. 全局查询日志</h3>\n<p>仅仅在调优和开发中使用,生产要关闭</p>\n<p><code>show variables like '%general_log%';</code></p>\n<p>开启全局日志记录并将sql都写入到表中</p>\n<div><pre><code>set global general_log = 1;\nset global log_output = &#39;table&#39;;\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><div><pre><code>mysql&gt; show variables like &#39;%general_log%&#39;;\n+------------------+------------------------------------+\n| Variable_name    | Value                              |\n+------------------+------------------------------------+\n| general_log      | OFF                                |\n| general_log_file | /usr/local/var/mysql/localhost.log |\n+------------------+------------------------------------+\n2 rows in set (0.01 sec)\n\nmysql&gt; set global general_log = 1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; show variables like &#39;%general_log%&#39;;\n+------------------+------------------------------------+\n| Variable_name    | Value                              |\n+------------------+------------------------------------+\n| general_log      | ON                                 |\n| general_log_file | /usr/local/var/mysql/localhost.log |\n+------------------+------------------------------------+\n2 rows in set (0.01 sec)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><p>开启之后就可以在mysql库中的general_log表中进行查询</p>\n<p><code>select * from mysql.general_log;</code>\n<img src=\"https://img.springlearn.cn/blog/learn_1596457337000.png\" alt=\"\" /></p>\n<p>将sql设置到文件中</p>\n<div><pre><code>set global general_log = 1;\nset global log_output = &#39;file&#39;;\nset global general_log_file=&#39;/Users/liuxin/general.log&#39;;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p><img src=\"https://img.springlearn.cn/blog/learn_1596457737000.png\" alt=\"\" /></p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "年终总结汇报大纲",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/design/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93%E6%B1%87%E6%8A%A5%E5%A4%A7%E7%BA%B2/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/design/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93%E6%B1%87%E6%8A%A5%E5%A4%A7%E7%BA%B2/",
      "content_html": "<p>工作总结框架如下：</p>\n<h2 id=\"一、工作开展情况\"> 一、工作开展情况</h2>\n<p>1.一年来取得的成绩。</p>\n<p>2.在单位主要做了哪些工作。</p>\n<p>3.目前正在开展的主要工作。</p>\n<p>4.下一步要做的工作。</p>\n<h2 id=\"二、工作中的创新点、亮点以及经验技巧。\"> 二、工作中的创新点、亮点以及经验技巧。</h2>\n<p>1.哪些环节提高了工作效率。</p>\n<p>2.精简和优化了哪些工作流程。</p>\n<p>3.为单位节约了哪些成本。</p>\n<h2 id=\"三、存在不足和问题分析\"> 三、存在不足和问题分析</h2>\n<p>1.工作中遇到了哪些困难。</p>\n<p>2.出现困难的原因。</p>\n<p>3.是如何解决这些困难的。</p>\n<h2 id=\"四、来年的打算\"> 四、来年的打算</h2>\n<p>1.工作思路计划</p>\n<p>2.需要单位给予的哪些支持。#职场加油站# #冬日</p>\n",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Java代码规范全部奉上",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/design/Java%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%85%A8%E9%83%A8%E5%A5%89%E4%B8%8A/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/design/Java%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%85%A8%E9%83%A8%E5%A5%89%E4%B8%8A/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1598165820000.png\" alt=\"\" /></p>\n<blockquote>\n<p>写代码就像写文章, 好的代码就像好的文章,结构严谨,构思清晰。写代码就像写文章, 一不留神就成流水账，为避免这种情况作为软件开发工程师，重要的是设计而不是实现。</p>\n</blockquote>\n<p><strong>在一个团队中,由于不同经验的开发导致编程风格可能会出现非常混乱的情况,从而导致开发成本上升。难以维护。所以代码规范就显得异常重要了。</strong></p>\n<p>本篇文章就是给出编程命名的建议,仅供参考,但是其目的是为了统一规范,提高编程能力,降低开发成本,减少代码维护成本。</p>\n<p>契约精神: 做到有法可依，有章可循。</p>\n<h2 id=\"一、类命名\"> 一、类命名</h2>\n<h3 id=\"_1-抽象类\"> 1. 抽象类</h3>\n<p>适用的设计模式为模板模式。抽象是自下往上的设计。由具体实现推断出抽象方法。建议以Abstract开头。</p>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Abstract 或者 Base 开头</td>\n<td>BaseUserService、AbstractUserService</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_2-枚举类\"> 2. 枚举类</h3>\n<ul>\n<li>枚举是由JVM来保证的单例。可以用来做单例类。</li>\n<li>枚举类常用作值判断,不建议每次进行循环判断得到实例。建议由内部维护一个map类型,当做cache。此方法建议放在static静态代码块中实现</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Enum 作为后缀</td>\n<td>GenderEnum</td>\n</tr>\n</tbody>\n</table>\n<div><pre><code>public enum ProtocolEnum {\n\n    /**\n     * ECHO协议\n     */\n    ECHO(1, null),\n\n    /**\n     * mojito协议\n     */\n    MOJITO(2, MojitoProtocol.class);\n\n    private byte type;\n\n    private Class&lt;? extends Protocol&gt; protocol;\n\n    private static Map&lt;Byte, ProtocolEnum&gt; cache = new HashMap&lt;&gt;();\n\n    static {\n        for (ProtocolEnum protocolEnum : values()) {\n            cache.put(protocolEnum.type, protocolEnum);\n        }\n    }\n\n    public static ProtocolEnum byType(byte type) {\n        return cache.get(type);\n    }\n}    \n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br></div></div><h3 id=\"_3-工具类\"> 3. 工具类</h3>\n<p>工具类常为无状态对象,无状态对象都是线程安全对象,建议使用 <code>final</code> 修饰。</p>\n<p>工具类中避免出现业务属性, 如果出现业务属性,抽象出领域层</p>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Utils作为后缀</td>\n<td>StringUtils</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_4-异常类\"> 4. 异常类</h3>\n<p>建议保持异常链。</p>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Exception结尾</td>\n<td>RuntimeException</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_5-接口实现类\"> 5. 接口实现类</h3>\n<p>众所周知</p>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>接口名+ Impl</td>\n<td>UserServiceImpl</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_6-设计模式相关类\"> 6. 设计模式相关类</h3>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Builder，Factory等</td>\n<td>当使用到设计模式时，需要使用对应的设计模式作为后缀，如ThreadFactory</td>\n</tr>\n</tbody>\n</table>\n<p><img src=\"https://img.springlearn.cn/27c9d5187cd283f8d160ec1ed2b5ac89.jpg\" alt=\"\" /></p>\n<h3 id=\"_7-处理特定功能的\"> 7. 处理特定功能的</h3>\n<p>其主要的目的是代码可重复使用。</p>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Handler，Predicate, Validator</td>\n<td>表示处理器，校验器，断言，这些类工厂还有配套的方法名如handle，predicate，validate</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_8-测试类\"> 8. 测试类</h3>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Test结尾</td>\n<td>UserServiceTest， 表示用来测试UserService类的</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_9-领域模型载体\"> 9. 领域模型载体</h3>\n<table>\n<thead>\n<tr>\n<th>建议</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DTO/*Request</td>\n<td>数据传输对象</td>\n</tr>\n<tr>\n<td>BO</td>\n<td>业务对象</td>\n</tr>\n<tr>\n<td>VO</td>\n<td>数据展示对象,用于承载页面数据</td>\n</tr>\n<tr>\n<td>DO</td>\n<td>数据持久化对象</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"二、方法命名\"> 二、方法命名</h2>\n<p>参考于网络。</p>\n<h3 id=\"_1-布尔判断方法\"> 1. 布尔判断方法</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>位置</strong></th>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n<th><strong>例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Prefix</td>\n<td>is</td>\n<td>对象是否符合期待的状态</td>\n<td>isValid</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>can</td>\n<td>对象<strong>能否执行</strong>所期待的动作</td>\n<td>canRemove</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>should</td>\n<td>调用方执行某个命令或方法是<strong>好还是不好</strong>,<strong>应不应该</strong>，或者说<strong>推荐还是不推荐</strong></td>\n<td>shouldMigrate</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>has</td>\n<td>对象<strong>是否持有</strong>所期待的数据和属性</td>\n<td>hasObservers</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>needs</td>\n<td>调用方<strong>是否需要</strong>执行某个命令或方法</td>\n<td>needsMigrate</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_2-检查的方法\"> 2. 检查的方法</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n<th><strong>例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ensure</td>\n<td>检查是否为期待的状态，不是则抛出异常或返回error code</td>\n<td>ensureCapacity</td>\n</tr>\n<tr>\n<td>validate</td>\n<td>检查是否为正确的状态，不是则抛出异常或返回error code</td>\n<td>validateInputs</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_3-按需求才执行的方法\"> 3. 按需求才执行的方法</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>位置</strong></th>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n<th><strong>例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Suffix</td>\n<td>IfNeeded</td>\n<td>需要的时候执行，不需要的时候什么都不做</td>\n<td>drawIfNeeded</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>might</td>\n<td>同上</td>\n<td>mightCreate</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>try</td>\n<td>尝试执行，失败时抛出异常或是返回errorcode</td>\n<td>tryCreate</td>\n</tr>\n<tr>\n<td>Suffix</td>\n<td>OrDefault</td>\n<td>尝试执行，失败时返回默认值</td>\n<td>getOrDefault</td>\n</tr>\n<tr>\n<td>Suffix</td>\n<td>OrElse</td>\n<td>尝试执行、失败时返回实际参数中指定的值</td>\n<td>getOrElse</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>force</td>\n<td>强制尝试执行。error抛出异常或是返回值</td>\n<td>forceCreate, forceStop</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_4-异步相关方法\"> 4. 异步相关方法</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>位置</strong></th>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n<th><strong>例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Prefix</td>\n<td>blocking</td>\n<td>线程阻塞方法</td>\n<td>blockingGetUser</td>\n</tr>\n<tr>\n<td>Suffix</td>\n<td>InBackground</td>\n<td>执行在后台的线程</td>\n<td>doInBackground</td>\n</tr>\n<tr>\n<td>Suffix</td>\n<td>Async</td>\n<td>异步方法</td>\n<td>sendAsync</td>\n</tr>\n<tr>\n<td>Suffix</td>\n<td>Sync</td>\n<td>对应已有异步方法的同步方法</td>\n<td>sendSync</td>\n</tr>\n<tr>\n<td>Prefix or Alone</td>\n<td>schedule</td>\n<td>Job和Task放入队列</td>\n<td>schedule, scheduleJob</td>\n</tr>\n<tr>\n<td>Prefix or Alone</td>\n<td>post</td>\n<td>同上</td>\n<td>postJob</td>\n</tr>\n<tr>\n<td>Prefix or Alone</td>\n<td>execute</td>\n<td>执行异步方法（注：我一般拿这个做同步方法名）</td>\n<td>execute, executeTask</td>\n</tr>\n<tr>\n<td>Prefix or Alone</td>\n<td>start</td>\n<td>同上</td>\n<td>start, startJob</td>\n</tr>\n<tr>\n<td>Prefix or Alone</td>\n<td>cancel</td>\n<td>停止异步方法</td>\n<td>cancel, cancelJob</td>\n</tr>\n<tr>\n<td>Prefix or Alone</td>\n<td>stop</td>\n<td>同上</td>\n<td>stop, stopJob</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_5-回调方法\"> 5. 回调方法</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>位置</strong></th>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n<th><strong>例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Prefix</td>\n<td>on</td>\n<td>事件发生时执行</td>\n<td>onCompleted</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>before</td>\n<td>事件发生前执行</td>\n<td>beforeUpdate</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>pre</td>\n<td>同上</td>\n<td>preUpdate</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>will</td>\n<td>同上</td>\n<td>willUpdate</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>after</td>\n<td>事件发生后执行</td>\n<td>afterUpdate</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>post</td>\n<td>同上</td>\n<td>postUpdate</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>did</td>\n<td>同上</td>\n<td>didUpdate</td>\n</tr>\n<tr>\n<td>Prefix</td>\n<td>should</td>\n<td>确认事件是否可以发生时执行</td>\n<td>shouldUpdate</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_6-操作对象生命周期的方法\"> 6. 操作对象生命周期的方法</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n<th><strong>例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>initialize</td>\n<td>初始化。也可作为延迟初始化使用</td>\n<td>initialize</td>\n</tr>\n<tr>\n<td>pause</td>\n<td>暂停</td>\n<td>onPause ，pause</td>\n</tr>\n<tr>\n<td>stop</td>\n<td>停止</td>\n<td>onStop，stop</td>\n</tr>\n<tr>\n<td>abandon</td>\n<td>销毁的替代</td>\n<td>abandon</td>\n</tr>\n<tr>\n<td>destroy</td>\n<td>同上</td>\n<td>destroy</td>\n</tr>\n<tr>\n<td>dispose</td>\n<td>同上</td>\n<td>dispose</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_7-与集合操作相关的方法\"> 7. 与集合操作相关的方法</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n<th><strong>例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>contains</td>\n<td>是否持有与指定对象相同的对象</td>\n<td>contains</td>\n</tr>\n<tr>\n<td>add</td>\n<td>添加</td>\n<td>addJob</td>\n</tr>\n<tr>\n<td>append</td>\n<td>添加</td>\n<td>appendJob</td>\n</tr>\n<tr>\n<td>insert</td>\n<td>插入到下标n</td>\n<td>insertJob</td>\n</tr>\n<tr>\n<td>put</td>\n<td>添加与key对应的元素</td>\n<td>putJob</td>\n</tr>\n<tr>\n<td>remove</td>\n<td>移除元素</td>\n<td>removeJob</td>\n</tr>\n<tr>\n<td>enqueue</td>\n<td>添加到队列的最末位</td>\n<td>enqueueJob</td>\n</tr>\n<tr>\n<td>dequeue</td>\n<td>从队列中头部取出并移除</td>\n<td>dequeueJob</td>\n</tr>\n<tr>\n<td>push</td>\n<td>添加到栈头</td>\n<td>pushJob</td>\n</tr>\n<tr>\n<td>pop</td>\n<td>从栈头取出并移除</td>\n<td>popJob</td>\n</tr>\n<tr>\n<td>peek</td>\n<td>从栈头取出但不移除</td>\n<td>peekJob</td>\n</tr>\n<tr>\n<td>find</td>\n<td>寻找符合条件的某物</td>\n<td>findById</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_8-数据增删改查相关的方法\"> 8. 数据增删改查相关的方法</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n<th><strong>例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>create</td>\n<td>新创建</td>\n<td>createAccount</td>\n</tr>\n<tr>\n<td>new</td>\n<td>新创建</td>\n<td>newAccount</td>\n</tr>\n<tr>\n<td>from</td>\n<td>从既有的某物新建，或是从其他的数据新建</td>\n<td>fromConfig</td>\n</tr>\n<tr>\n<td>to</td>\n<td>转换</td>\n<td>toString</td>\n</tr>\n<tr>\n<td>update</td>\n<td>更新既有某物</td>\n<td>updateAccount</td>\n</tr>\n<tr>\n<td>load</td>\n<td>读取</td>\n<td>loadAccount</td>\n</tr>\n<tr>\n<td>fetch</td>\n<td>远程读取</td>\n<td>fetchAccount</td>\n</tr>\n<tr>\n<td>delete</td>\n<td>删除</td>\n<td>deleteAccount</td>\n</tr>\n<tr>\n<td>remove</td>\n<td>删除</td>\n<td>removeAccount</td>\n</tr>\n<tr>\n<td>save</td>\n<td>保存</td>\n<td>saveAccount</td>\n</tr>\n<tr>\n<td>store</td>\n<td>保存</td>\n<td>storeAccount</td>\n</tr>\n<tr>\n<td>commit</td>\n<td>保存</td>\n<td>commitChange</td>\n</tr>\n<tr>\n<td>apply</td>\n<td>保存或应用</td>\n<td>applyChange</td>\n</tr>\n<tr>\n<td>clear</td>\n<td>清除数据或是恢复到初始状态</td>\n<td>clearAll</td>\n</tr>\n<tr>\n<td>reset</td>\n<td>清除数据或是恢复到初始状态</td>\n<td>resetAll</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_9-成对出现的动词\"> 9. 成对出现的动词</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th><strong>单词</strong></th>\n<th><strong>意义</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>get获取</td>\n<td>set 设置</td>\n</tr>\n<tr>\n<td>add 增加</td>\n<td>remove 删除</td>\n</tr>\n<tr>\n<td>create 创建</td>\n<td>destory 移除</td>\n</tr>\n<tr>\n<td>start 启动</td>\n<td>stop 停止</td>\n</tr>\n<tr>\n<td>open 打开</td>\n<td>close 关闭</td>\n</tr>\n<tr>\n<td>read 读取</td>\n<td>write 写入</td>\n</tr>\n<tr>\n<td>load 载入</td>\n<td>save 保存</td>\n</tr>\n<tr>\n<td>create 创建</td>\n<td>destroy 销毁</td>\n</tr>\n<tr>\n<td>begin 开始</td>\n<td>end 结束</td>\n</tr>\n<tr>\n<td>backup 备份</td>\n<td>restore 恢复</td>\n</tr>\n<tr>\n<td>import 导入</td>\n<td>export 导出</td>\n</tr>\n<tr>\n<td>split 分割</td>\n<td>merge 合并</td>\n</tr>\n<tr>\n<td>inject 注入</td>\n<td>extract 提取</td>\n</tr>\n<tr>\n<td>attach 附着</td>\n<td>detach 脱离</td>\n</tr>\n<tr>\n<td>bind 绑定</td>\n<td>separate 分离</td>\n</tr>\n<tr>\n<td>view 查看</td>\n<td>browse 浏览</td>\n</tr>\n<tr>\n<td>edit 编辑</td>\n<td>modify 修改</td>\n</tr>\n<tr>\n<td>select 选取</td>\n<td>mark 标记</td>\n</tr>\n<tr>\n<td>copy 复制</td>\n<td>paste 粘贴</td>\n</tr>\n<tr>\n<td>undo 撤销</td>\n<td>redo 重做</td>\n</tr>\n<tr>\n<td>insert 插入</td>\n<td>delete 移除</td>\n</tr>\n<tr>\n<td>add 加入</td>\n<td>append 添加</td>\n</tr>\n<tr>\n<td>clean 清理</td>\n<td>clear 清除</td>\n</tr>\n<tr>\n<td>index 索引</td>\n<td>sort 排序</td>\n</tr>\n<tr>\n<td>find 查找</td>\n<td>search 搜索</td>\n</tr>\n<tr>\n<td>increase 增加</td>\n<td>decrease 减少</td>\n</tr>\n<tr>\n<td>play 播放</td>\n<td>pause 暂停</td>\n</tr>\n<tr>\n<td>launch 启动</td>\n<td>run 运行</td>\n</tr>\n<tr>\n<td>compile 编译</td>\n<td>execute 执行</td>\n</tr>\n<tr>\n<td>debug 调试</td>\n<td>trace 跟踪</td>\n</tr>\n<tr>\n<td>observe 观察</td>\n<td>listen 监听</td>\n</tr>\n<tr>\n<td>build 构建</td>\n<td>publish 发布</td>\n</tr>\n<tr>\n<td>input 输入</td>\n<td>output 输出</td>\n</tr>\n<tr>\n<td>encode 编码</td>\n<td>decode 解码</td>\n</tr>\n<tr>\n<td>encrypt 加密</td>\n<td>decrypt 解密</td>\n</tr>\n<tr>\n<td>compress 压缩</td>\n<td>decompress 解压缩</td>\n</tr>\n<tr>\n<td>pack 打包</td>\n<td>unpack 解包</td>\n</tr>\n<tr>\n<td>parse 解析</td>\n<td>emit 生成</td>\n</tr>\n<tr>\n<td>connect 连接</td>\n<td>disconnect 断开</td>\n</tr>\n<tr>\n<td>send 发送</td>\n<td>receive 接收</td>\n</tr>\n<tr>\n<td>download 下载</td>\n<td>upload 上传</td>\n</tr>\n<tr>\n<td>refresh 刷新</td>\n<td>synchronize 同步</td>\n</tr>\n<tr>\n<td>update 更新</td>\n<td>revert 复原</td>\n</tr>\n<tr>\n<td>lock 锁定</td>\n<td>unlock 解锁</td>\n</tr>\n<tr>\n<td>check out 签出</td>\n<td>check in 签入</td>\n</tr>\n<tr>\n<td>submit 提交</td>\n<td>commit 交付</td>\n</tr>\n<tr>\n<td>push 推</td>\n<td>pull 拉</td>\n</tr>\n<tr>\n<td>expand 展开</td>\n<td>collapse 折叠</td>\n</tr>\n<tr>\n<td>begin 起始</td>\n<td>end 结束</td>\n</tr>\n<tr>\n<td>start 开始</td>\n<td>finish 完成</td>\n</tr>\n<tr>\n<td>enter 进入</td>\n<td>exit 退出</td>\n</tr>\n<tr>\n<td>abort 放弃</td>\n<td>quit 离开</td>\n</tr>\n<tr>\n<td>obsolete 废弃</td>\n<td>depreciate 废旧</td>\n</tr>\n<tr>\n<td>collect 收集</td>\n<td>aggregate 聚集</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_10-获取必须的参数\"> 10. 获取必须的参数</h3>\n<table>\n<thead>\n<tr>\n<th>getRequiredProperty</th>\n<th>获取必须的参数,否则报错,该方法一般都要抛出异常</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>getProperty</td>\n<td>非必须参数,可以返回null，不报错，调用方自行判断处理逻辑</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"_11-获取数据并对数据进行某种处理\"> 11. 获取数据并对数据进行某种处理</h3>\n<p>注：Prefix-前缀，Suffix-后缀，Alone-单独使用</p>\n<table>\n<thead>\n<tr>\n<th>位置</th>\n<th>单词</th>\n<th>意义</th>\n<th>例子</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Prefix</td>\n<td>resolve</td>\n<td>解决某些问题,比如对文本占位符进行填充,并获取到填充后的值</td>\n<td>resolvePlaceholders</td>\n</tr>\n<tr>\n<td>Suffix</td>\n<td>Placeholders</td>\n<td>占位符相关命名</td>\n<td>resolvePlaceholders</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"三、方法编程建议\"> 三、方法编程建议</h2>\n<h3 id=\"_1-方法复杂度\"> 1. 方法复杂度</h3>\n<p>凡是逻辑判断语句均为复杂度。当一个方法中出现了大于等于10个复杂度。建议根据</p>\n<p>方法实现进行业务抽离。两个建议点(1. 方法单一职责 2. 方法可重复利用 3. 是否能用策略模式或者命令模式)</p>\n<h3 id=\"_2-方法长度及宽度\"> 2.方法长度及宽度</h3>\n<p>长度: 方法的长度建议控制在80-120行以内。满足一屏可以放下。\n宽度: 当方法超过3个及以上入参,建议使用对象封装(对象容易后期扩展,且不会出现眼花缭乱现象)</p>\n<h3 id=\"_3-关注方法优化编辑器提示\"> 3.关注方法优化编辑器提示</h3>\n<p>减少出现黄色警告⚠️, 最好不要出现警告。编辑器的警告都是优化点,需要在编程时候考虑进去。</p>\n<p>eg: 性能优化、命名不规范、重复代码</p>\n<p><img src=\"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/a/21643544635/2678603850/7fbfc8ab-22ca-4f92-be04-31c4d1b704e3.png\" alt=\"img\" /></p>\n<h3 id=\"_4-方法重复代码\"> 4.方法重复代码</h3>\n<p>贫血模型的标志性问题</p>\n<p>重复代码编辑器会提出警告,此种现象,强烈建议不要出现</p>\n<h3 id=\"_5-方法注释\"> 5. 方法注释</h3>\n<p>注释是必须要做的(先写注释在做实现)，重在设计。</p>\n<p>代码是公司财产, 要对自己对公司对后人负责,先写注释再做实现。</p>\n<h2 id=\"四、项目依赖模型\"> 四、项目依赖模型</h2>\n<h3 id=\"_1-领域设计的认识\"> 1. 领域设计的认识</h3>\n<p>领域划分,用另外一个词形容也非常的合适,就是业务模块化。所有能力都进行能力化抽象,形成模块,形成领域。 当遇到新的业务逻辑,底层的数据结构和数据关系肯定也是一样的。那么就可以像堆积木一样,根据这些模块快速的组装成新的业务逻辑。快速的实现业务的迭代和升级。</p>\n<p>关于这个问题,需要结合自己的业务系统来进行抽象和设计。</p>\n<p>设计核心: 用面向对象的设计思想对业务进行解耦来做到领域划分。</p>\n<h3 id=\"_2-层次划分\"> 2. 层次划分</h3>\n<h4 id=\"基础层-外部调用-db操作\"> 基础层(外部调用,db操作)</h4>\n<p>注意: 基础层只做适配不做业务</p>\n<ul>\n<li>db操作以dao结尾</li>\n<li>外部调用以Client(Http协议)/Instruction(Rpc协议)\n<ul>\n<li>改层仅仅做数据适配,不做业务处理。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"领域层-偏向领域的业务逻辑\"> 领域层(偏向领域的业务逻辑)</h4>\n<p>以Manager</p>\n<h4 id=\"业务层-对领域层的业务编排\"> 业务层(对领域层的业务编排)</h4>\n<p>以Service结尾</p>\n<h4 id=\"外观层-可以提供能力-可以提供视图-。\"> 外观层(可以提供能力,可以提供视图)。</h4>\n<p>以Resource、Facade结尾</p>\n<p>有一个完善的领域层,可以方便快速便捷的对业务进行扩展。与其对立的就是贫血模型。没有领域层只有业务层,业务逻辑都堆积在业务层。典型的面向过程设计。</p>\n<p><img src=\"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/a/21643544635/2678603850/8be6e99c-f5e9-4a8a-bce4-85f5aa3717e7.png\" alt=\"img\" /></p>\n<h3 id=\"_3-层次依赖模型\"> 3. 层次依赖模型</h3>\n<p>maven多模块应用和单模块应用通用。</p>\n<p>一定要控制项目的依赖情况。</p>\n<p>①service只能出现领域层的依赖, 领域层只能存在dao层和第三方服务层。</p>\n<p>②各个层代码不能平行调用(出现平行调用逻辑,要抽象出领域层来封装)。</p>\n<p><img src=\"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/a/21643544635/2678603850/c08a058d-8c81-45c4-bdc4-82d666a304f7.png\" alt=\"img\" /></p>\n<p>具体代码体现就是</p>\n<ul>\n<li>以Service命名的类,里面只能存在Manager</li>\n<li>以Manager命名的类,里面只能存在Dao和Client(Http协议)/Instruction(Rpc协议)封装的第三方调用</li>\n<li>以Dao命名的类是对数据库的操作</li>\n<li>以Client(Http协议)/Instruction(Rpc协议)命名的类,作为适配层与第三方API进行交互封装</li>\n</ul>\n<h2 id=\"五、设计模式六大原则\"> 五、设计模式六大原则</h2>\n<p>代码编程时候要向以下这6大原则,进行向其靠拢。</p>\n<h3 id=\"_1-开闭原则\"> 1. 开闭原则</h3>\n<p>一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。</p>\n<p><strong>代码设计建议</strong></p>\n<p>用抽象构建框架，用实现扩展细节因为抽象灵活性好，适应性广，只要抽象的合理，可以基本保持软件架构的稳定。</p>\n<h3 id=\"_2-单一职责\"> 2. 单一职责</h3>\n<p>不要存在多于一个导致类变更的原因通俗的说，即一个类只负责一项职责。</p>\n<p><strong>代码设计建议</strong></p>\n<p>在具体方法编写或者类编写时候,类编写时候业务要单一,方法编写时候实现要单一</p>\n<p>反例:</p>\n<p>UserService 类中提供了获取商品信息的接口</p>\n<p>setUserName(String name)方法的时候,对name的值进行了二次处理。</p>\n<h3 id=\"_3-里氏替换原则\"> 3. <strong>里氏替换原则</strong></h3>\n<p>所有引用基类的地方必须能透明地使用其子类的对象。</p>\n<p><strong>代码设计建议</strong></p>\n<p>面向接口编程, 子类能透明替换父类。</p>\n<h3 id=\"_4-依赖倒置原则\"> 4. <strong>依赖倒置原则</strong></h3>\n<p>高层模块不应该依赖低层模块，二者都应该依赖其抽象；抽象不应该依赖细节；细节应该依赖抽象。</p>\n<p><strong>代码设计建议</strong></p>\n<p>要根据接口或者抽象去设计,不要依赖于细节,eg.项目中要换数据库,不用重新写底层的数据库代码. 就是使用了hibernate一样,替换方言就好了,因为hibernate是根据接口设计的,不同数据库有不同的实现,可以直接使用. eg2: 我生病了要去买药,如果A药铺,没有我就用B药铺买. 因为他们都是药铺,都有一样的功能,可以友好的替换</p>\n<h3 id=\"_5-接口隔离原则\"> <strong>5. 接口隔离原则</strong></h3>\n<p>客户端不应该依赖它不需要的接口；一个类对另一个类的依赖应该建立在最小的接口上。</p>\n<p><strong>代码设计建议</strong></p>\n<p>保持最小的责任。</p>\n<p>eg: 接口ConfigurableApplicationContext实现了Lifecycle和Closeable接口。他们其中每个里面定义的接口都很少,为什么不定义到一起呢?</p>\n<p>首先第一责任清晰单一,第二做到接口隔离。</p>\n<p>当某一个方法只用到生命周期的方法,那么方法就可以写成。</p>\n<p>public void stop(Lifecycle lifecycle); 调用时候用-&gt;public void stop(new ConfigurableApplicationContext());</p>\n<p>public void close(Closeable closeable); 调用时候用-&gt;public void close(new ConfigurableApplicationContext());</p>\n<p>stop里面的实现就只能调用Lifecycle里面的方法,而不能调用ConfigurableApplicationContext里面的方法。从而来达到接口隔离原则</p>\n<h3 id=\"_6-迪米特法则\"> 6. <strong>迪米特法则</strong></h3>\n<p>一个对象应该对其他对象保持最少的了解。</p>\n<p><strong>代码设计建议</strong></p>\n<p>减少类与类之间的关系,接口隔离也可以做到。</p>\n<h2 id=\"六、版本迭代\"> 六、版本迭代</h2>\n<p>master分支版本后缀 <span><span><i>Not supported content</i></span><span aria-hidden=\"true\"><span><span style=\"height:0.6833em;\"></span><span><span>大版本号</span></span><span>.</span></span></span></span>{0进位}.${迭代版本号}.RELEASE</p>\n<p>test分支版本号 <span><span><i>Not supported content</i></span><span aria-hidden=\"true\"><span><span style=\"height:0.6833em;\"></span><span><span>大版本号</span></span><span>.</span></span></span></span>{0进位}.${迭代版本号}.SNAPSHOP</p>\n<p>迭代版本可追踪，避免出现jar包覆盖无法追踪</p>\n<p>迭代版本升级,必须升级迭代版本号。避免出现jar包覆盖无法追踪</p>\n<h3 id=\"_1-大版本定义\"> 1. 大版本定义</h3>\n<p>APP1.0  APP2.0 APP3.0</p>\n<h3 id=\"_2-迭代版本号\"> 2. 迭代版本号</h3>\n<p>APP1.0.1  APP1.0版本的第一个迭代</p>\n<p>APP1.1.0  APP1.0版本的第十个迭代</p>\n<p>APP2.0.2  APP2.0版本的第二个迭代</p>\n<p>APP2.1.0  APP2.0版本的第十个迭代</p>\n<h2 id=\"七、代码格式化\"> 七、代码格式化</h2>\n<p>统一格式化模板,解决多人共同开发场景,代码格式化导致的git提交冲突问题</p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1598165820000.png",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "MySQL",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h2 id=\"mysql-事务\"> MySQL 事务</h2>\n<p>MySQL 事务主要用于处理操作量大，复杂度高的数据。比如说，在人员管理系统中，你删除一个人员，你既需要删除人员的基本资料，也要删除和该人员相关的信息，如信箱，文章等等，这样，这些数据库操作语句就构成一个事务！</p>\n<ul>\n<li>在 MySQL 中只有使用了 Innodb 数据库引擎的数据库或表才支持事务。</li>\n<li>事务处理可以用来维护数据库的完整性，保证成批的 SQL 语句要么全部执行，要么全部不执行。</li>\n<li>事务用来管理 insert,update,delete 语句</li>\n</ul>\n<p>一般来说，事务是必须满足4个条件（ACID）：：原子性（<strong>A</strong>tomicity，或称不可分割性）、一致性（<strong>C</strong>onsistency）、隔离性（<strong>I</strong>solation，又称独立性）、持久性（<strong>D</strong>urability）。</p>\n<ul>\n<li><strong>原子性</strong> 一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</li>\n<li><strong>一致性</strong>在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</li>\n<li><strong>隔离性</strong>数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</li>\n<li><strong>持久性</strong>事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</li>\n</ul>\n<blockquote>\n<p>在 MySQL 命令行的默认设置下，事务都是自动提交的，即执行 SQL 语句后就会马上执行 COMMIT 操作。因此要显式地开启一个事务务须使用命令 BEGIN 或 START TRANSACTION，或者执行命令 SET AUTOCOMMIT=0，用来禁止使用当前会话的自动提交。</p>\n</blockquote>\n<h3 id=\"事务控制语句\"> 事务控制语句</h3>\n<ul>\n<li>BEGIN 或 START TRANSACTION 显式地开启一个事务；</li>\n<li>COMMIT 也可以使用 COMMIT WORK，不过二者是等价的。COMMIT 会提交事务，并使已对数据库进行的所有修改成为永久性的；</li>\n<li>ROLLBACK 也可以使用 ROLLBACK WORK，不过二者是等价的。回滚会结束用户的事务，并撤销正在进行的所有未提交的修改；</li>\n<li>SAVEPOINT identifier，SAVEPOINT 允许在事务中创建一个保存点，一个事务中可以有多个 SAVEPOINT；</li>\n<li>RELEASE SAVEPOINT identifier 删除一个事务的保存点，当没有指定的保存点时，执行该语句会抛出一个异常；</li>\n<li>ROLLBACK TO identifier 把事务回滚到标记点；</li>\n<li>SET TRANSACTION 用来设置事务的隔离级别。InnoDB 存储引擎提供事务的隔离级别有READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ 和 SERIALIZABLE。</li>\n</ul>\n<h3 id=\"mysql-事务处理主要有两种方法\"> MYSQL 事务处理主要有两种方法</h3>\n<p>1、用 BEGIN, ROLLBACK, COMMIT来实现</p>\n<ul>\n<li><strong>BEGIN</strong> 开始一个事务</li>\n<li><strong>ROLLBACK</strong> 事务回滚</li>\n<li><strong>COMMIT</strong> 事务确认</li>\n</ul>\n<p>2、直接用 SET 来改变 MySQL 的自动提交模式:</p>\n<ul>\n<li><strong>SET AUTOCOMMIT=0</strong> 禁止自动提交</li>\n<li><strong>SET AUTOCOMMIT=1</strong> 开启自动提交</li>\n</ul>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "领域驱动模型的思考与认知",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/design/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%80%9D%E8%80%83%E4%B8%8E%E8%AE%A4%E7%9F%A5/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/design/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%80%9D%E8%80%83%E4%B8%8E%E8%AE%A4%E7%9F%A5/",
      "content_html": "<blockquote>\n<p>本项目是基于小编的开发经验与心得,分享小编关于领域模型的理解, 个人愚见仅供参考,希望能为渴望进步的你提供帮助。如果你感到有用对你有帮助,请不要吝啬你的关注,求关注,求转发。\n文章有三个议题，什么是领域模型,为什么需要领域模型设计,以及领域驱动的项目结构是什么样的?</p>\n</blockquote>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1594392162000.png\" alt=\"\" /></p>\n<h2 id=\"一、领域驱动模型是什么\"> 一、领域驱动模型是什么？</h2>\n<p>如果你是第一次听到这个词,嗯,多么恐怖的一件事情呀! 什么是领域模型,一种新的技术吗? 领域模型到底有什么用呢?\n为什么那么多大佬都在讲领域模型。网络上充斥着着各种高端的解释,各种高大上的名字,各种复杂的系统设计图。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1595078884000.png\" alt=\"\" /></p>\n<p>fuck !\n身边总是有这样一群人的出现。总喜欢中文里加载者英文,英文中夹杂着中文,仿佛这样能使他们更加自信一样。把你讲懵了,他就自信了。 very fuck !</p>\n<p>身为技术人,尽量想把一种事情给将清楚,说明白。而不是用各种抽象的晦涩难懂但看上去高大上的名词给解释。千万不要怕,下面我们通过先做一点小小的铺垫。最后在总结领域模型的理解。</p>\n<h3 id=\"_1-贫血模型\"> 1. 贫血模型</h3>\n<p>在讲清楚领域模型之前我们先来看引入一个词汇 <strong>“贫血模型”</strong> ，读到这里不要怕。只是一个词汇而已。是对我们平时的项目代码结构的一个形容词。相信无论面前的你\n是一个大牛，还是一个刚入行的小菜鸟。你都一定写过这样的代码:</p>\n<ul>\n<li>dao层: 负责持久化</li>\n<li>model层: 数据模型</li>\n<li>service层: 服务层</li>\n<li>web层: 提供对UI层的访问</li>\n</ul>\n<p>嗯。这就是一个典型的贫血模型, 哇,真的好形象,这是谁想出来的词汇,真想给他说一句 fuck you!  但是，但是，你还有更好的词汇来形容这种项目结构吗?\n所谓贫血模型是指使用的领域对象中只有 <code>setter</code> 和 <code>getter</code> 方法（POJO），所有的业务逻辑都不包含在领域对象中而是放在业务逻辑层。</p>\n<p>往往我们入行的初期我们都是在这样的项目结构中进行编程的,那个时候我们的业务往往都是简单的,对于那个时候的我们来说,这样的代码结构真是太好用了。清晰易懂。甚至想说一声 i love code !!!</p>\n<p>这个时期,我们的关注点往往不是业务的复杂度,而是技术的使用,语法的使用。以及代码是否能编译通过。所以下面我们来总结一下贫血模型的优点。</p>\n<h3 id=\"_2-贫血模型优点\"> 2. 贫血模型优点</h3>\n<ol>\n<li>被许多程序员所掌握，对于刚入行的同学来说，这种模型很自然很舒服，典型的MVC结构</li>\n<li>它非常简单，对于并不复杂的业务，它工作得很好，开发起来非常迅速。它似乎也不需要对领域的充分了解，只要给出要实现功能的每一个步骤，就能实现它。</li>\n<li>事务边界相当清楚，一般来说service的每个方法都可以看成一个事务。</li>\n</ol>\n<h3 id=\"_3-贫血模型缺点\"> 3. 贫血模型缺点</h3>\n<p>随着发际线推移,随着历史的变迁,随着候鸟的迁徙。不知不觉我们的业务越来越复杂了。万恶的资本家,总想让我们一夜之间开发一个淘宝,一夜之间开发一个百度,一夜之间开发一个QQ。于是我们的service层,不断的\n不断的增加。代码量从100行,200行,300行,10000行刹不住车了。终于小张忍不住了,辞职走了。留下了孤独的你独自承受这忧伤。\n<img src=\"https://img.springlearn.cn/blog/learn_1594392402000.png\" alt=\"\" /></p>\n<p>这样代码是什么意思？ 这样代码能不能删？这行代码怎么没有走？这样代码能不能拆出去? 这样改万一项目上线崩溃了怎么办? 想一想老婆,望一望孩子。哎,算了吧。于是乎service复杂度指数般的递增。这就是贫血模型的缺点。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1594392441000.png\" alt=\"\" /></p>\n<p><strong>缺点</strong></p>\n<ol>\n<li>所有的业务都在service中处理，当业越来越复杂时，service会变得越来越庞大，最终难以理解和维护，轻则项目组解散，重则妻离子散。</li>\n<li>将所有的业务放在无状态的service中实际上是一个过程化的设计,这与面向对象的编程风格,相向而行。(你转身离开分手说不出来,海鸟跟鱼相爱只是一场意外)</li>\n<li>项目代码写的不少,重用的不多。(fuck and fuck = double kill)</li>\n</ol>\n<h3 id=\"_4-充血模型\"> 4. 充血模型</h3>\n<p>前面说我说了贫血模型,这里顺便提一下充血模型,也不要怕,也只是一个吓人的词汇。前面我们理解了贫血模型，那么充血模型，很容易就能理解。\n前面我们说贫血模型实体类只有SET GET方法，逻辑基本在服务层实现。而**充血模型它的实体类里不但有状态，还有行为，即属性和方法都有。它的Service层很薄。**显然者不符合MVC的思想,因为充血模型中model中不仅有数据,还有状态。维护起来非常麻烦。</p>\n<h3 id=\"_5-领域驱动总结\"> 5. 领域驱动总结</h3>\n<p>针对贫血模型的service层非常复杂臃肿的缺点,领域模型的概念越来越流行起来,至少在一些很多的大公司中,非常盛行。领域模型的概念不仅可以重新去设计service,同时也在微服务设计中有重要的意义。\n所以说领域模型其实就是要解决service越来越臃肿的一种设计思想。主要就是对service中的复杂的业务逻辑进行拆分,根据领域来进行拆分。用面向对象的思想去重新设计service。\n有人给他起了一个高大上的词汇: 领域模型。</p>\n<p>所以最后小编想用一大白话来总结一下领域模型。</p>\n<p><strong>领域模型就是要用面向对象的思想去重新设计充斥着复杂业务逻辑的service层。</strong></p>\n<h2 id=\"二、为什么要进行领域模型设计\"> 二、为什么要进行领域模型设计?</h2>\n<p>相信看到这里的你,一定对领域模型有一个自己的认识。为什么要进行领域模型设计? 相信自己心里一定有一个自己的判断了。贫血模型的项目结构, service层无可避免的非常的臃肿，臃肿到一个方法可能深不见底。对于业务老油条，可能还凑合能看成，<br>\n假如你是一个新的同学,当你看到这样的代码一定是崩溃的，假如说注释也没有,那你内心更是崩溃的。假如说这是一个很庞大的系统,很复杂的业务流程,这就更不用说了。\n<img src=\"https://img.springlearn.cn/blog/learn_1594478376000.png\" alt=\"\" /></p>\n<p>如果读到这里,你还是对领域驱动设计感到迷茫，那么就其实这个标题也可以这样讲: <strong>我们如何对臃肿的service进行面向对象的设计。设计的过程就是对service层的代码进行领域设计。</strong><br>\n而我们之所以这样做的目的。</p>\n<ol>\n<li>为了快乐的coding</li>\n<li>为了业务系统的稳定</li>\n<li>为了业务更快的迭代升级。</li>\n</ol>\n<p>当然这一切的前提是你对业务有一个全局的认识,有一个前瞻性的判断,否则也设计不出来,真正适合自身系统的领域驱动模型。</p>\n<h2 id=\"三、领域驱动的项目结构是什么样的\"> 三、领域驱动的项目结构是什么样的?</h2>\n<p>**一千个人眼里有一千个哈姆雷特,没有最好的项目结构,只有最适合自己的业务系统。**本文只是小编对领域驱动的模块的思考和认识。\n仅供参考,希望对你有所启示和引导。</p>\n<h3 id=\"_1-领域划分-模块化建造\"> 1. 领域划分|模块化建造</h3>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1594574191000.png\" alt=\"\" /></p>\n<p>领域划分,小编感觉用另外一个词形容也非常的合适,就是业务模块化。所有能力都进行能力化抽象,形成模块,形成领域。 当遇到新的业务逻辑,底层的数据结构和数据关系肯定也是一样的。那么就可以像堆积木一样,根据这些模块快速的组装成新的业务逻辑。快速的实现业务的迭代和升级。\n关于这个问题,需要结合自己的业务系统来进行抽象和设计。而小编的能做的就是,提醒你<strong>模块化设计,领域化设计的重要意义。</strong></p>\n<h3 id=\"_2-项目结构\"> 2. 项目结构</h3>\n<p>基础层(外部调用,db操作) + 领域层(偏向领域的业务逻辑) + 业务层(对领域层的业务编排) + 外观层(可以提供能力,可以提供视图)。\n有一个完善的领域层,可以方便快速便捷的对业务进行扩展。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1595074590000.png\" alt=\"\" /></p>\n<p>领域层就是模块化设计的积木。丰富的模块化有助于业务扩展。</p>\n<p>一定要控制项目的依赖情况。service只能出现领域层的依赖, 领域层只能存在dao层和第三方服务层。各个层代码不能平行调用。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1595069641000.png\" alt=\"\" /></p>\n<h3 id=\"_3-编程规范\"> 3. 编程规范</h3>\n<p>关于项目提出6个注意的点。如果把做项目比作是前线打仗,那么打仗最重要的是战斗成员目标要一致。在目标不一致的情况下一定要进行\n充分讨论(项目负责人要做的),说明情况互相妥协指定出统一的项目编程规范。去进行执行。一旦指定不能违背。否则项目质量不保。</p>\n<p><strong>项目固然重要,但是作为软件开发工程师,首先要对代码质量做保障。</strong></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1595078292000.png\" alt=\"\" /></p>\n<h3 id=\"_4-日志设计\"> 4. 日志设计</h3>\n<p>天下没有完美的项目,任何系统不存在bug是不可能的。想要发现bug并快速定位问题,日志系统的不能缺少的。</p>\n<p>日志系统是非常重要的系统, 对系统的监控, 在设计日志系统中,我们需要关注的点</p>\n<ol>\n<li>日志结构(目的是按照结构解析到日志引擎中)\n如果想做日志的搜索平台,一定要进行日志结构化设计,方便被搜索平台的解析。如ELK日志搜索系统。</li>\n<li>日志打印降级能力\n在遇到大促时候,可以减少不必要的日志打印,要对日志打印做降级的设计</li>\n<li>异步输入日志</li>\n<li>日志归档</li>\n</ol>\n<div><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n    &lt;!-- 系统日志打印 --&gt;\n    &lt;appender name=&quot;logfile&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n        &lt;File&gt;${logger.logback.logpath}mbp-game-service.log&lt;/File&gt;\n        &lt;encoder&gt;\n            &lt;Pattern&gt;[%date] [%-5level] %c{40} %line --%mdc{client} [%X{TRACE_LOG_ID}] [%X{dstTraceId}] %msg%n&lt;/Pattern&gt;\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\n        &lt;/encoder&gt;\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\n            &lt;fileNamePattern&gt;${logger.logback.logpath}mbp-game-service.%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\n            &lt;maxHistory&gt;30&lt;/maxHistory&gt;\n            &lt;TimeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;\n                &lt;maxFileSize&gt;512MB&lt;/maxFileSize&gt;\n            &lt;/TimeBasedFileNamingAndTriggeringPolicy&gt;\n        &lt;/rollingPolicy&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- 异步输出 --&gt;\n    &lt;appender name=&quot;asyncAppender&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;\n        &lt;!-- 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 --&gt;\n        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;\n        &lt;!-- 更改默认的队列的深度,该值会影响性能.默认值为256 --&gt;\n        &lt;queueSize&gt;1024&lt;/queueSize&gt;\n        &lt;!-- 添加附加的appender,最多只能添加一个 --&gt;\n        &lt;appender-ref ref=&quot;logfile&quot;/&gt;\n    &lt;/appender&gt;\n\n\n    &lt;!-- 外部jar包 日志级别设置 --&gt;\n    &lt;logger level=&quot;${logger.outside.logLevel}&quot; name=&quot;com.ibatis&quot;/&gt;\n    &lt;logger level=&quot;${logger.outside.logLevel}&quot; name=&quot;org.springframework&quot;/&gt;\n    &lt;logger level=&quot;${logger.outside.logLevel}&quot; name=&quot;java.sql&quot;/&gt;\n    &lt;logger level=&quot;${logger.outside.logLevel}&quot; name=&quot;org.apache&quot;/&gt;\n    &lt;logger level=&quot;${logger.outside.logLevel}&quot; name=&quot;com.alibaba.dubbo&quot;/&gt;\n    &lt;logger level=&quot;${logger.outside.logLevel}&quot; name=&quot;org.I0Itec&quot;/&gt;\n    &lt;logger level=&quot;${logger.outside.logLevel}&quot; name=&quot;org.dozer&quot;/&gt;\n    &lt;logger level=&quot;${logger.outside.logLevel}&quot; name=&quot;kafka.producer.SyncProducer&quot;/&gt;\n    &lt;logger level=&quot;${logger.kafka.outside.logLevel}&quot; name=&quot;org.apache.kafka&quot;/&gt;\n    &lt;logger level=&quot;${logger.kafka.outside.logLevel}&quot; name=&quot;org.springframework.kafka&quot;/&gt;\n\n    &lt;!-- 输出到文件，可定义更多的 Appender --&gt;\n    &lt;root level=&quot;${logger.logLevel}&quot;&gt;\n        &lt;appender-ref ref=&quot;asyncAppender&quot;/&gt;\n    &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br></div></div><p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1594392162000.png",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "密码加密的文章",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/encrypt/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/encrypt/",
      "content_html": "<h1 id=\"密码加密的文章\"> 密码加密的文章</h1>\n<p>实际的文章内容。</p>\n<p>段落 1 文字段落 1 文字段落 1 文字段落 1 文字段落 1 文字段落 1 文字段落 1 文字段落 1 文字段落 1 文字段落 1 文字段落 1 文字段落 1 文字。</p>\n<p>段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字段落 2 文字。</p>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": [
        "使用指南"
      ]
    },
    {
      "title": "组件禁用",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/disable/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/disable/",
      "summary": "<p>你可以通过设置页面的 Frontmatter，在页面禁用一些功能。</p>\n",
      "content_html": "<p>你可以通过设置页面的 Frontmatter，在页面禁用一些功能。</p>\n\n<p>本页面应当禁用了:</p>\n<ul>\n<li>导航栏</li>\n<li>侧边栏</li>\n<li>路径导航</li>\n<li>页面信息</li>\n<li>贡献者</li>\n<li>编辑此页链接</li>\n<li>更新时间</li>\n<li>上一篇/下一篇 链接</li>\n<li>评论</li>\n<li>页脚</li>\n<li>返回顶部按钮</li>\n</ul>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": [
        "使用指南"
      ]
    },
    {
      "title": "explain调优",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/explain/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/databases/sql/explain/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<blockquote>\n<p>这篇文章主要讲 explain 如何使用，还有 explain 各种参数概念，之后会讲优化</p>\n</blockquote>\n<h1 id=\"一、explain-用法\"> 一、Explain 用法</h1>\n<p>explain模拟Mysql优化器是如何执行SQL查询语句的，从而知道Mysql是如何处理你的SQL语句的。分析你的查询语句或是表结构的性能瓶颈。</p>\n<p><strong>语法</strong>：<code>Explain + SQL 语句;</code></p>\n<p>如：<code>Explain select * from user;</code> 会生成如下 SQL 分析结果，下面详细对每个字段进行详解</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596351159000.png\" alt=\"\" /></p>\n<h2 id=\"_1-id\"> 1. id</h2>\n<p>是一组数字，代表多个表之间的查询顺序，或者包含子句查询语句中的顺序，id 总共分为三种情况，依次详解</p>\n<h3 id=\"id相同\"> id相同</h3>\n<p>id相同，执行顺序由上至下\n<img src=\"https://img.springlearn.cn/blog/learn_1596351240000.png\" alt=\"\" /></p>\n<h3 id=\"id不同\"> id不同</h3>\n<p>id 不同，如果是子查询，id 号会递增，id 值越大优先级越高，越先被执行</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596351303000.png\" alt=\"\" /></p>\n<h3 id=\"id相同和不同\"> id相同和不同</h3>\n<p>id 相同和不同的情况同时存在</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596351331000.png\" alt=\"\" /></p>\n<h2 id=\"_2-select-type\"> 2. select_type</h2>\n<p>select_type 包含以下几种值</p>\n<p><code>simple</code>、<code>primary</code>、<code>subquery</code>、<code>derived</code>、<code>union</code>、<code>union result</code></p>\n<h3 id=\"simple\"> simple</h3>\n<p>简单的 <code>select</code> 查询，查询中不包含子查询或者 <code>union</code> 查询</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596351522000.png\" alt=\"\" /></p>\n<h3 id=\"primary\"> primary</h3>\n<p>如果 SQL 语句中包含任何子查询，那么子查询的最外层会被标记为 <code>primary</code></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596351575000.png\" alt=\"\" /></p>\n<h3 id=\"subquery\"> subquery</h3>\n<p>在 <code>select</code> 或者 <code>where</code> 里包含了子查询，那么子查询就会被标记为 <code>subQquery</code>，同三.二同时出现</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596351651000.png\" alt=\"\" /></p>\n<h3 id=\"derived\"> derived</h3>\n<p>在 <code>from</code> 中包含的一个子查询，会被标记为衍生查询，会把查询结果放到一个临时表中</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596351720000.png\" alt=\"\" /></p>\n<h3 id=\"union-union-result\"> union / union result</h3>\n<p>如果有两个 <code>select</code> 查询语句，他们之间用 <code>union</code> 连起来查询，那么第二个 <code>select</code> 会被标记为 <code>union</code>，<code>union</code> 的结果被标记为 <code>union result</code>。它的 id 是为 null 的</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596351779000.png\" alt=\"\" /></p>\n<h2 id=\"_3-table\"> 3. table</h2>\n<p>表示这一行的数据是哪张表的数据</p>\n<h2 id=\"_4-type\"> 4. type</h2>\n<p>type 是代表 MySQL 使用了哪种索引类型，不同的索引类型的查询效率也是不一样的，type 大致有以下种类。\n越往上性能越高。</p>\n<table>\n<thead>\n<tr>\n<th>Type类型</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>system</td>\n<td>表中只有一行记录，system 是 const 的特例，几乎不会出现这种情况，可以忽略不计</td>\n</tr>\n<tr>\n<td>const</td>\n<td>必须是用主键索引或者唯一索引放到 where 条件中查询</td>\n</tr>\n<tr>\n<td>eq_ref</td>\n<td>多表查询中,索引查出来的数据都是唯一的（不能是多个,也不能是0个），常见于唯一索引和主键索引</td>\n</tr>\n<tr>\n<td>ref</td>\n<td>不是主键索引，也不是唯一索引，就是普通的索引，可能会返回多个符合条件的行。</td>\n</tr>\n<tr>\n<td>range</td>\n<td>体现在对某个索引进行区间范围检索，一般出现在 where 条件中的 between、and、&lt;、&gt;、in 等范围查找中。</td>\n</tr>\n<tr>\n<td>index</td>\n<td>将所有的索引树都遍历一遍，查找到符合条件的行。索引文件比数据文件还是要小很多，所以比不用索引全表扫描还是要快很多。</td>\n</tr>\n<tr>\n<td>all</td>\n<td>没用到索引，单纯的将表数据全部都遍历一遍，查找到符合条件的数据</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"_5-possible-keys\"> 5. possible_keys</h2>\n<p>此次查询中涉及字段上若存在索引，则会被列出来，表示可能会用到的索引，但并不是实际上一定会用到的索引</p>\n<h2 id=\"_6-key\"> 6. key</h2>\n<p>此次查询中实际上用到的索引</p>\n<h2 id=\"_7-key-len\"> 7. key_len</h2>\n<p>表示索引中使用的字节数，通过该属性可以知道在查询中使用的索引长度，注意：这个长度是最大可能长度，并非实际使用长度，在不损失精确性的情况下，长度越短查询效率越高</p>\n<h2 id=\"_8-ref\"> 8. ref</h2>\n<p>显示关联的字段。如果使用常数等值查询，则显示 const，如果是连接查询，则会显示关联的字段。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596352252000.png\" alt=\"\" /></p>\n<ul>\n<li>tb_emp 表为非唯一性索引扫描，实际使用的索引列为 idx_name，由于 tb_emp.name='rose'为一个常量，所以 ref=const。</li>\n<li>tb_dept 为唯一索引扫描，从 sql 语句可以看出，实际使用了 PRIMARY 主键索引，ref=db01.tb_emp.deptid 表示关联了 db01 数据库中 tb_emp 表的 deptid 字段。</li>\n</ul>\n<h2 id=\"_9-rows\"> 9. rows</h2>\n<p>根据表信息统计以及索引的使用情况，大致估算说要找到所需记录需要读取的行数，rows 越小越好</p>\n<h2 id=\"_10-extra\"> 10. extra</h2>\n<p>不适合在其他列显示出来，但在优化时十分重要的信息</p>\n<h3 id=\"using-filesort-重点优化\"> using  fileSort（重点优化）</h3>\n<p>俗称 &quot; 文件排序 &quot; ，在数据量大的时候几乎是“九死一生”，在 order by 或者在 group by 排序的过程中，order by 的字段不是索引字段，或者 select 查询字段存在不是索引字段，或者 select 查询字段都是索引字段，但是 order by 字段和 select 索引字段的顺序不一致，都会导致 fileSort</p>\n<p>如果where后面的查询和order by的索引，不是一个值。就会出现fileSort。</p>\n<p>复合索引,夸界,也会出现fileSort。</p>\n<p>优化建议: where 什么就order by 什么。 或者 where和order by 按照复合索引顺序，不要跨列或者无序使用\n<img src=\"https://img.springlearn.cn/blog/learn_1596352476000.png\" alt=\"\" /></p>\n<h3 id=\"using-temporary-重点优化\"> using temporary（重点优化）</h3>\n<p>使用了临时表保存中间结果，常见于 order by 和 group by 中。</p>\n<p>优化建议: 查询哪些列就用哪些列来order by。 能不用创建临时表就不要创建。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596352573000.png\" alt=\"\" /></p>\n<h3 id=\"using-index-重点\"> USING index（重点）</h3>\n<p>索引覆盖,就是当前sql查询不用读取原文件,只用读取索引。因为查询的列就是索引列</p>\n<p>表示相应的 select 操作中使用了覆盖索引（Coveing Index）,避免访问了表的数据行，效率不错！如果同时出现 using where，表明索引被用来执行索引键值的查找；如果没有同时出现 using where，表面索引用来读取数据而非执行查找动作。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596352650000.png\" alt=\"\" /></p>\n<h3 id=\"using-where\"> Using where</h3>\n<p>跟using index相反，要回表去查询。</p>\n<p>表明使用了 where 过滤</p>\n<h3 id=\"using-join-buffer\"> Using join buffer</h3>\n<p>使用了连接缓存</p>\n<h3 id=\"impossible-where\"> impossible where</h3>\n<p>where 子语句的值总是 false，不能用来获取任何数据。出现这个就要检查sql。</p>\n<p>eg: select a from test where a = 1 and a = 2。  a肯定不可能即1又是2</p>\n<h3 id=\"select-tables-optimized-away\"> select tables optimized away</h3>\n<p>在没有 GROUPBY 子句的情况下，基于索引优化 MIN/MAX 操作或者 对于 MyISAM 存储引擎优化 COUNT(*)操作，不必等到执行阶段再进行计算， 查询执行计划生成的阶段即完成优化。</p>\n<h3 id=\"distinct\"> distinct</h3>\n<p>优化 distinct，在找到第一匹配的元组后即停止找同样值的工作</p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "项目主页",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/home/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/home/",
      "content_html": "<p>这是普通主页的案例。你可以在这里放置你的主体内容。</p>\n<p>想要使用此布局，你需要在页面 front matter 中设置 <code>home: true</code>。</p>\n<p>配置项的相关说明详见 <a href=\"https://vuepress-theme-hope.github.io/zh/guide/layout/home/\" target=\"_blank\" rel=\"noopener noreferrer\">项目主页配置</a>。</p>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "页面配置",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/page/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/page/",
      "content_html": "<h2 id=\"页面信息\"> 页面信息</h2>\n<p>你可以在 Markdown 的 Frontmatter 中设置页面信息。</p>\n<ul>\n<li>\n<p>作者设置为 Ms.Hope。</p>\n</li>\n<li>\n<p>写作时间应为 2020 年 1 月 1 日</p>\n</li>\n<li>\n<p>分类为 “使用指南”</p>\n</li>\n<li>\n<p>标签为 “页面配置” 和 “使用指南”</p>\n</li>\n</ul>\n<h2 id=\"页面内容\"> 页面内容</h2>\n<p>你可以自由在这里书写你的 Markdown。</p>\n<div><p>提示</p>\n<ul>\n<li>\n<p>Markdown 文件夹的图片请使用相对链接 <code>./</code> 进行引用。</p>\n</li>\n<li>\n<p><code>.vuepress/public</code> 文件夹的图片，请使用绝对链接 <code>/</code> 进行引用</p>\n</li>\n</ul>\n</div>\n<p>主题包含了一个自定义徽章章可以使用:</p>\n<blockquote>\n<p>文字结尾应该有深蓝色的 徽章文字 徽章。 <i>Not supported content</i></p>\n</blockquote>\n<h2 id=\"页面结构\"> 页面结构</h2>\n<p>此页面应当包含：</p>\n<ul>\n<li>返回顶部按钮</li>\n<li>路径导航</li>\n<li>评论</li>\n<li>页脚</li>\n</ul>\n",
      "date_published": "2020-01-01T00:00:00.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "Ms.Hope"
        }
      ],
      "tags": [
        "使用指南"
      ]
    },
    {
      "title": "中文文档写作规范",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/design/%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%E5%86%99%E4%BD%9C%E8%A7%84%E8%8C%83/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/design/%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%E5%86%99%E4%BD%9C%E8%A7%84%E8%8C%83/",
      "content_html": "<div><p>中文技术文档的写作规范。</p>\n<p>本篇文章参考与阮一峰大佬的网络日志, 总结比较细致。非常具有借鉴意义, 欢迎大家进行学习。</p>\n<ul>\n<li>文章参考地址: <a href=\"https://github.com/ruanyf/document-style-guide\" target=\"_blank\" rel=\"noopener noreferrer\">阮一峰的网络日志</a></li>\n</ul>\n</div>\n<h1 id=\"目录\"> 目录</h1>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"一、标题\"> 一、标题</h2>\n<h3 id=\"层级\"> 层级</h3>\n<p>标题分为四级。</p>\n<ul>\n<li>一级标题：文章的标题</li>\n<li>二级标题：文章主要部分的大标题</li>\n<li>三级标题：二级标题下面一级的小标题</li>\n<li>四级标题：三级标题下面某一方面的小标题</li>\n</ul>\n<p>下面是示例。</p>\n<div><pre><code><span><span>#</span> 一级标题</span>\n\n<span><span>##</span> 二级标题</span>\n\n<span><span>###</span> 三级标题</span>\n\n<span><span>####</span> 四级标题</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h3 id=\"原则\"> 原则</h3>\n<p>（1）一级标题下，不能直接出现三级标题。</p>\n<p>示例：下面的文章结构，缺少二级标题。</p>\n<div><pre><code><span><span>#</span> 一级标题</span>\n\n<span><span>###</span> 三级标题</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（2）标题要避免孤立编号（即同级标题只有一个）。</p>\n<p>示例：下面的文章结构，<code>二级标题 A</code>只包含一个三级标题，完全可以省略<code>三级标题 A</code>。</p>\n<div><pre><code><span><span>##</span> 二级标题 A</span>\n\n<span><span>###</span> 三级标题 A</span>\n\n<span><span>##</span> 二级标题 B</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>（3）下级标题不重复上一级标题的名字。</p>\n<p>示例：下面的文章结构，二级标题与下属的三级标题同名，建议避免。</p>\n<div><pre><code><span><span>##</span> 概述</span>\n\n<span><span>###</span> 概述</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（4）谨慎使用四级标题，尽量避免出现，保持层级的简单，防止出现过于复杂的章节。</p>\n<p>如果三级标题下有并列性的内容，建议只使用项目列表（Item list）。</p>\n<p>示例：下面的结构二要好于结构一。后者适用的场景，主要是较长篇幅的内容。</p>\n<div><pre><code>结构一\n\n<span><span>###</span> 三级标题</span>\n\n<span><span>####</span> 四级标题 A</span>\n\n<span><span>####</span> 四级标题 B</span>\n\n<span><span>####</span> 四级标题 C</span>\n\n结构二\n\n<span><span>###</span> 三级标题</span>\n\n<span><span>**</span><span>（1）A</span><span>**</span></span>\n\n<span><span>**</span><span>（2）B</span><span>**</span></span>\n\n<span><span>**</span><span>（3）C</span><span>**</span></span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><h2 id=\"二、文本\"> 二、文本</h2>\n<h3 id=\"字间距\"> 字间距</h3>\n<p>（1）全角中文字符与半角英文字符之间，应有一个半角空格。</p>\n<div><pre><code>错误：本文介绍如何快速启动Windows系统。\n\n正确：本文介绍如何快速启动 Windows 系统。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（2）全角中文字符与半角阿拉伯数字之间，有没有半角空格都可，但必须保证风格统一，不能两种风格混杂。</p>\n<div><pre><code>正确：2011年5月15日，我订购了5台笔记本电脑与10台平板电脑。\n\n正确：2011 年 5 月 15 日，我订购了 5 台笔记本电脑与 10 台平板电脑。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>半角的百分号，视同阿拉伯数字。</p>\n<div><pre><code>正确：今年我国经济增长率是6.5%。\n\n正确：今年我国经济增长率是 6.5%。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（3）英文单位若不翻译，单位前的阿拉伯数字与单位间不留空格。</p>\n<div><pre><code>错误：一部容量为 16 GB 的智能手机\n\n正确：一部容量为 16GB 的智能手机\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（4）半角英文字符和半角阿拉伯数字，与全角标点符号之间不留空格。</p>\n<div><pre><code>错误：他的电脑是 MacBook Air 。\n\n正确：他的电脑是 MacBook Air。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"句子\"> 句子</h3>\n<p>（1）避免使用长句。</p>\n<p>不包含任何标点符号的单个句子，或者以逗号分隔的句子构件，长度尽量保持在 20 个字以内；20～29 个字的句子，可以接受；30～39 个字的句子，语义必须明确，才能接受；多于 40 个字的句子，任何情况下都不能接受。</p>\n<div><pre><code>错误：本产品适用于从由一台服务器进行动作控制的单一节点结构到由多台服务器进行动作控制的并行处理程序结构等多种体系结构。\n\n正确：本产品适用于多种体系结构。无论是由一台服务器（单一节点结构），还是由多台服务器（并行处理结构）进行动作控制，均可以使用本产品。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>逗号分割的长句，总长度不应该超过 100 字或者正文的 3 行。</p>\n<p>（2）尽量使用简单句和并列句，避免使用复合句。</p>\n<div><pre><code>并列句：他昨天生病了，没有参加会议。\n\n复合句：那个昨天生病的人没有参加会议。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（3）同样一个意思，尽量使用肯定句表达，不使用否定句表达。</p>\n<div><pre><code>错误：请确认没有接通装置的电源。\n\n正确：请确认装置的电源已关闭。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（4）避免使用双重否定句。</p>\n<div><pre><code>错误：没有删除权限的用户，不能删除此文件。\n\n正确：用户必须拥有删除权限，才能删除此文件。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"写作风格\"> 写作风格</h3>\n<p>（1）尽量不使用被动语态，改为使用主动语态。</p>\n<div><pre><code>错误：假如此软件尚未被安装，\n\n正确：假如尚未安装这个软件，\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（2）不使用非正式的语言风格。</p>\n<div><pre><code>错误：Lady Gaga 的演唱会真是酷毙了，从没看过这么给力的表演！！！\n\n正确：无法参加本次活动，我深感遗憾。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（3）不使用冷僻、生造或者文言文的词语，而要使用现代汉语的常用表达方式。</p>\n<div><pre><code>错误：这是唯二的快速启动的方法。\n\n正确：这是仅有的两种快速启动的方法。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（4）用对“的”、“地”、“得”。</p>\n<div><pre><code>她露出了开心的笑容。\n（形容词＋的＋名词）\n\n她开心地笑了。\n（副词＋地＋动词）\n\n她笑得很开心。\n（动词＋得＋副词）\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>（5）使用代词时（比如“其”、“该”、“此”、“这”等词），必须明确指代的内容，保证只有一个含义。</p>\n<div><pre><code>错误：从管理系统可以监视中继系统和受其直接控制的分配系统。\n\n正确：从管理系统可以监视两个系统：中继系统和受中继系统直接控制的分配系统。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（6）名词前不要使用过多的形容词。</p>\n<div><pre><code>错误：此设备的使用必须在接受过本公司举办的正式的设备培训的技师的指导下进行。\n\n正确：此设备必须在技师的指导下使用，且指导技师必须接受过由本公司举办的正式设备培训。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"英文处理\"> 英文处理</h3>\n<p>（1）英文原文如果使用了复数形式，翻译成中文时，应该将其还原为单数形式。</p>\n<div><pre><code>英文：⋯information stored in random access memory (RAMs)⋯\n\n中文：……存储在随机存取存储器（RAM）里的信息……\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（2）外文缩写可以使用半角圆点(<code>.</code>)表示缩写。</p>\n<div><pre><code>U.S.A.\nApple, Inc.\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><p>（3）表示中文时，英文省略号（<code>⋯</code>）应改为中文省略号（<code>……</code>）。</p>\n<div><pre><code>英文：5 minutes later⋯\n\n中文：5 分钟过去了……\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（4）英文书名或电影名改用中文表达时，双引号应改为书名号。</p>\n<div><pre><code>英文：He published an article entitled &quot;The Future of the Aviation&quot;.\n\n中文：他发表了一篇名为《航空业的未来》的文章。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（5）第一次出现英文词汇时，在括号中给出中文标注。此后再次出现时，直接使用英文缩写即可。</p>\n<div><pre><code>IOC（International Olympic Committee，国际奥林匹克委员会）。这样定义后，便可以直接使用“IOC”了。\n</code></pre>\n<div><span>1</span><br></div></div><p>（6）专有名词中每个词第一个字母均应大写，非专有名词则不需要大写。</p>\n<div><pre><code>“American Association of Physicists in Medicine”（美国医学物理学家协会）是专有名词，需要大写。\n\n“online transaction processing”（在线事务处理）不是专有名词，不应大写。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h2 id=\"三、段落\"> 三、段落</h2>\n<h3 id=\"原则-2\"> 原则</h3>\n<ul>\n<li>一个段落只能有一个主题，或一个中心句子。</li>\n<li>段落的中心句子放在段首，对全段内容进行概述。后面陈述的句子为核心句服务。</li>\n<li>一个段落的长度不能超过七行，最佳段落长度小于等于四行。</li>\n<li>段落的句子语气要使用陈述和肯定语气，避免使用感叹语气。</li>\n<li>段落之间使用一个空行隔开。</li>\n<li>段落开头不要留出空白字符。</li>\n</ul>\n<h3 id=\"引用\"> 引用</h3>\n<p>引用第三方内容时，应注明出处。</p>\n<div><pre><code>One man’s constant is another man’s variable. — Alan Perlis\n</code></pre>\n<div><span>1</span><br></div></div><p>如果是全篇转载，请在全文开头显著位置注明作者和出处，并链接至原文。</p>\n<div><pre><code>本文转载自 WikiQuote\n</code></pre>\n<div><span>1</span><br></div></div><p>使用外部图片时，必须在图片下方或文末标明来源。</p>\n<div><pre><code>本文部分图片来自 Wikipedia\n</code></pre>\n<div><span>1</span><br></div></div><h2 id=\"四、数值\"> 四、数值</h2>\n<h3 id=\"半角数字\"> 半角数字</h3>\n<p>阿拉伯数字一律使用半角形式，不得使用全角形式。</p>\n<div><pre><code>错误： 这件商品的价格是１０００元。\n\n正确： 这件商品的价格是 1000 元。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"千分号\"> 千分号</h3>\n<p>数值为千位以上，应添加千分号（半角逗号）。</p>\n<div><pre><code>XXX 公司的实收资本为 ￥1,258,000 人民币。\n</code></pre>\n<div><span>1</span><br></div></div><p>对于 4 位以下的数值，千分号是选用的，比如<code>1000</code>和<code>1,000</code>都可以接受。对于 4 位以上的数值，千分号是必须的。</p>\n<h3 id=\"货币\"> 货币</h3>\n<p>货币应为阿拉伯数字，并在数字前写出货币符号，或在数字后写出货币中文名称。</p>\n<div><pre><code>$1,000\n1,000 美元\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><p>英文的货币名称，建议参考国际标准 <a href=\"https://en.wikipedia.org/wiki/ISO_4217\" target=\"_blank\" rel=\"noopener noreferrer\">ISO 4217</a>。</p>\n<h3 id=\"数值范围\"> 数值范围</h3>\n<p>表示数值范围时，用<code>～</code>或<code>——</code>连接。参见《标点符号》一节的“连接号”部分。</p>\n<p>带有单位或百分号时，两个数字建议都要加上单位或百分号。</p>\n<div><pre><code>132kg～234kg\n\n67%～89%\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"变化程度的表示法\"> 变化程度的表示法</h3>\n<p>数字的增加要使用“增加了”、“增加到”。“了”表示增量，“到”表示定量。</p>\n<div><pre><code>增加到过去的两倍\n（过去为一，现在为二）\n\n增加了两倍\n（过去为一，现在为三）\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>数字的减少要使用“降低了”、“降低到”。“了”表示增量，“到”表示定量。</p>\n<div><pre><code>降低到百分之八十\n（定额是一百，现在是八十）\n\n降低了百分之八十\n（原来是一百，现在是二十）\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>不能用“降低 N 倍”或“减少 N 倍”的表示法，要用“降低百分之几”或“减少百分之几”。因为减少（或降低）一倍表示数值原来为一百，现在等于零。</p>\n<h2 id=\"五、标点符号\"> 五、标点符号</h2>\n<h3 id=\"原则-3\"> 原则</h3>\n<p>（1）中文语句的标点符号，均应该采取全角符号，这样可以与全角文字保持视觉的一致。</p>\n<p>（2）如果整句为英文，则该句使用英文/半角标点。</p>\n<p>（3）句号、问号、叹号、逗号、顿号、分号和冒号不得出现在一行之首。</p>\n<h3 id=\"句号\"> 句号</h3>\n<p>（1）中文语句的结尾处应该用全角句号（<code>。</code>）。</p>\n<p>（2）句子末尾用括号加注时，句号应在括号之外。</p>\n<div><pre><code>错误：关于文件的输出，请参照第 1.3 节（见第 26 页。）\n\n正确：关于文件的输出，请参照第 1.3 节（见第 26 页）。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"逗号\"> 逗号</h3>\n<p>（1）逗号（<code>，</code>）表示句子内部的一般性停顿。</p>\n<p>（2）注意避免“一逗到底”，即整个段落除了结尾，全部停顿都使用逗号。</p>\n<h3 id=\"顿号\"> 顿号</h3>\n<p>（1）句子内部的并列词，应该用全角顿号(<code>、</code>) 分隔，而不用逗号，即使并列词是英语也是如此。</p>\n<div><pre><code>错误：我最欣赏的科技公司有 Google, Facebook, 腾讯, 阿里和百度等。\n\n正确：我最欣赏的科技公司有 Google、Facebook、腾讯、阿里和百度等。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（2）英文句子中，并列词语之间使用半角逗号（<code>,</code>）分隔。</p>\n<div><pre><code>例句：Microsoft Office includes Word, Excel, PowerPoint, Outlook and other components.\n</code></pre>\n<div><span>1</span><br></div></div><h3 id=\"分号\"> 分号</h3>\n<p>（1）分号（<code>；</code>）表示复句内部并列分句之间的停顿。</p>\n<h3 id=\"引号\"> 引号</h3>\n<p>（1）引用时，应该使用全角双引号（<code>“ ”</code>），注意前后双引号不同。</p>\n<div><pre><code>例句：许多人都认为客户服务的核心是“友好”和“专业”。\n</code></pre>\n<div><span>1</span><br></div></div><p>（2）引号里面还要用引号时，外面一层用双引号，里面一层用单引号（<code>‘ ’</code>），注意前后单引号不同。</p>\n<div><pre><code>例句：鲍勃解释道：“我要放音乐，可萨利说，‘不行！’。”\n</code></pre>\n<div><span>1</span><br></div></div><h3 id=\"括号\"> 括号</h3>\n<p>（1）补充说明时，使用全角圆括号（<code>（）</code>），括号前后不加空格。</p>\n<div><pre><code>例句：请确认所有的连接（电缆和接插件）均安装牢固。\n</code></pre>\n<div><span>1</span><br></div></div><p>（2）几种括号的中英文名称。</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th style=\"text-align:center\">英文</th>\n<th style=\"text-align:right\">中文</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>{ }</code></td>\n<td style=\"text-align:center\">braces 或 curly brackets</td>\n<td style=\"text-align:right\">大括号</td>\n</tr>\n<tr>\n<td><code>[ ]</code></td>\n<td style=\"text-align:center\">square brackets 或 brackets</td>\n<td style=\"text-align:right\">方括号</td>\n</tr>\n<tr>\n<td><code>&lt; &gt;</code></td>\n<td style=\"text-align:center\">angled brackets</td>\n<td style=\"text-align:right\">尖括号</td>\n</tr>\n<tr>\n<td><code>( )</code></td>\n<td style=\"text-align:center\">parentheses</td>\n<td style=\"text-align:right\">圆括号</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"冒号\"> 冒号</h3>\n<p>（1）全角冒号（<code>：</code>）常用在需要解释的词语后边，引出解释和说明。</p>\n<div><pre><code>例句：请确认以下几项内容：时间、地点、活动名称，以及来宾数量。\n</code></pre>\n<div><span>1</span><br></div></div><p>（2）表示时间时，应使用半角冒号（<code>:</code>）。</p>\n<div><pre><code>例句：早上 8:00\n</code></pre>\n<div><span>1</span><br></div></div><h3 id=\"省略号\"> 省略号</h3>\n<p>（1）省略号（<code>……</code>）表示语句未完、或者语气的不连续。</p>\n<p>（2）省略号占两个汉字空间、包含六个省略点，不要使用<code>。。。</code>或<code>...</code>等非标准形式。</p>\n<p>（3）省略号不应与“等”这个词一起使用。</p>\n<div><pre><code>错误：我们为会餐准备了香蕉、苹果、梨…等各色水果。\n\n正确：我们为会餐准备了各色水果，有香蕉、苹果、梨……\n\n正确：我们为会餐准备了香蕉、苹果、梨等各色水果。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h3 id=\"感叹号\"> 感叹号</h3>\n<p>（1）应该使用平静的语气叙述，尽量避免使用感叹号（<code>！</code>）。</p>\n<p>（2）不得多个感叹号连用，比如<code>！！</code>和<code>!!!</code>。</p>\n<h3 id=\"破折号\"> 破折号</h3>\n<p>（1）破折号<code>————</code>一般用于进一步解释。</p>\n<p>（2）破折号应占两个汉字的位置。如果破折号本身只占一个汉字的位置，那么前后应该留出一个半角空格。</p>\n<div><pre><code>例句：直觉————尽管它并不总是可靠的————告诉我，这事可能出了些问题。\n\n例句：直觉 —— 尽管它并不总是可靠的 —— 告诉我，这事可能出了些问题。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"连接号\"> 连接号</h3>\n<p>（1）连接号用于连接两个类似的词。</p>\n<p>（2）以下场合应该使用直线连接号（<code>-</code>），占一个半角字符的位置。</p>\n<ul>\n<li>两个名词的复合</li>\n<li>图表编号</li>\n</ul>\n<div><pre><code>例句：氧化-还原反应\n\n例句：图 1-1\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>（3）数值范围（例如日期、时间或数字）应该使用波浪连接号（<code>～</code>），占一个全角字符的位置。</p>\n<div><pre><code>例句：2009 年～2011 年\n</code></pre>\n<div><span>1</span><br></div></div><p>注意，波浪连接号前后两个值都应该加上单位。</p>\n<p>（4）波浪连接号也可以用汉字“至”代替。</p>\n<div><pre><code>例句：周围温度：-20°C 至 -10°C\n</code></pre>\n<div><span>1</span><br></div></div><h2 id=\"六、文档体系\"> 六、文档体系</h2>\n<h3 id=\"结构\"> 结构</h3>\n<p>软件手册是一部完整的书，建议采用下面的结构。</p>\n<ul>\n<li><strong>简介</strong>（Introduction）： [必备] [文件] 提供对产品和文档本身的总体的、扼要的说明</li>\n<li><strong>快速上手</strong>（Getting Started）：[可选] [文件] 如何最快速地使用产品</li>\n<li><strong>入门篇</strong>（Basics）： [必备] [目录] 又称”使用篇“，提供初级的使用教程\n<ul>\n<li><strong>环境准备</strong>（Prerequisite）：[必备] [文件] 软件使用需要满足的前置条件</li>\n<li><strong>安装</strong>（Installation）：[可选] [文件] 软件的安装方法</li>\n<li><strong>设置</strong>（Configuration）：[必备] [文件] 软件的设置</li>\n</ul>\n</li>\n<li><strong>进阶篇</strong>（Advanced)：[可选] [目录] 又称”开发篇“，提供中高级的开发教程</li>\n<li><strong>API</strong>（Reference）：[可选] [目录|文件] 软件 API 的逐一介绍</li>\n<li><strong>FAQ</strong>：[可选] [文件] 常见问题解答</li>\n<li><strong>附录</strong>（Appendix）：[可选] [目录] 不属于教程本身、但对阅读教程有帮助的内容\n<ul>\n<li><strong>Glossary</strong>：[可选] [文件] 名词解释</li>\n<li><strong>Recipes</strong>：[可选] [文件] 最佳实践</li>\n<li><strong>Troubleshooting</strong>：[可选] [文件] 故障处理</li>\n<li><strong>ChangeLog</strong>：[可选] [文件] 版本说明</li>\n<li><strong>Feedback</strong>：[可选] [文件] 反馈方式</li>\n</ul>\n</li>\n</ul>\n<p>下面是两个真实范例，可参考。</p>\n<ul>\n<li><a href=\"http://redux.js.org/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">Redux 手册</a></li>\n<li><a href=\"http://flight-manual.atom.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Atom 手册</a></li>\n</ul>\n<h3 id=\"文件名\"> 文件名</h3>\n<p>文档的文件名不得含有空格。</p>\n<p>文件名必须使用半角字符，不得使用全角字符。这也意味着，中文不能用于文件名。</p>\n<div><pre><code>错误： 名词解释.md\n\n正确： glossary.md\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>文件名建议只使用小写字母，不使用大写字母。</p>\n<div><pre><code>错误：TroubleShooting.md\n\n正确：troubleshooting.md \n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>为了醒目，某些说明文件的文件名，可以使用大写字母，比如<code>README</code>、<code>LICENSE</code>。</p>\n<p>文件名包含多个单词时，单词之间建议使用半角的连词线（<code>-</code>）分隔。</p>\n<div><pre><code>不佳：advanced_usage.md\n\n正确：advanced-usage.md\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h2 id=\"七、参考链接\"> 七、参考链接</h2>\n<ul>\n<li><a href=\"http://wenku.baidu.com/view/23cc1a6527d3240c8447efbf.html\" target=\"_blank\" rel=\"noopener noreferrer\">产品手册中文写作规范</a>, by 华为</li>\n<li><a href=\"http://guide.daocloud.io/dcs/%E5%86%99%E4%BD%9C%E8%A7%84%E8%8C%83%E5%92%8C%E6%A0%BC%E5%BC%8F%E8%A7%84%E8%8C%83-9153803.html\" target=\"_blank\" rel=\"noopener noreferrer\">写作规范和格式规范</a>, by DaoCloud</li>\n<li><a href=\"http://www.hitachi-tc.co.jp/company/thesis/thesis.pdf\" target=\"_blank\" rel=\"noopener noreferrer\">技术写作技巧在日汉翻译中的应用</a>, by 刘方</li>\n<li><a href=\"https://www.lengoo.de/documents/styleguides/lengoo_styleguide_ZH.pdf\" target=\"_blank\" rel=\"noopener noreferrer\">简体中文规范指南</a>, by lengoo</li>\n<li><a href=\"https://open.leancloud.cn/copywriting-style-guide.html\" target=\"_blank\" rel=\"noopener noreferrer\">文档风格指南</a>, by LeanCloud</li>\n<li><a href=\"https://docs.google.com/document/d/1R8lMCPf6zCD5KEA8ekZ5knK77iw9J-vJ6vEopPemqZM/edit\" target=\"_blank\" rel=\"noopener noreferrer\">豌豆荚文案风格指南</a>, by 豌豆荚</li>\n<li><a href=\"https://github.com/sparanoid/chinese-copywriting-guidelines\" target=\"_blank\" rel=\"noopener noreferrer\">中文文案排版指北</a>, by sparanoid</li>\n<li><a href=\"http://w3c.github.io/clreq/\" target=\"_blank\" rel=\"noopener noreferrer\">中文排版需求</a>, by W3C</li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2017/02/filename-should-be-lowercase.html\" target=\"_blank\" rel=\"noopener noreferrer\">为什么文件名要小写？</a>, by 阮一峰</li>\n<li><a href=\"https://developers.google.com/style/\" target=\"_blank\" rel=\"noopener noreferrer\">Google Developer Documentation Style Guide</a>, by Google</li>\n<li><a href=\"http://www.moe.gov.cn/ewebeditor/uploadfile/2015/01/13/20150113091154536.pdf\" target=\"_blank\" rel=\"noopener noreferrer\">出版物上数字用法的规定（国家标准GBT15835－2011）</a></li>\n<li><a href=\"https://baike.baidu.com/item/%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E5%9B%BD%E5%AE%B6%E6%A0%87%E5%87%86%E5%87%BA%E7%89%88%E7%89%A9%E6%95%B0%E5%AD%97%E7%94%A8%E6%B3%95\" target=\"_blank\" rel=\"noopener noreferrer\">中华人民共和国国家标准出版物数字用法</a></li>\n</ul>\n",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "主要功能与配置演示",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/",
      "content_html": "<h1 id=\"主要功能与配置演示\"> 主要功能与配置演示</h1>\n<ul>\n<li>\n<p><a href=\"./page.html\">页面展示</a></p>\n</li>\n<li>\n<p><a href=\"./markdown.html\">Markdown 展示</a></p>\n</li>\n<li>\n<p><a href=\"./disable.html\">禁用展示</a></p>\n</li>\n<li>\n<p><a href=\"./encrypt.html\">加密展示</a></p>\n</li>\n</ul>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": [
        "使用指南"
      ]
    },
    {
      "title": "Markdown 增强",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/markdown/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/markdown/",
      "summary": "<p><code>vuepress-theme-hope</code> 通过内置 <a href=\"https://vuepress-theme-hope.github.io/md-enhance\" target=\"_blank\" rel=\"noopener noreferrer\">md-enhance</a>，在 Markdown 中启用了更多的语法与新功能。</p>\n",
      "content_html": "<p><code>vuepress-theme-hope</code> 通过内置 <a href=\"https://vuepress-theme-hope.github.io/md-enhance\" target=\"_blank\" rel=\"noopener noreferrer\">md-enhance</a>，在 Markdown 中启用了更多的语法与新功能。</p>\n\n<h2 id=\"一键启用\"> 一键启用</h2>\n<p>你可以设置 <code>themeconfig.mdEnhance.enableAll</code> 启用 <a href=\"https://vuepress-theme-hope.github.io/md-enhance\" target=\"_blank\" rel=\"noopener noreferrer\">md-enhance</a> 插件的所有功能。</p>\n<div><div><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br></div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>\n  themeConfig<span>:</span> <span>{</span>\n    mdEnhance<span>:</span> <span>{</span>\n      enableAll<span>:</span> <span>true</span><span>,</span>\n    <span>}</span><span>,</span>\n  <span>}</span><span>,</span>\n<span>}</span><span>;</span>\n</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id=\"新增的更多语法\"> 新增的更多语法</h2>\n<h3 id=\"上下角标\"> 上下角标</h3>\n<p>19<sup>th</sup> H<sub>2</sub>O</p>\n<details><summary>代码</summary>\n<div><pre><code>19^th^ H<span><span>~</span><span>2</span><span>~</span></span>O\n</code></pre>\n<div><span>1</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/sup-sub/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h3 id=\"自定义对齐\"> 自定义对齐</h3>\n<div>\n<p>我是居中的</p>\n</div>\n<div>\n<p>我在右对齐</p>\n</div>\n<details><summary>代码</summary>\n<div><pre><code>::: center\n\n我是居中的\n\n:::\n\n::: right\n\n我在右对齐\n\n:::\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/align/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h3 id=\"脚注\"> 脚注</h3>\n<p>此文字有脚注<sup></sup>.</p>\n<details><summary>代码</summary>\n<div><pre><code>此文字有脚注[^first].\n\n<span><span>[</span><span>^first</span><span>]</span><span>:</span> 这是脚注内容</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/footnote/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h3 id=\"标记\"> 标记</h3>\n<p>你可以标记 <mark>重要的内容</mark> 。</p>\n<details><summary>代码</summary>\n<div><pre><code>你可以标记 ==重要的内容== 。\n</code></pre>\n<div><span>1</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/mark/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h3 id=\"任务列表\"> 任务列表</h3>\n<ul>\n<li><input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" id=\"task-item-0\"><label for=\"task-item-0\"> 计划 1</label></li>\n<li><input type=\"checkbox\"  disabled=\"disabled\" id=\"task-item-1\"><label for=\"task-item-1\"> 计划 2</label></li>\n</ul>\n<details><summary>Code</summary>\n<div><pre><code><span>-</span> [x] 计划 1\n<span>-</span> [ ] 计划 2\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/guide/markdown/tasklist/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h3 id=\"流程图\"> 流程图</h3>\n<i>Not supported content</i><details><summary>代码</summary>\n<div><pre><code><span><span>```</span><span>flow</span>\n<span>cond=>condition: Process?\nprocess=>operation: Process\ne=>end: End\n\ncond(yes)->process->e\ncond(no)->e</span>\n<span>```</span></span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/flowchart/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h2 id=\"mermaid\"> Mermaid</h2>\n<Mermaid id=\"mermaid-64a57060\" data-code=\"graph%20TD%3B%0A%20%20%20%20A--%3EB%3B%0A%20%20%20%20A--%3EC%3B%0A%20%20%20%20B--%3ED%3B%0A%20%20%20%20C--%3ED%3B%0A\"></Mermaid><details><summary>代码</summary>\n<div><pre><code><span><span>```</span><span>mermaid</span>\n<span>graph TD;\n    A-->B;\n    A-->C;\n    B-->D;\n    C-->D;</span>\n<span>```</span></span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/mermaid/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h3 id=\"tex-语法\"> Tex 语法</h3>\n<p class='katex-block'><span><span><span><i>Not supported content</i></span><span aria-hidden=\"true\"><span><span style=\"height:2.4em;vertical-align:-0.95em;\"></span><span><span></span><span><span><span><span style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span style=\"height:3em;\"></span><span><span style=\"margin-right:0.05556em;\">∂</span><span><span style=\"margin-right:0.03588em;\">ω</span><span><span><span><span style=\"height:0.5904em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span style=\"height:2.7em;\"></span><span><span style=\"margin-right:0.02778em;\">r</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span style=\"height:3em;\"></span><span style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span style=\"height:3em;\"></span><span><span><span style=\"margin-right:0.05556em;\">∂</span><span><span><span><span style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span style=\"height:2.7em;\"></span><span><span style=\"margin-right:0.02778em;\">r</span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span style=\"height:0.686em;\"><span></span></span></span></span></span><span></span></span><span style=\"margin-right:0.1667em;\"></span><span><span style=\"top:0em;\"><span>(</span></span><span><span></span><span><span><span><span style=\"height:1.3414em;\"><span style=\"top:-2.314em;\"><span style=\"height:3em;\"></span><span><span style=\"margin-right:0.03588em;\">ω</span></span></span><span style=\"top:-3.23em;\"><span style=\"height:3em;\"></span><span style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span style=\"height:3em;\"></span><span><span><span style=\"margin-right:0.03588em;\">y</span><span><span><span><span style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span style=\"height:2.7em;\"></span><span><span><span style=\"margin-right:0.03588em;\">ω</span></span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span style=\"height:0.686em;\"><span></span></span></span></span></span><span></span></span><span style=\"top:0em;\"><span>)</span></span></span><span style=\"margin-right:0.2778em;\"></span><span>=</span><span style=\"margin-right:0.2778em;\"></span></span><span><span style=\"height:3.0277em;vertical-align:-1.2777em;\"></span><span><span style=\"top:0em;\"><span>(</span></span><span><span></span><span><span><span><span style=\"height:1.3414em;\"><span style=\"top:-2.314em;\"><span style=\"height:3em;\"></span><span><span style=\"margin-right:0.03588em;\">ω</span></span></span><span style=\"top:-3.23em;\"><span style=\"height:3em;\"></span><span style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span style=\"height:3em;\"></span><span><span><span style=\"margin-right:0.03588em;\">y</span><span><span><span><span style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span style=\"height:2.7em;\"></span><span><span><span style=\"margin-right:0.03588em;\">ω</span></span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span style=\"height:0.686em;\"><span></span></span></span></span></span><span></span></span><span style=\"top:0em;\"><span>)</span></span></span><span style=\"margin-right:0.1667em;\"></span><span><span style=\"top:0em;\"><span>{</span></span><span>(</span><span>lo<span style=\"margin-right:0.01389em;\">g</span></span><span style=\"margin-right:0.1667em;\"></span><span style=\"margin-right:0.03588em;\">y</span><span><span>)</span><span><span><span><span style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span style=\"height:2.7em;\"></span><span><span style=\"margin-right:0.02778em;\">r</span></span></span></span></span></span></span></span><span style=\"margin-right:0.2222em;\"></span><span>+</span><span style=\"margin-right:0.2222em;\"></span><span><span><span><span style=\"height:1.6514em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span style=\"height:3.05em;\"></span><span><span><span>i</span><span>=</span><span>1</span></span></span></span><span style=\"top:-3.05em;\"><span style=\"height:3.05em;\"></span><span><span>∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span style=\"height:3.05em;\"></span><span><span style=\"margin-right:0.02778em;\">r</span></span></span></span><span>​</span></span><span><span style=\"height:1.2777em;\"><span></span></span></span></span></span><span style=\"margin-right:0.1667em;\"></span><span><span></span><span><span><span><span style=\"height:1.5017em;\"><span style=\"top:-2.314em;\"><span style=\"height:3em;\"></span><span><span><span style=\"margin-right:0.03588em;\">ω</span><span><span><span><span style=\"height:0.7507em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span style=\"height:2.7em;\"></span><span><span>i</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span style=\"height:3em;\"></span><span style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span style=\"height:3em;\"></span><span><span>(</span><span>−</span><span>1</span><span><span>)</span><span><span><span><span style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span style=\"height:2.7em;\"></span><span><span>i</span></span></span></span></span></span></span></span><span style=\"margin-right:0.02778em;\">r</span><span style=\"margin-right:0.1667em;\"></span><span>⋯</span><span style=\"margin-right:0.1667em;\"></span><span>(</span><span style=\"margin-right:0.02778em;\">r</span><span style=\"margin-right:0.2222em;\"></span><span>−</span><span style=\"margin-right:0.2222em;\"></span><span>i</span><span style=\"margin-right:0.2222em;\"></span><span>+</span><span style=\"margin-right:0.2222em;\"></span><span>1</span><span>)</span><span>(</span><span>lo<span style=\"margin-right:0.01389em;\">g</span></span><span style=\"margin-right:0.1667em;\"></span><span style=\"margin-right:0.03588em;\">y</span><span><span>)</span><span><span><span><span style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span style=\"height:2.7em;\"></span><span><span><span style=\"margin-right:0.02778em;\">r</span><span>−</span><span>i</span></span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span style=\"height:0.686em;\"><span></span></span></span></span></span><span></span></span><span style=\"top:0em;\"><span>}</span></span></span></span></span></span></span></p>\n<details><summary>代码</summary>\n<div><pre><code>$$\n\\frac {\\partial^r} {\\partial \\omega^r} \\left(\\frac {y^{\\omega}} {\\omega}\\right)\n= \\left(\\frac {y^{\\omega}} {\\omega}\\right) \\left\\{(\\log y)^r + \\sum_{i=1}^r \\frac {(-1)^i r \\cdots (r-i+1) (\\log y)^{r-i}} {\\omega^i} \\right\\}\n$$\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/tex/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h3 id=\"代码案例\"> 代码案例</h3>\n\n          <div\n            id=\"code-demo-5ac6bc9f\"\n           \n  \n data-title=\"%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%20Demo\"\n\n            data-code=\"%7B%22html%22%3A%22%3Ch1%3EMr.Hope%3C%2Fh1%3E%5Cn%3Cp%3E%3Cspan%20id%3D%5C%22very%5C%22%3E%E5%8D%81%E5%88%86%3C%2Fspan%3E%20%E5%B8%85%3C%2Fp%3E%5Cn%22%2C%22js%22%3A%22document.querySelector(%5C%22%23very%5C%22).addEventListener(%5C%22click%5C%22%2C%20()%20%3D%3E%20%7B%5Cn%20%20alert(%5C%22%E5%8D%81%E5%88%86%E5%B8%85%5C%22)%3B%5Cn%7D)%3B%5Cn%22%2C%22css%22%3A%22span%20%7B%5Cn%20%20color%3A%20red%3B%5Cn%7D%5Cn%22%7D\"\n          >\n              \n              <div>\n                <div>\n<div><pre><code><span><span><span>&lt;</span>h1</span><span>></span></span>Mr.Hope<span><span><span>&lt;/</span>h1</span><span>></span></span>\n<span><span><span>&lt;</span>p</span><span>></span></span><span><span><span>&lt;</span>span</span> <span>id</span><span><span>=</span><span>\"</span>very<span>\"</span></span><span>></span></span>十分<span><span><span>&lt;/</span>span</span><span>></span></span> 帅<span><span><span>&lt;/</span>p</span><span>></span></span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><div><pre><code>document<span>.</span><span>querySelector</span><span>(</span><span>\"#very\"</span><span>)</span><span>.</span><span>addEventListener</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>\n  <span>alert</span><span>(</span><span>\"十分帅\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><div><pre><code><span>span</span> <span>{</span>\n  <span>color</span><span>:</span> red<span>;</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div>\n            </div>\n          </div>\n          \n        </div>\n<details><summary>代码</summary>\n<div><pre><code>::: demo 一个普通 Demo\n\n<span><span>```</span><span>html</span>\n<span><span><span><span>&lt;</span>h1</span><span>></span></span>Mr.Hope<span><span><span>&lt;/</span>h1</span><span>></span></span>\n<span><span><span>&lt;</span>p</span><span>></span></span><span><span><span>&lt;</span>span</span> <span>id</span><span><span>=</span><span>\"</span>very<span>\"</span></span><span>></span></span>十分<span><span><span>&lt;/</span>span</span><span>></span></span> 帅<span><span><span>&lt;/</span>p</span><span>></span></span></span>\n<span>```</span></span>\n\n<span><span>```</span><span>js</span>\n<span>document<span>.</span><span>querySelector</span><span>(</span><span>\"#very\"</span><span>)</span><span>.</span><span>addEventListener</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>\n  <span>alert</span><span>(</span><span>\"十分帅\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></span>\n<span>```</span></span>\n\n<span><span>```</span><span>css</span>\n<span><span>span</span> <span>{</span>\n  <span>color</span><span>:</span> red<span>;</span>\n<span>}</span></span>\n<span>```</span></span>\n\n:::\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div></details>\n\n          <div\n            id=\"code-demo-693e1878\"\n           \n  data-type=\"react\"\n data-title=\"%E4%B8%80%E4%B8%AA%20React%20Demo\"\n\n            data-code=\"%7B%22js%22%3A%22export%20default%20class%20App%20extends%20React.Component%20%7B%5Cn%20%20constructor(props)%20%7B%5Cn%20%20%20%20super(props)%3B%5Cn%20%20%20%20this.state%20%3D%20%7B%20message%3A%20%5C%22%E5%8D%81%E5%88%86%E5%B8%85%5C%22%20%7D%3B%5Cn%20%20%7D%5Cn%20%20render()%20%7B%5Cn%20%20%20%20return%20(%5Cn%20%20%20%20%20%20%3Cdiv%20className%3D%5C%22box-react%5C%22%3E%5Cn%20%20%20%20%20%20%20%20Mr.Hope%20%3Cspan%3E%7Bthis.state.message%7D%3C%2Fspan%3E%5Cn%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20)%3B%5Cn%20%20%7D%5Cn%7D%5Cn%22%2C%22css%22%3A%22.box-react%20span%20%7B%5Cn%20%20color%3A%20red%3B%5Cn%7D%5Cn%22%7D\"\n          >\n              \n              <div>\n                <div>\n<div><pre><code><span>export</span> <span>default</span> <span>class</span> <span>App</span> <span>extends</span> <span>React<span>.</span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span>props<span>)</span><span>;</span>\n    <span>this</span><span>.</span>state <span>=</span> <span>{</span> message<span>:</span> <span>\"十分帅\"</span> <span>}</span><span>;</span>\n  <span>}</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span>div className<span>=</span><span>\"box-react\"</span><span>></span>\n        Mr<span>.</span>Hope <span>&lt;</span>span<span>></span><span>{</span><span>this</span><span>.</span>state<span>.</span>message<span>}</span><span>&lt;</span><span>/</span>span<span>></span>\n      <span>&lt;</span><span>/</span>div<span>></span>\n    <span>)</span><span>;</span>\n  <span>}</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><div><pre><code><span>.box-react span</span> <span>{</span>\n  <span>color</span><span>:</span> red<span>;</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div>\n            </div>\n          </div>\n          \n        </div>\n<details><summary>代码</summary>\n<div><pre><code>::: demo [react] 一个 React Demo\n\n<span><span>```</span><span>js</span>\n<span><span>export</span> <span>default</span> <span>class</span> <span>App</span> <span>extends</span> <span>React<span>.</span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span>props<span>)</span><span>;</span>\n    <span>this</span><span>.</span>state <span>=</span> <span>{</span> message<span>:</span> <span>\"十分帅\"</span> <span>}</span><span>;</span>\n  <span>}</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span>div className<span>=</span><span>\"box-react\"</span><span>></span>\n        Mr<span>.</span>Hope <span>&lt;</span>span<span>></span><span>{</span><span>this</span><span>.</span>state<span>.</span>message<span>}</span><span>&lt;</span><span>/</span>span<span>></span>\n      <span>&lt;</span><span>/</span>div<span>></span>\n    <span>)</span><span>;</span>\n  <span>}</span>\n<span>}</span></span>\n<span>```</span></span>\n\n<span><span>```</span><span>css</span>\n<span><span>.box-react span</span> <span>{</span>\n  <span>color</span><span>:</span> red<span>;</span>\n<span>}</span></span>\n<span>```</span></span>\n\n:::\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div></details>\n\n          <div\n            id=\"code-demo-2c0b9cdb\"\n           \n  data-type=\"vue\"\n data-title=\"%E4%B8%80%E4%B8%AA%20Vue%20Demo\"\n\n            data-code=\"%7B%22vue%22%3A%22%3Ctemplate%3E%5Cn%20%20%3Cdiv%20class%3D%5C%22box%5C%22%3E%5Cn%20%20%20%20Mr.Hope%20%3Cspan%3E%7B%7B%20message%20%7D%7D%3C%2Fspan%3E%5Cn%20%20%3C%2Fdiv%3E%5Cn%3C%2Ftemplate%3E%5Cn%3Cscript%3E%5Cnexport%20default%20%7B%5Cn%20%20data%3A%20()%20%3D%3E%20(%7B%20message%3A%20%5C%22%E5%8D%81%E5%88%86%E5%B8%85%5C%22%20%7D)%2C%5Cn%7D%3B%5Cn%3C%2Fscript%3E%5Cn%3Cstyle%3E%5Cn.box%20span%20%7B%5Cn%20%20color%3A%20red%3B%5Cn%7D%5Cn%3C%2Fstyle%3E%5Cn%22%7D\"\n          >\n              \n              <div>\n                <div>\n<div><pre><code><span><span><span>&lt;</span>template</span><span>></span></span>\n  <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>\"</span>box<span>\"</span></span><span>></span></span>\n    Mr.Hope <span><span><span>&lt;</span>span</span><span>></span></span>{{ message }}<span><span><span>&lt;/</span>span</span><span>></span></span>\n  <span><span><span>&lt;/</span>div</span><span>></span></span>\n<span><span><span>&lt;/</span>template</span><span>></span></span>\n<span><span><span>&lt;</span>script</span><span>></span></span><span><span>\n<span>export</span> <span>default</span> <span>{</span>\n  <span>data</span><span>:</span> <span>(</span><span>)</span> <span>=></span> <span>(</span><span>{</span> message<span>:</span> <span>\"十分帅\"</span> <span>}</span><span>)</span><span>,</span>\n<span>}</span><span>;</span>\n</span></span><span><span><span>&lt;/</span>script</span><span>></span></span>\n<span><span><span>&lt;</span>style</span><span>></span></span><span><span>\n<span>.box span</span> <span>{</span>\n  <span>color</span><span>:</span> red<span>;</span>\n<span>}</span>\n</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div>\n            </div>\n          </div>\n          \n        </div>\n<details><summary>代码</summary>\n<div><pre><code>::: demo [vue] 一个 Vue Demo\n\n<span><span>```</span><span>vue</span>\n<span>&lt;template>\n  &lt;div>\n    Mr.Hope &lt;span>{{ message }}&lt;/span>\n  &lt;/div>\n&lt;/template>\n&lt;script>\nexport default {\n  data: () => ({ message: \"十分帅\" }),\n};\n&lt;/script>\n&lt;style>\n.box span {\n  color: red;\n}\n&lt;/style></span>\n<span>```</span></span>\n\n:::\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div></details>\n\n          <div\n            id=\"code-demo-2869b0e2\"\n           \n  \n data-title=\"%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%20Demo\"\n\n            data-code=\"%7B%22md%22%3A%22%23%20%E6%A0%87%E9%A2%98%5Cn%5Cn%E5%8D%81%E5%88%86%E5%B8%85%5Cn%22%2C%22ts%22%3A%22const%20message%3A%20string%20%3D%20%5C%22Mr.Hope%5C%22%3B%5Cn%5Cndocument.querySelector(%5C%22h1%5C%22).innerHTML%20%3D%20message%3B%5Cn%22%2C%22scss%22%3A%22h1%20%7B%5Cn%20%20font-style%3A%20italic%3B%5Cn%5Cn%20%20%2B%20p%20%7B%5Cn%20%20%20%20color%3A%20red%3B%5Cn%20%20%7D%5Cn%7D%5Cn%22%7D\"\n          >\n              \n              <div>\n                <div>\n<div><pre><code><span><span>#</span> 标题</span>\n\n十分帅\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><div><pre><code><span>const</span> message<span>:</span> <span>string</span> <span>=</span> <span>\"Mr.Hope\"</span><span>;</span>\n\ndocument<span>.</span><span>querySelector</span><span>(</span><span>\"h1\"</span><span>)</span><span>.</span>innerHTML <span>=</span> message<span>;</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><div><pre><code><span>h1 </span><span>{</span>\n  <span>font-style</span><span>:</span> italic<span>;</span>\n\n  <span>+ p </span><span>{</span>\n    <span>color</span><span>:</span> red<span>;</span>\n  <span>}</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div>\n            </div>\n          </div>\n          \n        </div>\n<details><summary>代码</summary>\n<div><pre><code>::: demo 一个普通 Demo\n\n<span><span>```</span><span>md</span>\n<span><span><span>#</span> 标题</span>\n\n十分帅</span>\n<span>```</span></span>\n\n<span><span>```</span><span>ts</span>\n<span><span>const</span> message<span>:</span> <span>string</span> <span>=</span> <span>\"Mr.Hope\"</span><span>;</span>\n\ndocument<span>.</span><span>querySelector</span><span>(</span><span>\"h1\"</span><span>)</span><span>.</span>innerHTML <span>=</span> message<span>;</span></span>\n<span>```</span></span>\n\n<span><span>```</span><span>scss</span>\n<span><span>h1 </span><span>{</span>\n  <span>font-style</span><span>:</span> italic<span>;</span>\n\n  <span>+ p </span><span>{</span>\n    <span>color</span><span>:</span> red<span>;</span>\n  <span>}</span>\n<span>}</span></span>\n<span>```</span></span>\n\n:::\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/demo/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h3 id=\"幻灯片\"> 幻灯片</h3>\n<i>Not supported content</i><details><summary>代码</summary>\n<div><pre><code>@slidestart\n\n<span><span>##</span> 幻灯片 1</span>\n\n一个有文字和 <span>[<span>链接</span>](<span>https://mrhope.site</span>)</span> 的段落\n\n<span>---</span>\n\n<span><span>##</span> 幻灯片 2</span>\n\n<span>-</span> 列表 1\n<span>-</span> 列表 2\n\n<span>---</span>\n\n<span><span>##</span> 幻灯片 3.1</span>\n\n<span><span>```</span><span>js</span>\n<span><span>const</span> a <span>=</span> <span>1</span><span>;</span></span>\n<span>```</span></span>\n\n--\n\n<span><span>##</span> 幻灯片 3.2</span>\n\n$$\nJ(\\theta_0,\\theta_1) = \\sum_{i=0}\n$$\n\n@slideend\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br></div></div></details>\n<ul>\n<li><a href=\"https://vuepress-theme-hope.github.io/zh/guide/markdown/presentation/\" target=\"_blank\" rel=\"noopener noreferrer\">点击查看</a></li>\n</ul>\n<h2 id=\"其他语法\"> 其他语法</h2>\n<div><p>自定义标题</p>\n<p>信息容器</p>\n</div>\n<div><p>自定义标题</p>\n<p>提示容器</p>\n</div>\n<div><p>自定义标题</p>\n<p>警告容器</p>\n</div>\n<div><p>自定义标题</p>\n<p>危险容器</p>\n</div>\n<details><summary>自定义标题</summary>\n<p>详情容器</p>\n</details>\n<details><summary>代码</summary>\n<div><pre><code>::: info 自定义标题\n\n信息容器\n\n:::\n\n::: tip 自定义标题\n\n提示容器\n\n:::\n\n::: warning 自定义标题\n\n警告容器\n\n:::\n\n::: danger 自定义标题\n\n危险容器\n\n:::\n\n::: details 自定义标题\n\n详情容器\n\n:::\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br></div></div></details>\n<hr>\n<section>\n<ol>\n<li id=\"footnote1\"><p>这是脚注内容 </p>\n</li>\n</ol>\n</section>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": [
        "使用指南"
      ]
    },
    {
      "title": "再也不怕被HashMap欺负了",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/HashMap/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/HashMap/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1596467333000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<blockquote>\n<p>HashMap是我们在日常开发中经常使用的一个结合类型,同时也是面试时候最好提问的集合类型,在这里进行整理\n一起学习,进步。</p>\n</blockquote>\n<h2 id=\"一、数据结构\"> 一、数据结构</h2>\n<p>先说两种数据结构, 不用怕, 如果要对付面试只要了解就行了。不用手写实现, 同时也因为已经有人帮我写好,所以开发中我们只要用就行。</p>\n<h3 id=\"_1-二叉树\"> 1. 二叉树</h3>\n<p><a href=\"https://www.cs.usfca.edu/~galles/visualization/BST.html\" target=\"_blank\" rel=\"noopener noreferrer\">动画展示二叉树</a></p>\n<p>本来是一个相对平衡的二叉树(当前数据 &gt; 根节点 ？ 从右边插入 : 从左边插入)。\n<img src=\"https://img.springlearn.cn/blog/learn_1596522740000.png\" alt=\"\" />\n但是由于在使用的过程中的删除,慢慢的变成了一个瘸腿。此时树的高度越高,数据越多,导致查询叶子\n的耗时越长。\n<img src=\"https://img.springlearn.cn/blog/learn_1596522608000.png\" alt=\"\" /></p>\n<p>于是乎人们在这个数据结构的基础上,研究出新的结构,就是下面的红黑树。</p>\n<h3 id=\"_2-红黑树\"> 2. 红黑树</h3>\n<p><a href=\"https://www.cs.usfca.edu/~galles/visualization/RedBlack.html\" target=\"_blank\" rel=\"noopener noreferrer\">动画展示红黑树</a></p>\n<p>依次插入7 5 3 2 4 6 8 9 12 11 17 13 14 16</p>\n<p>很明显我们可以看出红黑树比二叉树相对比较平衡。\n<img src=\"https://img.springlearn.cn/blog/learn_1596523217000.png\" alt=\"\" /></p>\n<p>在对比一下二叉树</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596523318000.png\" alt=\"\" /></p>\n<p>好了关于数据结构的知识就说这么多,可以通过图就能知道这两种数据结构情况了。因为数据结构不是我们本篇研究的点。\n所以就提这么多。</p>\n<h2 id=\"二、源码分析\"> 二、源码分析</h2>\n<p>HashMap 实现了 Map 接口,JDK1.7由 数组 + 链表实现， 1.8后由 数组 + 链表 + 红黑树实现</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596527068000.png\" alt=\"\" /></p>\n<h3 id=\"_1-put的源码分析\"> 1. put的源码分析</h3>\n<p>HashMap中声明的常量信息,注意看。下面源码中会提到。</p>\n<table>\n<thead>\n<tr>\n<th>变量</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DEFAULT_INITIAL_CAPACITY</td>\n<td>默认的初始容量</td>\n</tr>\n<tr>\n<td>MAXIMUM_CAPACITY</td>\n<td>最大的容量2^30</td>\n</tr>\n<tr>\n<td>DEFAULT_LOAD_FACTOR</td>\n<td>容器个数 size &gt; 负载因子 * 数组长度  就需要进行扩容</td>\n</tr>\n<tr>\n<td>TREEIFY_THRESHOLD</td>\n<td>如果数组中某一个链表 &gt;= 8 需要转化为红黑树</td>\n</tr>\n<tr>\n<td>UNTREEIFY_THRESHOLD</td>\n<td>如果数组中某一个链表转化为红黑树后的节点 &lt; 6 的时候 继续转为 链表</td>\n</tr>\n</tbody>\n</table>\n<div><pre><code> final V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n                   boolean evict) {\n        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;\n        if ((tab = table) == null || (n = tab.length) == 0)\n            n = (tab = resize()).length;\n        if ((p = tab[i = (n - 1) &amp; hash]) == null)\n            tab[i] = newNode(hash, key, value, null);\n        else {\n            Node&lt;K,V&gt; e; K k;\n            if (p.hash == hash &amp;&amp;\n                ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))\n                e = p;\n            //判断是否是树    \n            else if (p instanceof TreeNode)\n                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);\n            //继续用链表    \n            else {\n                // 循环链表\n                for (int binCount = 0; ; ++binCount) {\n                    if ((e = p.next) == null) {\n                        // 新建节点存储\n                        p.next = newNode(hash, key, value, null);\n                        if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st\n                            //大于树的阀值,就转换为树结构\n                            treeifyBin(tab, hash);\n                        break;\n                    }\n                    if (e.hash == hash &amp;&amp;\n                        ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\n                        break;\n                    p = e;\n                }\n            }\n            if (e != null) { // existing mapping for key\n                V oldValue = e.value;\n                if (!onlyIfAbsent || oldValue == null)\n                    e.value = value;\n                afterNodeAccess(e);\n                return oldValue;\n            }\n        }\n        ++modCount;\n        if (++size &gt; threshold)\n            resize();\n        afterNodeInsertion(evict);\n        return null;\n    }\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br></div></div><p>从上面源码中我们可以看到在put时候会判断是链表结构还是红黑树。如果是树就用树put\n<code>((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</code>。</p>\n<p>如果是链表就循环列表插入数据,如果发现列表长度大于树的阀值就讲链表转换为树</p>\n<h3 id=\"_2-put流程赘述\"> 2. put流程赘述</h3>\n<ol>\n<li>判断 table 是否为 null。为 null 则新建一个 table 数组</li>\n<li>调用 hash 获取 该 key 的 hash 值\n<img src=\"https://img.springlearn.cn/blog/learn_1596528441000.png\" alt=\"\" /></li>\n<li>如果发现有数据,且还是树结构就调用树的put方法</li>\n<li>如果发现有数据,是链表的结构就循环插入尾部,如果发现达到了要转换树的长度,就转成红黑树</li>\n<li>发现key冲突直接新值替换旧值,并且break;\n<img src=\"https://img.springlearn.cn/blog/learn_1596528854000.png\" alt=\"\" /></li>\n</ol>\n<h2 id=\"三、面试知识扩展\"> 三、面试知识扩展</h2>\n<p>前面我们知道了HashMap在1.8之后的优化。这里我们最后再说一个面试题。\n问: 1.7时候hashmap在扩容时候回出现死链的问题。问题原因是什么?  已经出现的场景是什么?</p>\n<p>首先看下扩容方法 <code>resize</code>\n<img src=\"https://img.springlearn.cn/blog/learn_1596530770000.png\" alt=\"\" /></p>\n<h3 id=\"_1-优化1\"> 1. 优化1</h3>\n<p>jdk1.8在对链表进行扩容时候时候不是直接都去hash了。而是\n<code>(e.hash &amp; oldCap) == 0</code> 下标不变\n<code>(e.hash &amp; oldCap) != 0</code> 下标 = 原下标 + oldCap</p>\n<h3 id=\"_2-出现的场景\"> 2. 出现的场景</h3>\n<p>多线程操作扩容</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596531864000.png\" alt=\"\" /></p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1596467333000.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "指南",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/test/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/guide/test/",
      "content_html": "<p>不是使用自动生成侧边栏，而是使用。自定以侧边栏。</p>\n<p>https://vuepress-theme-hope.github.io/zh/guide/layout/sidebar/#%E4%BE%A7%E8%BE%B9%E6%A0%8F%E5%88%86%E7%BB%84</p>\n<h2 id=\"一、本站知识阅览\"> 一、本站知识阅览</h2>\n<h3 id=\"_1-多撒多\"> 1. 多撒多</h3>\n<h3 id=\"_2-fdsa\"> 2. fdsa</h3>\n<h2 id=\"二、学习路线参\"> 二、学习路线参</h2>\n<p>考\n范德萨</p>\n<h2 id=\"三、java\"> 三、Java</h2>\n<p>德萨</p>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "倒计锁 CountDownLatch",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/CountDownLatch/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/CountDownLatch/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<p>上文我们知道了 <code>Semaphore</code> 信号量的用法，那么这一篇基本不用学了。因为原理基本上是一样的。\n但是用法不太一样。</p>\n<p><code>Semaphore</code> 是获取到资源就执行，获取不到资源就等待。\n<code>CountDownLatch</code> 跟 <code>Semaphore</code> 正好相反。</p>\n<p>CountDownLatch#await() 可以理解为获取不到资源，就等待。这么说不太好理解，直接看源码吧。</p>\n<div><pre><code><span>private</span> <span>static</span> <span>final</span> <span>class</span> <span>Sync</span> <span>extends</span> <span>AbstractQueuedSynchronizer</span> <span>{</span>\n        <span>private</span> <span>static</span> <span>final</span> <span>long</span> serialVersionUID <span>=</span> <span>4982264981922014374L</span><span>;</span>\n\n        <span>Sync</span><span>(</span><span>int</span> count<span>)</span> <span>{</span>\n            <span>setState</span><span>(</span>count<span>)</span><span>;</span>\n        <span>}</span>\n\n        <span>int</span> <span>getCount</span><span>(</span><span>)</span> <span>{</span>\n            <span>return</span> <span>getState</span><span>(</span><span>)</span><span>;</span>\n        <span>}</span>\n\n        <span>protected</span> <span>int</span> <span>tryAcquireShared</span><span>(</span><span>int</span> acquires<span>)</span> <span>{</span>\n            <span>// 获取资源,await就是调用这个方法。当tryReleaseShared没有进行扣减之前。</span>\n            <span>// 这里一直都是-1。而-1就是获取不到资源进行等待</span>\n            <span>return</span> <span>(</span><span>getState</span><span>(</span><span>)</span> <span>==</span> <span>0</span><span>)</span> <span>?</span> <span>1</span> <span>:</span> <span>-</span><span>1</span><span>;</span>\n        <span>}</span>\n\n        <span>protected</span> <span>boolean</span> <span>tryReleaseShared</span><span>(</span><span>int</span> releases<span>)</span> <span>{</span>\n            <span>// countDown就调用这个方法,进行扣减1</span>\n            <span>for</span> <span>(</span><span>;</span><span>;</span><span>)</span> <span>{</span>\n                <span>int</span> c <span>=</span> <span>getState</span><span>(</span><span>)</span><span>;</span>\n                <span>if</span> <span>(</span>c <span>==</span> <span>0</span><span>)</span>\n                    <span>return</span> <span>false</span><span>;</span>\n                <span>int</span> nextc <span>=</span> c<span>-</span><span>1</span><span>;</span>\n                <span>if</span> <span>(</span><span>compareAndSetState</span><span>(</span>c<span>,</span> nextc<span>)</span><span>)</span>\n                    <span>return</span> nextc <span>==</span> <span>0</span><span>;</span>\n            <span>}</span>\n        <span>}</span>\n    <span>}</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br></div></div><h2 id=\"常用用法\"> 常用用法</h2>\n<p><strong>注意:</strong>\n<mark>CountDownLatch不可重复使用，当计数器减少到0之后，就废了，无法继续使用了。</mark></p>\n<p>CountDownLatch是在java1.5被引入的，跟它一起被引入的并发工具类还有CyclicBarrier、Semaphore、ConcurrentHashMap和BlockingQueue，它们都存在于java.util.concurrent包下。CountDownLatch这个类能够使一个线程等待其他线程完成各自的工作后再执行。例如，应用程序的主线程希望在负责启动框架服务的线程已经启动所有的框架服务之后再执行。</p>\n<p>CountDownLatch是通过一个计数器来实现的，计数器的初始值为线程的数量。每当一个线程完成了自己的任务后，计数器的值就会减1。当计数器值到达0时，它表示所有的线程已经完成了任务，然后在闭锁上等待的线程就可以恢复执行任务。</p>\n<p><img src=\"http://incdn1.b0.upaiyun.com/2015/04/f65cc83b7b4664916fad5d1398a36005.png\" alt=\"\" /></p>\n<h2 id=\"countdownlatch-存在的意义\"> CountDownLatch 存在的意义</h2>\n<p>让主线程阻塞，等待线程结束后在运行</p>\n<p>直译过来就是倒计数(CountDown)门闩(Latch)。倒计数不用说，门闩的意思顾名思义就是阻止前进。在这里就是指 CountDownLatch.await() 方法在倒计数为0之前会阻塞当前线程。</p>\n<p><strong>实现</strong></p>\n<p>CountDownLatch内部维护一个最大线程数，当每个线程执行结束，就调用\n<code>latch.countDown();</code> 将数量减 1 ,当数量为0的时候，就放弃阻塞主线程，也就是放弃 <code>countDownLatch.await()</code>阻塞的线程</p>\n<h2 id=\"代码解释\"> 代码解释</h2>\n<div><pre><code> <span>public</span> <span>void</span> <span>test</span><span>(</span><span>)</span><span>throws</span> <span>Exception</span><span>{</span>\n        <span>int</span> pagecount<span>=</span><span>3</span><span>;</span>\n        <span>ExecutorService</span> executors <span>=</span> <span>Executors</span><span>.</span><span>newFixedThreadPool</span><span>(</span>pagecount<span>)</span><span>;</span>\n        <span>CountDownLatch</span> countDownLatch <span>=</span> <span>new</span> <span>CountDownLatch</span><span>(</span>pagecount<span>)</span><span>;</span>\n        <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> pagecount<span>;</span> i<span>++</span><span>)</span> <span>{</span>\n            <span>// 启动线程抓取</span>\n            executors\n                    <span>.</span><span>execute</span><span>(</span><span>new</span> <span>Runnable</span><span>(</span><span>)</span> <span>{</span>\n                        <span>@Override</span>\n                        <span>public</span> <span>void</span> <span>run</span><span>(</span><span>)</span> <span>{</span>\n                            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>\n                            countDownLatch<span>.</span><span>countDown</span><span>(</span><span>)</span><span>;</span>\n                        <span>}</span>\n                    <span>}</span><span>)</span><span>;</span>\n        <span>}</span>\n        countDownLatch<span>.</span><span>await</span><span>(</span><span>)</span><span>;</span><span>//主线程阻塞在这里，等到线程结束,</span>\n        <span>//然后关闭线程池</span>\n        executors<span>.</span><span>shutdown</span><span>(</span><span>)</span><span>;</span>\n\n    <span>}</span>\n\n\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><h2 id=\"最大缺点\"> 最大缺点</h2>\n<p>通过前面源码我们发现, <code>CountDownLatch</code> 只有减没有加，所以导致了一个最大的缺点就是\n只能使用一次,当扣减为0的时候,那么就不能在继续使用了。所以就要引入 <code>CyclicBarrier</code>了。</p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Java管理扩展",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/JMX/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/JMX/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1590919227000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<p><strong>JMX（Java Management Extensions，即Java管理扩展）是一个为应用程序、设备、系统等植入管理功能的框架。JMX可以跨越一系列异构操作系统平台、系统体系结构和网络传输协议，灵活的开发无缝集成的系统、网络和服务管理应用。</strong></p>\n<p>前面是对JMX的介绍，那么JMX在我们日常的开发过程中，有什么实际的意义呢? 相信很多做Java开发的同学都使用过JDK自带的 jconsole 或者 jvisualvm 监控过JVM的运行情况，但不知道有没有留意过它们会有一个MBean的功能/标签，通过MBean可以看到在JVM中运行的组件的一些属性和操作。下面小编就通过一个SpringBoot应用来一探究竟。并教会你如何自定义扩展。</p>\n<h2 id=\"一、实际意义\"> 一、实际意义</h2>\n<h3 id=\"_1-启动一个springboot应用\"> 1. 启动一个SpringBoot应用</h3>\n<p>下面我们以SpringBoot应用为例子，启动一个SpringBoot项目。端口是 <code>8080</code></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590921574000.png\" alt=\"\" /></p>\n<h3 id=\"_2-命令行打开jconsole\"> 2. 命令行打开Jconsole</h3>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590921682000.png\" alt=\"\" /></p>\n<h3 id=\"_3-连接前面的应用\"> 3. 连接前面的应用</h3>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1gfbtkkzi1bj30p00ku761.jpg\" alt=\"image-20200531184151871\" /></p>\n<p>选中MBean标签,然后可以看到一个SpringApplication的类。shutdown是服务下线。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590921783000.png\" alt=\"\" /></p>\n<p>当我们点击了shutdown方法后,应用就会自动的关闭了。导致Jconsole连接丢失\n<img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1gfbtpwfbbqj30oy0i2gof.jpg\" alt=\"image-20200531184702204\" /></p>\n<p>getProperty方法是获取应用中的配置信息。如图我们获取redis的相关信息。可以看到返回值是Spring应用中我们定义的值\n6379</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590921918000.png\" alt=\"\" /></p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1gfbtoo8x1yj30lc07imy6.jpg\" alt=\"image-20200531184553346\" /></p>\n<p>那么其实这个能力就是利用JMX提供的接口来实现的。下面我们通过分析SpringBoot中的源码来看他是如何实现的。</p>\n<hr>\n<h2 id=\"二、源码追踪看springboot应用如何实现\"> 二、源码追踪看SpringBoot应用如何实现?</h2>\n<p>我们通过看Jconsole工具,可以看到工具里面的类名叫SpringApplication，目录是admin，于是我们就根据这个推测SpringBoot中的命名,果然我们找到两个实现类。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590922192000.png\" alt=\"\" /></p>\n<p><strong>1. SpringApplicationAdminMXBean</strong></p>\n<p>这个类就是JMX中的MBean，我们可以简单理解这个里面的方法都是可以通过Jconsole来调用的。\n通过将这个类注册给JMX管理器就能实现在Jconsole中的数据展示。</p>\n<p>首先看<strong>SpringApplicationAdminMXBean</strong></p>\n<div><pre><code><span>public</span> <span>interface</span> <span>SpringApplicationAdminMXBean</span> <span>{</span>\n   <span>//是否可读</span>\n   <span>boolean</span> <span>isReady</span><span>(</span><span>)</span><span>;</span>\n   <span>//是否web应用</span>\n   <span>boolean</span> <span>isEmbeddedWebApplication</span><span>(</span><span>)</span><span>;</span>\n   <span>//获取配置信息</span>\n   <span>String</span> <span>getProperty</span><span>(</span><span>String</span> key<span>)</span><span>;</span>\n   <span>//下线应用</span>\n   <span>void</span> <span>shutdown</span><span>(</span><span>)</span><span>;</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><p>实现类<strong>SpringApplicationAdmin</strong>,是SpringApplicationAdminMXBeanRegistrar的内部类</p>\n<div><pre><code><span>private</span> <span>class</span> <span>SpringApplicationAdmin</span> <span>implements</span> <span>SpringApplicationAdminMXBean</span> <span>{</span>\n    <span>// 是否可读，当应用还没起来时候这个值是false</span>\n      <span>@Override</span>\n      <span>public</span> <span>boolean</span> <span>isReady</span><span>(</span><span>)</span> <span>{</span>\n         <span>return</span> <span>SpringApplicationAdminMXBeanRegistrar</span><span>.</span><span>this</span><span>.</span>ready<span>;</span>\n      <span>}</span>\n      <span>// 是否是web应用</span>\n      <span>@Override</span>\n      <span>public</span> <span>boolean</span> <span>isEmbeddedWebApplication</span><span>(</span><span>)</span> <span>{</span>\n         <span>return</span> <span>SpringApplicationAdminMXBeanRegistrar</span><span>.</span><span>this</span><span>.</span>embeddedWebApplication<span>;</span>\n      <span>}</span>\n    <span>// 从Spring的配置信息中实时读取值</span>\n      <span>@Override</span>\n      <span>public</span> <span>String</span> <span>getProperty</span><span>(</span><span>String</span> key<span>)</span> <span>{</span>\n         <span>return</span> <span>SpringApplicationAdminMXBeanRegistrar</span><span>.</span><span>this</span><span>.</span>environment<span>.</span><span>getProperty</span><span>(</span>key<span>)</span><span>;</span>\n      <span>}</span>\n    <span>// 关闭Spring应用</span>\n      <span>@Override</span>\n      <span>public</span> <span>void</span> <span>shutdown</span><span>(</span><span>)</span> <span>{</span>\n         logger<span>.</span><span>info</span><span>(</span><span>\"Application shutdown requested.\"</span><span>)</span><span>;</span>\n         <span>SpringApplicationAdminMXBeanRegistrar</span><span>.</span><span>this</span><span>.</span>applicationContext<span>.</span><span>close</span><span>(</span><span>)</span><span>;</span>\n      <span>}</span>\n\n   <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div><p><strong>2. SpringApplicationAdminMXBeanRegistrar</strong></p>\n<p>提供注册能力。这个类中我们可以知道如何注册JMX以及如何取消注册。下面我看这个类如何利用Spring提供的接口能力,来实现应用下线。及注册到JMX上的吧。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590922871000.png\" alt=\"\" /></p>\n<p>自动化配置将SpringApplicationAdminMXBeanRegistrar声明成一个Spring中的Bean对象。并配置JMX中的命名及目录。\n<img src=\"https://img.springlearn.cn/blog/learn_1590923451000.png\" alt=\"\" /></p>\n<h3 id=\"_1-applicationcontextaware\"> 1. ApplicationContextAware</h3>\n<p>获得读取上下文能力。在Spring容器中一个bean如何实现了该方法则就可以获取上下文对象。</p>\n<div><pre><code>   @Override\n   public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n      Assert.state(applicationContext instanceof ConfigurableApplicationContext,\n            &quot;ApplicationContext does not implement ConfigurableApplicationContext&quot;);\n      this.applicationContext = (ConfigurableApplicationContext) applicationContext;\n   }\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h3 id=\"_2-genericapplicationlistener\"> 2. GenericApplicationListener</h3>\n<p>获取处理事件的能力,同样在Spring中只要实现该接口,就获取了事件监听的能力,不过具体监听什么事件要自己去判断。大家可以根据例子\n来理解。</p>\n<div><pre><code>  // 根据事件泛型判断是否需要处理，这里判断如果是ApplicationReadyEvent和WebServerInitializedEvent\n  // 事件就处理\n  @Override\n   public boolean supportsEventType(ResolvableType eventType) {\n      Class&lt;?&gt; type = eventType.getRawClass();\n      if (type == null) {\n         return false;\n      }\n      return ApplicationReadyEvent.class.isAssignableFrom(type)\n            || WebServerInitializedEvent.class.isAssignableFrom(type);\n   }\n\n   @Override\n   public boolean supportsSourceType(Class&lt;?&gt; sourceType) {\n      return true;\n   }\n\n   @Override\n   public void onApplicationEvent(ApplicationEvent event) {\n    // 如果Spring已经准备好了,就将this.ready = true;\n      if (event instanceof ApplicationReadyEvent) {\n         onApplicationReadyEvent((ApplicationReadyEvent) event);\n      }\n    // 如果是Web应用,this.embeddedWebApplication = true\n      if (event instanceof WebServerInitializedEvent) {\n         onWebServerInitializedEvent((WebServerInitializedEvent) event);\n      }\n   }\n   //优先级\n   @Override\n   public int getOrder() {\n      return Ordered.HIGHEST_PRECEDENCE;\n   }\n\n   void onApplicationReadyEvent(ApplicationReadyEvent event) {\n      if (this.applicationContext.equals(event.getApplicationContext())) {\n         this.ready = true;\n      }\n   }\n\n   void onWebServerInitializedEvent(WebServerInitializedEvent event) {\n      if (this.applicationContext.equals(event.getApplicationContext())) {\n         this.embeddedWebApplication = true;\n      }\n   }\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br></div></div><h3 id=\"_3-environmentaware\"> 3. EnvironmentAware</h3>\n<p>获取应用配置信息, 和上面一样实现了Aware结尾的接口,都能获取对象的Spring内容的对象实例，然后我们就可以根据该实例,来进行功能扩展。</p>\n<div><pre><code>@Override\n   public void setEnvironment(Environment environment) {\n      this.environment = environment;\n   }\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id=\"_4-initializingbean\"> 4. InitializingBean</h3>\n<p>这里就要着重看了，在初始化时候将MBean注册到JMX上。当然我们可以通过 @PostConstruct注解来声明初始化方法。</p>\n<div><pre><code>@Override\n   public void afterPropertiesSet() throws Exception {\n      MBeanServer server = ManagementFactory.getPlatformMBeanServer();\n      server.registerMBean(new SpringApplicationAdmin(), this.objectName);\n      if (logger.isDebugEnabled()) {\n         logger.debug(&quot;Application Admin MBean registered with name &#39;&quot; + this.objectName + &quot;&#39;&quot;);\n      }\n   }\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h3 id=\"_5-disposablebean\"> 5. DisposableBean</h3>\n<p>应用销毁时候,取消注册。同样我们也可以用@PreDestroy注解来实现</p>\n<div><pre><code>@Override\n   public void destroy() throws Exception {\n      ManagementFactory.getPlatformMBeanServer().unregisterMBean(this.objectName);\n   }\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>通过对SpringBoot应用源码的追踪，我们大概已经明白JMX的实际意义了，并且能自定义一个能提供类似能力的MBean了吧，但是JMX能做的远远不止如此。</p>\n<h2 id=\"三、自定义mbean\"> 三、自定义MBean</h2>\n<p>注意接口名必须是MBean结尾，实现类必须去掉MBean</p>\n<p>如CustomMBean接口对应的实现类必须是Custom。</p>\n<h3 id=\"_1-代码实现\"> 1. 代码实现</h3>\n<div><pre><code><span>@Component</span>\n<span>public</span> <span>class</span> <span>CustomMbeanRegistrar</span> <span>implements</span> <span>ApplicationContextAware</span><span>,</span> <span>InitializingBean</span><span>,</span> <span>DisposableBean</span> <span>{</span>\n    <span>private</span> <span>ConfigurableApplicationContext</span> applicationContext<span>;</span>\n    <span>private</span> <span>ObjectName</span> objectName <span>=</span> <span>new</span> <span>ObjectName</span><span>(</span><span>\"com.example.demo:type=CustomAdmin,name=CustomMXBean\"</span><span>)</span><span>;</span>\n\n    <span>public</span> <span>CustomMbeanRegistrar</span><span>(</span><span>)</span> <span>throws</span> <span>MalformedObjectNameException</span> <span>{</span>\n    <span>}</span>\n    <span>@Override</span>\n    <span>public</span> <span>void</span> <span>destroy</span><span>(</span><span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>ManagementFactory</span><span>.</span><span>getPlatformMBeanServer</span><span>(</span><span>)</span><span>.</span><span>unregisterMBean</span><span>(</span><span>this</span><span>.</span>objectName<span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>@Override</span>\n    <span>public</span> <span>void</span> <span>afterPropertiesSet</span><span>(</span><span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>MBeanServer</span> server <span>=</span> <span>ManagementFactory</span><span>.</span><span>getPlatformMBeanServer</span><span>(</span><span>)</span><span>;</span>\n        server<span>.</span><span>registerMBean</span><span>(</span><span>new</span> <span>Custom</span><span>(</span><span>)</span><span>,</span> <span>this</span><span>.</span>objectName<span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>@Override</span>\n    <span>public</span> <span>void</span> <span>setApplicationContext</span><span>(</span><span>ApplicationContext</span> applicationContext<span>)</span> <span>throws</span> <span>BeansException</span> <span>{</span>\n        <span>this</span><span>.</span>applicationContext <span>=</span> <span>(</span><span>ConfigurableApplicationContext</span><span>)</span> applicationContext<span>;</span>\n    <span>}</span>\n\n    <span>public</span> <span>interface</span> <span>CustomMBean</span> <span>{</span>\n        <span>int</span> <span>getDatabaseConnectionPoolSize</span><span>(</span><span>)</span><span>;</span>\n        <span>void</span> <span>customShutdown</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>private</span> <span>class</span> <span>Custom</span> <span>implements</span> <span>CustomMBean</span> <span>{</span>\n\n        <span>/**\n         * 获取数据库连接池大小\n         *\n         * @return 模拟\n         */</span>\n        <span>@Override</span>\n        <span>public</span> <span>int</span> <span>getDatabaseConnectionPoolSize</span><span>(</span><span>)</span> <span>{</span>\n            <span>return</span> <span>new</span> <span>Random</span><span>(</span><span>)</span><span>.</span><span>nextInt</span><span>(</span><span>100</span><span>)</span><span>;</span>\n        <span>}</span>\n\n        <span>/**\n         * 自定义一个销毁方法\n         */</span>\n        <span>public</span> <span>void</span> <span>customShutdown</span><span>(</span><span>)</span> <span>{</span>\n            <span>CustomMbeanRegistrar</span><span>.</span><span>this</span><span>.</span>applicationContext<span>.</span><span>close</span><span>(</span><span>)</span><span>;</span>\n        <span>}</span>\n    <span>}</span>\n<span>}</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br></div></div><h3 id=\"_2-演示\"> 2. 演示</h3>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590924584000.png\" alt=\"\" /></p>\n<h2 id=\"四、总结\"> 四、总结</h2>\n<p>通过前面的演示,大概我们对JMX在实际中的用处有一个大概的了解了吧。根据这个特性,我们就可以根据我们的需求来定制属于自己的能力。</p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1590919227000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "没有条件创造条件Condition",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/Condition/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/Condition/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<p>https://blog.csdn.net/a1439775520/article/details/98471610</p>\n<p>Condition 是为了调换 Object 中的 wait()\n和notify().</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">API</th>\n<th style=\"text-align:center\">Object</th>\n<th style=\"text-align:center\">Condition</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">等待</td>\n<td style=\"text-align:center\">wait()</td>\n<td style=\"text-align:center\">wait()</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">通知</td>\n<td style=\"text-align:center\">notify()</td>\n<td style=\"text-align:center\">signal()</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">通知所有</td>\n<td style=\"text-align:center\">notifyAll()</td>\n<td style=\"text-align:center\">signalAll()</td>\n</tr>\n</tbody>\n</table>\n<p><strong>wait是会释放锁</strong></p>\n<h2 id=\"相同点\"> 相同点</h2>\n<ul>\n<li>都必须被包裹在同步代码块中，即加锁</li>\n<li>当调用wait都会释放锁</li>\n</ul>\n<h2 id=\"不同点\"> 不同点</h2>\n<ul>\n<li>Object 依赖 synchronized 锁</li>\n<li>Condition 依赖 Lock 锁</li>\n</ul>\n<h2 id=\"objectwait\"> ObjectWait</h2>\n<div><p>运行结果</p>\n<ul>\n<li>当前线程进入线程一</li>\n<li>当前线程进入线程二</li>\n<li>当前线程释放main</li>\n<li>当前线程释放main</li>\n<li>当前线程退出线程一</li>\n<li>当前线程退出线程二</li>\n</ul>\n</div>\n<div><pre><code><span>/**\n * @author liuxin\n * 2022/1/5 12:24 上午\n */</span>\n<span>public</span> <span>class</span> <span>ObjectWait</span> <span>{</span>\n\n    <span>public</span> <span>synchronized</span> <span>void</span> <span>objWait</span><span>(</span><span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"当前线程进入\"</span> <span>+</span> <span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        <span>wait</span><span>(</span><span>)</span><span>;</span>\n        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"当前线程退出\"</span> <span>+</span> <span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>public</span> <span>synchronized</span> <span>void</span> <span>objNotify</span><span>(</span><span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"当前线程释放\"</span> <span>+</span> <span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        <span>notify</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>ObjectWait</span> objectWait <span>=</span> <span>new</span> <span>ObjectWait</span><span>(</span><span>)</span><span>;</span>\n        <span>// 使用synchronized修饰方法，就是锁的是当前这个示例synchronized(this)</span>\n        <span>new</span> <span>Thread</span><span>(</span><span>(</span><span>)</span> <span>-></span> <span>{</span>\n            <span>try</span> <span>{</span>\n                <span>// 当前进入等待，然后释放锁。wait会释放锁</span>\n                objectWait<span>.</span><span>objWait</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>\n                e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span>\n        <span>}</span><span>,</span><span>\"线程一\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n\n        <span>// 使用synchronized修饰方法，就是锁的是当前这个示例synchronized(this)</span>\n        <span>new</span> <span>Thread</span><span>(</span><span>(</span><span>)</span> <span>-></span> <span>{</span>\n            <span>try</span> <span>{</span>\n                <span>// 当前进入等待，然后释放锁。wait会释放锁</span>\n                objectWait<span>.</span><span>objWait</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>\n                e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span>\n        <span>}</span><span>,</span><span>\"线程二\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>Thread</span><span>.</span><span>sleep</span><span>(</span><span>1000L</span><span>)</span><span>;</span>\n        <span>// 释放锁后才会放行</span>\n        objectWait<span>.</span><span>objNotify</span><span>(</span><span>)</span><span>;</span>\n        <span>// 释放锁后才会放行</span>\n        objectWait<span>.</span><span>objNotify</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br></div></div><h2 id=\"lockwait\"> LockWait</h2>\n<div><p>运行结果</p>\n<ul>\n<li>当前线程进入线程一</li>\n<li>当前线程进入线程二</li>\n<li>当前线程释放main</li>\n<li>当前线程释放main</li>\n<li>当前线程退出线程一</li>\n<li>当前线程退出线程二</li>\n</ul>\n</div>\n<div><pre><code><span>/**\n * @author liuxin\n * 2022/1/5 24:24 上午\n */</span>\n<span>public</span> <span>class</span> <span>LockWait</span> <span>{</span>\n\n    <span>private</span> <span>ReentrantLock</span> lock <span>=</span> <span>new</span> <span>ReentrantLock</span><span>(</span><span>)</span><span>;</span>\n\n    <span>private</span> <span>Condition</span> condition <span>=</span> lock<span>.</span><span>newCondition</span><span>(</span><span>)</span><span>;</span>\n\n    <span>public</span> <span>void</span> <span>lockWait</span><span>(</span><span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        lock<span>.</span><span>lock</span><span>(</span><span>)</span><span>;</span>\n        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"当前线程进入\"</span> <span>+</span> <span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        condition<span>.</span><span>await</span><span>(</span><span>)</span><span>;</span>\n        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"当前线程退出\"</span> <span>+</span> <span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        lock<span>.</span><span>unlock</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>public</span> <span>void</span> <span>lockNotify</span><span>(</span><span>)</span> <span>{</span>\n        lock<span>.</span><span>lock</span><span>(</span><span>)</span><span>;</span>\n        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"当前线程释放\"</span> <span>+</span> <span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        condition<span>.</span><span>signal</span><span>(</span><span>)</span><span>;</span>\n        lock<span>.</span><span>unlock</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>LockWait</span> lockWait <span>=</span> <span>new</span> <span>LockWait</span><span>(</span><span>)</span><span>;</span>\n        <span>// lock.lock()  线程一: 获取锁,然后wait之后，进入释放锁,然后进入到等待队列</span>\n        <span>new</span> <span>Thread</span><span>(</span><span>(</span><span>)</span> <span>-></span> <span>{</span>\n            <span>try</span> <span>{</span>\n                <span>// 当前进入等待，然后释放锁。</span>\n                lockWait<span>.</span><span>lockWait</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>\n                e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span>\n        <span>}</span><span>,</span> <span>\"线程一\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>// lock.lock()  当前线程二获取锁,然后wait之后，进入释放锁,然后进入到等待队列</span>\n        <span>new</span> <span>Thread</span><span>(</span><span>(</span><span>)</span> <span>-></span> <span>{</span>\n            <span>try</span> <span>{</span>\n                <span>// 当前进入等待，然后释放锁。</span>\n                lockWait<span>.</span><span>lockWait</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>\n                e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span>\n        <span>}</span><span>,</span><span>\"线程二\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n\n        <span>Thread</span><span>.</span><span>sleep</span><span>(</span><span>1000L</span><span>)</span><span>;</span>\n        <span>// 调用第一次，会唤醒线程一，继续向下执行</span>\n        lockWait<span>.</span><span>lockNotify</span><span>(</span><span>)</span><span>;</span>\n        <span>// 调用第二次，会唤醒线程二，继续向下执行</span>\n        lockWait<span>.</span><span>lockNotify</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br></div></div>",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T17:14:21.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "循环锁屏障 CyclicBarrier",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/CyclicBarrier/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/CyclicBarrier/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<p>举个例子,五个人开黑,少一个人就开不了。</p>\n<div><pre><code><span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>throws</span> <span>Throwable</span> <span>{</span>\n        <span>CyclicBarrier</span> cb <span>=</span> <span>new</span> <span>CyclicBarrier</span><span>(</span><span>5</span><span>,</span> <span>new</span> <span>Runnable</span><span>(</span><span>)</span> <span>{</span>\n            <span>@Override</span>\n            <span>public</span> <span>void</span> <span>run</span><span>(</span><span>)</span> <span>{</span>\n                <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"人都到齐了,游戏开始进入峡谷\"</span><span>)</span><span>;</span>\n            <span>}</span>\n        <span>}</span><span>)</span><span>;</span>\n        <span>Runnable</span> player <span>=</span> <span>new</span> <span>Runnable</span><span>(</span><span>)</span> <span>{</span>\n            <span>@Override</span>\n            <span>public</span> <span>void</span> <span>run</span><span>(</span><span>)</span> <span>{</span>\n                <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\"已经进来了\"</span><span>)</span><span>;</span>\n                <span>try</span> <span>{</span>\n                    cb<span>.</span><span>await</span><span>(</span><span>)</span><span>;</span>\n                <span>}</span> <span>catch</span> <span>(</span><span>Throwable</span> e<span>)</span> <span>{</span>\n                    e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>\n                <span>}</span>\n            <span>}</span>\n        <span>}</span><span>;</span>\n        <span>new</span> <span>Thread</span><span>(</span>player<span>,</span> <span>\"上路程咬金\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>new</span> <span>Thread</span><span>(</span>player<span>,</span> <span>\"中路安琪拉\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>new</span> <span>Thread</span><span>(</span>player<span>,</span> <span>\"下路小鲁班\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>new</span> <span>Thread</span><span>(</span>player<span>,</span> <span>\"辅助李元芳\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>new</span> <span>Thread</span><span>(</span>player<span>,</span> <span>\"打野孙悟空\"</span><span>)</span><span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div>",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "读写锁 ReadWriteLock",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/ReadWriteLock/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/ReadWriteLock/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "重入锁 ReentrantLock",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/ReentrantLock/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/ReentrantLock/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "synchronized锁升级",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/synchronized/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/synchronized/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1596467333000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h2 id=\"一、重量级锁\"> 一、重量级锁</h2>\n<p>什么叫重量级锁？</p>\n<p>就是申请资源必须经过kernel(内核也叫操作系统)，调用。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596467437000.png\" alt=\"\" /></p>\n<h2 id=\"二、轻量级锁\"> 二、轻量级锁</h2>\n<p>轻量级锁,是不经过操作系统。轻量级锁是相对于重量级锁来叫的,也可以叫乐观锁。</p>\n<p>在Java中乐观锁就是cas操作(compare and swap)根据英文翻译就是比较和交换。\n底层都是调用的Unsafe里面的方法,可以看到这些方法是native方法。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596467628000.png\" alt=\"\" /></p>\n<p>通过看jvm源码,看到c++的代码有一个汇编语言支持cas</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596467784000.png\" alt=\"\" /></p>\n<p>但是，这条cmpchg1不具有原子性，点进lock_if_mp(%4)里</p>\n<p>最终实现是lock cmpxchg 指令：表示在硬件在执行后面的指令会锁定一个北桥总线。（相当于锁定总线，但是比锁总线要轻量级）解决了下面的问题</p>\n<h2 id=\"三、偏向锁\"> 三、偏向锁</h2>\n<p>顾名思义，它会偏向于第一个访问锁的线程，如果在运行过程中，同步锁只有一个线程访问，不存在多线程争用的情况，则线程是不需要触发同步的，这种情况下，就会给线程加一个偏向锁。\n说白了,没有竞争,还叫啥锁呀。就是加了一个标记。认为没有人给你竞争。</p>\n<h2 id=\"四、锁升级步骤\"> 四、锁升级步骤</h2>\n<p>偏向锁 -&gt; 轻量级锁 -&gt; 重量级锁</p>\n<p>在jdk1.6之前synchronized直接就是一个重量级锁,一了百了。\njdk优化后出现了,锁升级的概念。</p>\n<p>那么其实synchronized的执行过程:</p>\n<ol>\n<li>检测Mark Word里面是不是当前线程的ID，如果是，表示当前线程处于偏向锁</li>\n<li>如果不是，则使用CAS将当前线程的ID替换Mard Word，如果成功则表示当前线程获得偏向锁，置偏向标志位1(前面一个线程刚好释放的情况下,这个才能成功,否则看3)</li>\n<li>如果失败，则说明发生竞争，撤销偏向锁，进而升级为轻量级锁。</li>\n<li>当前线程使用CAS将对象头的Mark Word替换为锁记录指针，如果成功，当前线程获得锁</li>\n<li>如果失败，表示其他线程竞争锁，当前线程便尝试使用自旋来获取锁。</li>\n<li>如果自旋成功则依然处于轻量级状态。</li>\n<li>如果自旋失败，则升级为重量级锁。</li>\n</ol>\n<p>翻译成白话问:</p>\n<ol>\n<li>\n<p>当没有人跟你竞争就是一个偏向锁,当cas失败了,说明有人跟你竞争了,这个时候锁就从偏向锁升级成了轻量级锁。</p>\n</li>\n<li>\n<p>轻量级锁的状态下,仍然还有很多线程来竞争,那么此时cas就会比较严重从而浪费cpu执行。就升级为重量级锁。\n其次其他等待线程就进入了阻塞状态。</p>\n</li>\n</ol>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1596467333000.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Java异常体系",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/Java%E5%BC%82%E5%B8%B8%E4%BD%93%E7%B3%BB/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/Java%E5%BC%82%E5%B8%B8%E4%BD%93%E7%B3%BB/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1589293715000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<p>知己知彼方能百战不殆,在小编初学Java时候特别怕程序报异常,经常会因为异常不知所措,相信这个问题应该是所有\n初学者都会有的心理感受;如果你也有这种感受,那么只有一种解决方法:\n迎难而上,攻克Java异常体系,长痛不如短痛,只要清楚了Java的异常体系,就不会再有这种感受了。下面跟着小编来窥探Java的异常体系吧。</p>\n<h1 id=\"一、java异常体系其实很简单\"> 一、Java异常体系其实很简单</h1>\n<p>其实Java的异常体系是非常简单的,简单到只要你看过本文就能明白百分之八九十的样子。当你清楚了Java的异常体系\n那么在遇到项目执行异常的时候,基本看报错的异常就大概明白问题出在哪里,遇到的错误多了,就成长了,处理的问题就是\n你未来在技术路上所积累的财富。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589294764000.png\" alt=\"\" /></p>\n<p>在Java的异常体系中 <code>Throwable</code> 我们可以理解为是一个根异常,即所有的异常都是它的子类</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589295509000.png\" alt=\"\" /></p>\n<h1 id=\"二、error\"> 二、Error</h1>\n<p>前面我们说了Java的异常体系中 <code>Throwable</code> 可以理解是一个根异常,那么 <code>Error</code> 就是这个根节点的一个子节点。\n<code>Error</code> 类对象由 <code>Java</code> 虚拟机生成并抛出，大多数错误与代码编写者所执行的操作无关。程序无法处理的异常，一般伴随者jvm虚拟机停止，或者断电之类\n这种问题，是无法通过程序来解决的。</p>\n<p><strong>这种异常基本很少,如果遇到也不要慌,跟你的业务逻辑没有关系,顶多是Java代码写的有问题,只要不是业务问题其实大多都能先通过重启解决;\n但是假如项目还未上线,只是在开发过程中出现这种问题一定要弄清楚原因,是那一部分代码编写异常导致的,否则上线可能有重大隐患</strong></p>\n<p><strong>经验教学:</strong></p>\n<ol>\n<li>如果是在项目系统过程中遇到这种问题,可能是因为Jar包冲突导致的。</li>\n<li>如果是在项目运行过程中遇到这种问题,可能是因为对象创建过多没有释放,导致堆栈溢出。这个时候就要看GC是否频繁,然后对堆栈日志进行分析,看存在最多的对象是哪一个,然后分析代码解决。</li>\n</ol>\n<h1 id=\"三、exception\"> 三、Exception</h1>\n<p><code>Exception</code> 异常时我们平时在开发中遇到最多，其实 <code>Exception</code> 也分为两种即:</p>\n<ol>\n<li><code>checkException</code> 编译异常，这种异常，是哪些没有遵守java语言规则，容易看出和解决的</li>\n<li><code>uncheckException</code> 运行异常，运行异常，具有不确定性，往往难以排查，包括处理逻辑问题。</li>\n</ol>\n<p>然而 <code>checkException</code> 和 <code>uncheckException</code> 其实只是一个概念,并没有对应的 <code>Java异常类</code>。我们基本可以忽略\n<code>checkException</code> 因为这种异常基本现在的编译器都会给我们做了，我们在写代码时候就会实时的给我提示错误了。我们\n只用关心 <code>uncheckException</code>即可。</p>\n<p><strong>uncheckException</strong></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589297073000.png\" alt=\"\" /></p>\n<p><code>RuntimeException</code> + <code>Error</code> 和其子类都是属于 <code>uncheckException</code></p>\n<p>前面我们已经对 <code>Error</code> 做了说明，现在就主要来看下 <code>RuntimeException</code>。 <code>RuntimeException</code> 从名字来看就是\n运行异常,所谓运行异常就是可能在程序运行过程中发生的异常,这种异常一般是可以通过代码逻辑进行处理的。\n我们举例一个例子,我们都知道0不能作为除数。但是假如在下面这个代码中</p>\n<div><pre><code>public class Tester {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;请输入被除数a:&quot;);\n        int a = sc.nextInt();\n        System.out.print(&quot;请输入除数b:&quot;);\n        int b = sc.nextInt();\n        System.out.println(&quot;a/b=&quot; + a / b);\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><p>当输入a=8,b=2,那么结果就是4。</p>\n<p><img src=\"https://i02piccdn.sogoucdn.com/8206a4441e0386c3\" alt=\"\" /></p>\n<p><strong>假如我们输入b=0呢?</strong></p>\n<p>学过数学都知道0不能做除数,程序也不运行你这么输入,但是却不能阻止你,只能通过报错的方式来告诉你。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589298143000.png\" alt=\"\" /></p>\n<p>那么我们就要对这个异常进行处理,当发现有这个异常就在控制台来提醒用户。那么代码就会变成这样</p>\n<div><pre><code>public class Tester {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;请输入被除数a:&quot;);\n        int a = sc.nextInt();\n        System.out.print(&quot;请输入除数b:&quot;);\n        int b = sc.nextInt();\n        try {\n            System.out.println(&quot;a/b=&quot; + a / b);\n        } catch (ArithmeticException ate) {\n            //对算术异常进行捕捉\n            System.err.println(&quot;0不能作为除数,请输入不为0的任意数&quot;);\n        }\n    }\n}\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p>当出现算术异常直接提示: &quot;0不能作为除数,请输入不为0的任意数&quot;\n<img src=\"https://img.springlearn.cn/blog/learn_1589298261000.png\" alt=\"\" /></p>\n<p>那么像这种程序中无可避免会出现,且又能通过逻辑来处理的异常就是运行异常。运行异常一般都可以正常运行,只是在特定情况下会导致异常发生。\n像这面这个例子,我们只要看到 <code>ArithmeticException</code> 就知道是算术异常。所以只要我们对运行异常类有一个认识，其实就能解决大多数的程序问题了。\n下面我们来看下运行异常都要有哪些类把。</p>\n<p><img src=\"https://i03piccdn.sogoucdn.com/f960e6a461d218d2\" alt=\"\" /></p>\n<p><strong>只要对下面运行异常类进行熟悉了,基本就清楚掌握了Java的异常体系了</strong></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589299119000.png\" alt=\"\" /></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589299523000.png\" alt=\"\" /></p>\n<p>以上就是常见的运行异常类,当然Java中还有很多不常见的异常类。剩下的我们就可以在日常工作中去学习了。</p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1589293715000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "hehe",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/",
      "content_html": "<h1 id=\"hehe\"> hehe</h1>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "分布式锁",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1596467333000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>在单机环境下多线程操作共享数据时候回用到锁的概念,因为是单机可以直接使用jdk提供的锁机制就可以满足。\n但是在微服务场景下,因为是多服务共享数据,此时jdk提供的锁就不能再使用了。于是乎就有了分布式锁。\n本文介绍常见的几种可以使用的生产的分布式锁</p>\n</div>\n<p><strong>本文面向有开发经验的同学,所以场景就不赘述,直接上干货</strong></p>\n<h2 id=\"一、分布式锁具有的品格\"> 一、分布式锁具有的品格</h2>\n<ul>\n<li>基本的加锁和释放锁</li>\n<li>具备锁失效机制,防止死锁</li>\n<li>非阻塞机制</li>\n<li>高性能和高可用</li>\n</ul>\n<h2 id=\"二、思考一下如何自己实现\"> 二、思考一下如何自己实现?</h2>\n<h3 id=\"_1-db\"> 1. db</h3>\n<p>根据上面提出的要求,发现只要能满足多服务之前通信就能实现。\n比如我们可以用mysql就能实现,比如A服务对一个表加锁和释放锁。B服务就会发现表加了锁。此时B就阻塞了。</p>\n<p>当然这明显不满足,非阻塞的机制。另外如果要用一个数据库来做锁的场景也太浪费性能了。</p>\n<h3 id=\"_2-redis\"> 2. redis</h3>\n<p>利用redis命令来实现,如果返回ok说明获取锁。返回nil说明没有获取到锁。</p>\n<p>不阻塞,防止死锁,高性能,都满足</p>\n<div><pre><code>set key value [EX seconds] [PX milliseconds] [NX|XX]\nEX seconds：设置失效时长，单位秒\nPX milliseconds：设置失效时长，单位毫秒\nNX：key不存在时设置value，成功返回OK，失败返回(nil)\nXX：key存在时设置value，成功返回OK，失败返回(nil)\n//对资源加一个锁 key为资源名 value可以为任意 ex为秒 1为过期时间 nx为\n127.0.0.1:6379&gt; set ziyuanming 1 ex 1 nx\nOK\n127.0.0.1:6379&gt; set ziyuanming 1 ex 1 nx\n(nil)\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h3 id=\"_3-zookeeper\"> 3. zookeeper</h3>\n<h4 id=\"获取锁\"> 获取锁</h4>\n<ol>\n<li>在Zookeeper当中创建一个持久节点ParentLock。当第一个客户端想要获得锁时，需要在ParentLock这个节点下面创建一个临时顺序节点 Lock1。</li>\n<li>Client1查找ParentLock下面所有的临时顺序节点并排序，判断自己所创建的节点Lock1是不是顺序最靠前的一个。如果是第一个节点，则成功获得锁。</li>\n<li>如果再有一个客户端 Client2 前来获取锁，则在ParentLock下载再创建一个临时顺序节点Lock2。\n此时Client2发现自己并不是最靠前的就像Lock1注册了一个Watcher,用于监听Lock1节点释放。此时Client2就进入等待状态</li>\n<li>Client3,4以此类推</li>\n</ol>\n<h4 id=\"释放锁\"> 释放锁</h4>\n<ol>\n<li>Client1释放了锁,此时Zookeeper就讲Lock1移出,并触发了Lock1的Watcher。</li>\n<li>Client2一直在监听Lock1的状态,当Lock1节点被删除,Client2里面收到通知获得了锁。</li>\n</ol>\n<h2 id=\"三、现成的解决方案\"> 三、现成的解决方案</h2>\n<h3 id=\"_1-db的方式就不考虑了\"> 1. db的方式就不考虑了</h3>\n<p>实现简单,但是不划算,性能也不是最好的。</p>\n<h3 id=\"_2-redis-2\"> 2. redis</h3>\n<div><pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.redisson&lt;/groupId&gt;\n    &lt;artifactId&gt;redisson&lt;/artifactId&gt;\n    &lt;version&gt;3.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><div><pre><code>\npublic class RedLockTester {\n    public static void main(String[] args) {\n        //连接redis\n        Config config = new Config();\n        config.useSingleServer().setAddress(&quot;redis://127.0.0.1:6379&quot;);\n        RedissonClient redisson = Redisson.create(config);\n        log.info(&quot;连接Redis&quot;);\n\n        //1.定义锁\n        RLock lock = redisson.getLock(&quot;myTest001&quot;);\n\n        try {\n            //尝试加锁的超时时间\n            Long timeout = 300L;\n            //锁过期时间\n            Long expire = 30L;\n            //2.获取锁\n            if (lock.tryLock(timeout, expire, TimeUnit.MILLISECONDS)) {\n                //2.1.获取锁成功的处理\n                log.info(&quot;加锁成功&quot;);\n                //...do something\n                log.info(&quot;使用完毕&quot;);\n            } else {\n                //2.2.获取锁失败的处理\n                log.info(&quot;加锁失败&quot;);\n                log.info(&quot;其他处理&quot;);\n            }\n        } catch (InterruptedException e) {\n            log.error(&quot;尝试获取分布式锁失败&quot;, e);\n        } finally {\n            //3.释放锁\n            try {\n                lock.unlock();\n                log.info(&quot;锁释放成功&quot;);\n            } catch (Exception e) {\n                //do nothing...\n            }\n        }\n\n        //关闭连接\n        redisson.shutdown();\n        log.info(&quot;关闭redis连接&quot;);\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br></div></div><p>通过官方文档能找到实现第三方工具</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1596471713000.png\" alt=\"\" /></p>\n<p><a href=\"https://www.cnblogs.com/rgcLOVEyaya/p/RGC_LOVE_YAYA_1003days.html\" target=\"_blank\" rel=\"noopener noreferrer\">参考文章</a></p>\n<h3 id=\"_3-zookeeper-2\"> 3. zookeeper</h3>\n<p><a href=\"https://curator.apache.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Curator</a></p>\n<div><pre><code>&lt;!-- 对zookeeper的底层api的一些封装 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;\n            &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;\n            &lt;version&gt;2.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- 封装了一些高级特性，如：Cache事件监听、选举、分布式锁、分布式Barrier --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;\n            &lt;artifactId&gt;curator-recipes&lt;/artifactId&gt;\n            &lt;version&gt;2.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p>几乎对所有的JDK锁都实现了,基于Zookeeper的分布式锁。具体使用方法可以自行百度。</p>\n<ul>\n<li>InterProcessMutex：分布式可重入排它锁</li>\n<li>InterProcessSemaphoreMutex：分布式排它锁</li>\n<li>InterProcessReadWriteLock：分布式读写锁</li>\n<li>InterProcessMultiLock：将多个锁作为单个实体管理的容器</li>\n<li>InterProcessSemaphoreV2 信号量</li>\n<li>DistributedBarrier 分布式栅栏</li>\n<li>DistributedDoubleBarrier 分布式栅栏</li>\n</ul>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1596467333000.png",
      "date_published": "2022-01-04T14:58:20.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "信号量 Semaphore",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/Semaphore/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/Semaphore/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h2 id=\"🚀-知识快读\"> 🚀 知识快读</h2>\n<p><code>Semaphore</code> 翻译过来就是信号量, 其根本原理就是基于 <code>CAS</code> 共享锁的一种实现。举一个例子。\n假设停车场只有三个车位，一开始三个车位都是空的。这时如果同时来了五辆车，看门人允许其中三辆不受阻碍的进入，然后放下车拦，剩下的车则必须在入口等待，此后来的车也都不得不在入口处等待。这时，有一辆车离开停车场，看门人得知后，打开车拦，放入一辆，如果又离开两辆，则又可以放入两辆，如此往复。</p>\n<p>那么上面的这个例子可以这样理解，资源一共有3个, 即三个车位。如何来控制这5辆汽车，来合理的使用这3个资源呢?\n<code>Semaphore</code> 可以这样来定义。</p>\n<div><pre><code><span>// 1. 定一个信号量,声明有3个资源。使用公平模式线程将会按到达的顺序（FIFO）执行(也就是等待时间最长的先执行),如果是非公平，则可以后请求的有可能排在队列的头部。</span>\n<span>Semaphore</span> semp <span>=</span> <span>new</span> <span>Semaphore</span><span>(</span><span>3</span><span>)</span><span>;</span>\n<span>// 2. 获取1个许可 - 最大允许3个进入，一但超过就让其等待,除非已经释放</span>\nsemp<span>.</span><span>acquire</span><span>(</span><span>)</span><span>;</span>  \n<span>// 3. 释放1个许可 </span>\nsemp<span>.</span><span>release</span><span>(</span><span>)</span><span>;</span> \n<span>// 4. 获取1许可,失败就返回,不等待</span>\nsemp<span>.</span><span>tryAcquire</span><span>(</span><span>)</span><span>;</span>  \n<span>// 5. 获取2许可,失败就返回,不等待</span>\nsemp<span>.</span><span>tryAcquire</span><span>(</span><span>2</span><span>)</span><span>;</span>  \n<span>// 6. 不允许被中断</span>\nsemp<span>.</span><span>acquireUninterruptibly</span><span>(</span><span>)</span><span>;</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id=\"知识点1-fair-nofair\"> 知识点1: Fair &amp; NoFair</h2>\n<p><code>Semaphore</code> 的模式配置,只是构造来定义。</p>\n<ul>\n<li>默认构造不公平模式, 谁来申请资源,就先尝试获取资源。排队的要等到没有资源进来申请才能继续申请</li>\n</ul>\n<div><pre><code>    <span>public</span> <span>Semaphore</span><span>(</span><span>int</span> <span>permits</span><span>)</span> <span>{</span>\n        sync <span>=</span> <span>new</span> <span>NonfairSync</span><span>(</span><span>permits</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>public</span> <span>Semaphore</span><span>(</span><span>int</span> <span>permits</span><span>,</span> <span>boolean</span> fair<span>)</span> <span>{</span>\n        sync <span>=</span> fair <span>?</span> <span>new</span> <span>FairSync</span><span>(</span><span>permits</span><span>)</span> <span>:</span> <span>new</span> <span>NonfairSync</span><span>(</span><span>permits</span><span>)</span><span>;</span>\n    <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p><img src=\"https://img.springlearn.cn/blog/learn_1640531082000.png\" alt=\"\" /></p>\n<h2 id=\"知识点2-申请资源\"> 知识点2: 申请资源</h2>\n<ul>\n<li>acquire() 获取1个资源,获取不到就等待,如果线程中断,会直接中断。</li>\n<li>acquire(2) 获取2个资源,获取不到就等待,如果线程中断,会直接中断。</li>\n<li>tryAcquire() 获取1个资源,获取不到就返回 <code>false</code>,如果线程中断,会直接中断。</li>\n<li>acquireUninterruptibly() 获取1个资源,获取不到就等待,不会关心线程中断。</li>\n</ul>\n<h2 id=\"知识点3-释放资源\"> 知识点3: 释放资源</h2>\n<ul>\n<li>release() 释放一个资源</li>\n<li>release(2) 释放两个资源</li>\n</ul>\n<h2 id=\"知识点4-其他api\"> 知识点4: 其他API</h2>\n<ul>\n<li>availablePermits() 当前资源数量</li>\n<li>drainPermits() 获取当前资源数量，并将剩余资源清零，直接赋值0</li>\n<li>reducePermits(2) 将资源数量，扣减2个</li>\n<li>isFair() 是否公平</li>\n<li>hasQueuedThreads() 是否还有线程等待</li>\n<li>getQueueLength() 还有多少线程等待</li>\n<li>getQueuedThreads() 获取所有的线程集合</li>\n</ul>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "JVM钩子hooks函数",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/hooks%E5%87%BD%E6%95%B0/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/hooks%E5%87%BD%E6%95%B0/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1589383784000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<p>什么是钩子函数,在学习钩子函数之前,小编先提一个问题。</p>\n<p><strong>请问在Spring中,如果JVM异常终止,Spring是如何保证会释放掉占用的资源,比如说数据库连接等资源呢?</strong></p>\n<p>钩子函数非常简单,简单到小编只用摘抄一段Spring代码即可。走你,现在开始。</p>\n<h1 id=\"问题\"> 问题</h1>\n<p><code>Spring</code> 容器中 <code>Bean</code> 在什么时候执行销毁方法?</p>\n<p>我们知道在Spring中定义销毁方法有两种方式</p>\n<ol>\n<li>实现 <code>DisposableBean</code> 的 <code>destroy</code> 方法。</li>\n<li>使用 <code>@PreDestroy</code> 注解修饰方法</li>\n</ol>\n<div><pre><code>@Component\npublic class DataCollectBean implements DisposableBean {\n\n    /**\n     * 第一种方法实现 DisposableBean#destroy方法\n     *\n     * @throws Exception 异常\n     */\n    @Override\n    public void destroy() throws Exception {\n        System.err.println(&quot;执行销毁方法&quot;);\n    }\n\n    /**\n     * 第二种方法使用PreDestroy注解声明销毁方法\n     */\n    @PreDestroy\n    public void customerDestroy() {\n        System.err.println(&quot;执行自定义销毁方法&quot;);\n    }\n\n\n}\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div><h2 id=\"那么在什么时候执行销毁方法\"> 那么在什么时候执行销毁方法?</h2>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589471346000.png\" alt=\"\" /></p>\n<ol>\n<li>主动执行销毁bean</li>\n</ol>\n<div><pre><code>    public static void main(String[] args) {\n        ConfigurableApplicationContext run = SpringApplication.run(DemoApplication.class, args);\n        DataCollectBean bean = run.getBean(DataCollectBean.class);\n        //1. 主动销毁bean\n        run.getBeanFactory().destroyBean(bean);\n    }\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><ol start=\"2\">\n<li>JVM关闭时候自动执行销毁方法。</li>\n</ol>\n<p>这里就要用到钩子函数了, <code>Spring</code> 的钩子函数在 <code>AbstractApplicationContext#shutdownHook属性</code></p>\n<p>如果我们是SpringBoot项目我们看到在SpringApplication启动时候会注册一个钩子函数</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589473259000.png\" alt=\"\" /></p>\n<h1 id=\"如何定义钩子函数\"> 如何定义钩子函数?</h1>\n<p>简直太简单了，没有任何学习成本。一行代码就能搞定。</p>\n<div><pre><code>public class HooksTester {\n    public static void main(String[] args) {\n        Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {\n            @Override\n            public void run() {\n                System.out.println(&quot;钩子函数执行&quot;);\n            }\n        }));\n        //当主动关闭应用\n        while (true);\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p><img src=\"https://img.springlearn.cn/blog/learn_1589471574000.png\" alt=\"\" /></p>\n<h1 id=\"触发钩子函数的场景\"> 触发钩子函数的场景</h1>\n<p>只要不是机器断电，强制kill -9 强制杀进程，都会触发。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589473502000.png\" alt=\"\" /></p>\n<h1 id=\"钩子函数能做什么\"> 钩子函数能做什么？</h1>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589383970000.png\" alt=\"\" /></p>\n<p>正如上图所示优雅停机,在项目将要关闭时候,主动释放程序占用的资源信息,释放db连接池的连接等其他占用的资源信息。\n如果我们是 <code>Spring</code> 项目其实我们不用自己定义钩子函数,我们只要使用Spring提供给我们的销毁方法即可。因为\nSpring定义的钩子函数中会去执行, <code>DisposableBean.destory()</code> 和被 <code>PreDestroy</code> 修饰的方法。</p>\n<p>我们看下源码</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589472185000.png\" alt=\"\" /></p>\n<div><pre><code>protected void doClose() {\n\t\t// Check whether an actual close attempt is necessary...\n\t\tif (this.active.get() &amp;&amp; this.closed.compareAndSet(false, true)) {\n\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\tlogger.debug(&quot;Closing &quot; + this);\n\t\t\t}\n\n\t\t\tLiveBeansView.unregisterApplicationContext(this);\n\n\t\t\ttry {\n\t\t\t\t// Publish shutdown event.\n\t\t\t\tpublishEvent(new ContextClosedEvent(this));\n\t\t\t}\n\t\t\tcatch (Throwable ex) {\n\t\t\t\tlogger.warn(&quot;Exception thrown from ApplicationListener handling ContextClosedEvent&quot;, ex);\n\t\t\t}\n\n\t\t\t// Stop all Lifecycle beans, to avoid delays during individual destruction.\n\t\t\tif (this.lifecycleProcessor != null) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.lifecycleProcessor.onClose();\n\t\t\t\t}\n\t\t\t\tcatch (Throwable ex) {\n\t\t\t\t\tlogger.warn(&quot;Exception thrown from LifecycleProcessor on context close&quot;, ex);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Destroy all cached singletons in the context&#39;s BeanFactory.\n\t\t\tdestroyBeans();\n\n\t\t\t// Close the state of this context itself.\n\t\t\tcloseBeanFactory();\n\n\t\t\t// Let subclasses do some final clean-up if they wish...\n\t\t\tonClose();\n\n\t\t\t// Reset local application listeners to pre-refresh state.\n\t\t\tif (this.earlyApplicationListeners != null) {\n\t\t\t\tthis.applicationListeners.clear();\n\t\t\t\tthis.applicationListeners.addAll(this.earlyApplicationListeners);\n\t\t\t}\n\n\t\t\t// Switch to inactive.\n\t\t\tthis.active.set(false);\n\t\t}\n\t}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br></div></div><p>可以看到：doClose()方法会执行bean的destroy()，也会执行SmartLifeCycle的stop()方法，我们就可以通过重写这些方法来实现对象的关闭，生命周期的管理，实现平滑shutdown</p>\n<p><img src=\"https://i03piccdn.sogoucdn.com/7eac32473373b70a\" alt=\"\" /></p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1589383784000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "线程安全之原子操作",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1589361031000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<p><strong>原子特性: 原子是最小的粒子,不可再分</strong></p>\n<p>这并不是一个化学课,而是巧妙的借用了化学上的一个概念,即原子是最小的粒子,不可再分;原子操作也是不能再分的操作;\n为了能把这个讲明白,下文基本都是大白话,其实Java本来并不是很难,而是总有一些人喜欢把简单的概念给复杂化。小编不喜欢\n那种说辞,所以尽量简单易懂。如有问题,欢迎提出问题。共同交流进步,最后谢谢你的阅读。</p>\n<hr>\n<h1 id=\"举例说明原子操作重要性\"> 举例说明原子操作重要性</h1>\n<p>在很多场景中我们需要我们的操作是原子特性的,如果我们写的程序都是单线程的,其实我们没必要考虑原子操作。但是假如\n我们写多线程操作,或者是在Web服务中来更新对象属性,那么就必须要来考虑原子操作问题了。</p>\n<p>举一个🌰例子A:</p>\n<div><pre><code>int a = 1;\n</code></pre>\n<div><span>1</span><br></div></div><p>可以看到程序对变量 <code>a</code> 操作,其实是有多个步骤进行的。在单线程环境下基本不会发生任何问题\n<img src=\"https://img.springlearn.cn/blog/learn_1589372995000.png\" alt=\"\" /></p>\n<p>举一个🌰例子B(单线程操作):</p>\n<div><pre><code>public class Tester {\n\n    private static Integer a = 1;\n\n    private static AtomicInteger aa = new AtomicInteger(1);\n\n    private static void restore() {\n        a = 1;\n        aa = new AtomicInteger(1);\n    }\n\n    public static void main(String[] args) {\n        for (int i = 0; i &lt; 10; i++) {\n            test(&quot;第&quot; + i + &quot;次&quot;);\n            restore();\n        }\n    }\n\n    private static void test(String str) {\n        for (int i = 1; i &lt;= 1000; i++) {\n            new Thread(() -&gt; a = a + 1).start();\n            new Thread(() -&gt; aa.addAndGet(1)).start();\n        }\n        System.out.print(str + &quot;常规操作a=&quot; + a);\n        System.out.println(&quot; &lt;===&gt; &quot;+str+&quot;原子操作操作aa=&quot; + aa);\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><p>规律:</p>\n<div><pre><code>        /**\n         * i              i+1\n         * 1: a = 1 + 1 = 2\n         * 2: a = 2 + 1 = 3\n         * 3: a = 3 + 1 = 4\n         * 4: a = 4 + 1 = 5\n         * 5: a = 5 + 1 = 6\n         * 6: a = 6 + 1 = 7\n         * 7: a = 7 + 1 = 8\n         * 8: a = 8 + 1 = 9\n         * 9: a = 9 + 1 = 10\n         * 10:a = 10 + 1 = 11\n         */\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p>如上面代码变量a是基本类型,变量aa是原子类型,正常情况对a或者aa进行1000次操作结果都应该是\n<code>1001</code>。正常情况我们可以理解是单线程操作。结果也是没有问题的。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589380382000.png\" alt=\"\" /></p>\n<p>举一个🌰例子C(多线程操作):</p>\n<div><pre><code>public class Tester {\n\n    private static Integer a = 1;\n\n    private static AtomicInteger aa = new AtomicInteger(1);\n\n    private static void restore() {\n        a = 1;\n        aa = new AtomicInteger(1);\n    }\n\n    public static void main(String[] args) throws Exception {\n        for (int i = 0; i &lt; 10; i++) {\n            test(&quot;第&quot; + i + &quot;次&quot;);\n            restore();\n        }\n    }\n\n    private static void test(String str) throws Exception {\n        for (int i = 1; i &lt;= 100; i++) {\n            new Thread(() -&gt; a = a + 1).start();\n            new Thread(() -&gt; a = a + 1).start();\n\n            new Thread(() -&gt; aa.addAndGet(1)).start();\n            new Thread(() -&gt; aa.addAndGet(1)).start();\n            Thread.sleep(1);\n        }\n        System.out.print(str + &quot;常规操作a=&quot; + a);\n        System.out.println(&quot; &lt;===&gt; &quot; + str + &quot;原子操作操作aa=&quot; + aa);\n    }\n    \n}\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br></div></div><p>规律:</p>\n<div><pre><code>    /**\n     * i          2 * i + 1\n     * 1: a = 1 + 1 + 1 = 3\n     * 2: a = 3 + 1 + 1 = 5\n     * 3: a = 5 + 1 + 1 = 7\n     * 4: a = 7 + 1 + 1 = 9\n     * 5:                 11\n     * 6:                 13\n     * 7:                 15\n     * 8:                 17\n     * 9:                 19\n     * 10:                21\n     */\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p>多线程环境下操作会不会有问题呢? 出现了问题。我们看到使用常规操作的a变量出现了数据不一致情况。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589375176000.png\" alt=\"\" /></p>\n<p>实际上当循环的次数越多,出现错误的几率就越大,如下我们循环了1000次。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589375386000.png\" alt=\"\" /></p>\n<h1 id=\"问题分析\"> 问题分析</h1>\n<p>我们思考为什么基本类型进行多线程操作时候会出现这种情况呢? 其实问题答案最开始已经说了。 我们通过这张图\n就可以找到原因。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589372995000.png\" alt=\"\" /></p>\n<p>对变量的每次操作其实都有3个步骤</p>\n<ol>\n<li>读取变量值</li>\n<li>变量值操作</li>\n<li>变量重新赋值。</li>\n</ol>\n<p>我们模拟一下错误的原因。</p>\n<p>当A线程读取a=1,并对1+1。但是还未对变量重新赋值a=2的时候，\nB线程也读取了A还未赋值的变量,此时变量还是1,那么B线程因为读取了还未更新的数据,所以也做1+1的操作。然后B对a\n重新赋值了此时a=2,是B赋值的。这个时候A因为已经执行完了前两个步骤,最后也重新赋值了a=2。</p>\n<p>这样数据就更新丢了。这就是因为数据更新不是原子性从而导致的问题。</p>\n<p>因为数据更新丢了,所以出现了。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589380830000.png\" alt=\"\" /></p>\n<h1 id=\"如何解决这种问题\"> 如何解决这种问题</h1>\n<p>如何解决这种问题,其实很简单只要我们保证我们的操作是原子操作即可,简单来说就是将更新的三个步骤合并成一个步骤即可,在Java中JDK已经为我们提供了很多的\n原子操作每一个基本类型都对应一个原子操作。</p>\n<h2 id=\"原子基础类\"> 原子基础类</h2>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589378016000.png\" alt=\"\" /></p>\n<p><strong>原子基础类API</strong></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589378409000.png\" alt=\"\" /></p>\n<h2 id=\"原子数组类\"> 原子数组类</h2>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589378718000.png\" alt=\"\" /></p>\n<p><strong>原子更新数组API</strong></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589378583000.png\" alt=\"\" /></p>\n<h2 id=\"原子引用类\"> 原子引用类</h2>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589379304000.png\" alt=\"\" /></p>\n<p><strong>注意:</strong></p>\n<p>想要原子的更新字段，需要两个步骤：</p>\n<p>1.每次使用的时候必须使用静态方法newUpdater()创建一个更新器，并且需要设置想要更新的类和属性</p>\n<p>2.更新类的字段（属性）必须使用public volatile修饰符</p>\n<h1 id=\"最后我们看一下原子操作的原理\"> 最后我们看一下原子操作的原理</h1>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589379629000.png\" alt=\"\" /></p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1589361031000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Java四大引用",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%9B%9B%E5%A4%A7%E5%BC%95%E7%94%A8/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%9B%9B%E5%A4%A7%E5%BC%95%E7%94%A8/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h1 id=\"一、概念\"> 一、概念</h1>\n<h2 id=\"_1-强引用\"> 1. 强引用</h2>\n<p>new 对象并指向引用变量的都是强引用,开发中大部分都是强引用。对于强引用,JVM宁愿报错<code>OutOfMemoryError</code>错误,是程序异常终止,\n也不会回收强引用来解决内存, 对这类情况,可以通过赋值强引用对象=null,从而被JVM回收。\n但是一般我们在方法中定义的强引用,会存在方法栈中,当方法运行完,退出,此时方法中的强引用也会因为引用数为0,从而被回收。</p>\n<h2 id=\"_2-软引用\"> 2. 软引用</h2>\n<p>在内存充足情况下,GC不会回收软引用对象,如果内存空间不足了,才会回收这些对象的内存。也正因为这个特性,所以软引用经常用作缓存对象使用。</p>\n<h2 id=\"_3-弱引用\"> 3. 弱引用</h2>\n<p>任意GC都会清理掉软引用对象,弱引用是最容易记的,任何的GC动作都会将弱引用对象给回收掉。</p>\n<h2 id=\"_4-虚引用\"> 4. 虚引用</h2>\n<p>和其他三个不一样,这个不对生命周期,有影响,而是当要回收时候,加入到Queue队列中</p>\n<h1 id=\"二、在jdk中的体现\"> 二、在JDK中的体现</h1>\n<table>\n<thead>\n<tr>\n<th>类</th>\n<th>引用说明</th>\n<th>用途</th>\n<th>生存时间</th>\n<th>被垃圾回收时间</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Object</td>\n<td>默认new出来的都是强引用</td>\n<td>对象正常状态</td>\n<td>JVM停止或者无引用被回收</td>\n<td>无任务对象使用</td>\n</tr>\n<tr>\n<td>SoftReference</td>\n<td>软引用</td>\n<td>常用作缓存</td>\n<td>当内存不足时候终止</td>\n<td>内存不足时候回收</td>\n</tr>\n<tr>\n<td>WeakReference</td>\n<td>弱引用</td>\n<td>常用作缓存</td>\n<td>垃圾回收后终止</td>\n<td>任何垃圾回收时</td>\n</tr>\n<tr>\n<td>PhantomReference</td>\n<td>虚引用</td>\n<td>用于跟踪对象是否被回收</td>\n<td>垃圾回收后终止</td>\n<td>任何垃圾回收时</td>\n</tr>\n</tbody>\n</table>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "线程安全感",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1608963968000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h1 id=\"线程安全\"> 线程安全</h1>\n<blockquote>\n<p>所谓发生线程安全其实是有一个前提条件,即当有多线程时候才会设计到线程安全,单线程是不存在线程安全的问题的。且只有在有状态对象中才会发生。</p>\n</blockquote>\n<h2 id=\"_1-什么叫有状态对象\"> 1. 什么叫有状态对象?</h2>\n<h3 id=\"_1-1-无状态对象\"> 1.1 无状态对象</h3>\n<div><pre><code><span>public</span> <span>class</span> <span>Home</span><span>{</span>\n    <span>public</span> <span>String</span> <span>say</span><span>(</span><span>String</span> message<span>)</span><span>{</span>\n        <span>return</span> message<span>;</span>\n    <span>}</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h3 id=\"_1-2-有状态对象\"> 1.2 有状态对象</h3>\n<div><pre><code><span>public</span> <span>class</span> <span>Home</span><span>{</span>\n    <span>//实例变量</span>\n    <span>public</span> <span>int</span> age <span>=</span> <span>0</span><span>;</span>\n    <span>public</span> <span>String</span> <span>say</span><span>(</span><span>String</span> message<span>)</span><span>{</span>\n        <span>return</span> message <span>+</span> <span>(</span>age<span>++</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>为什么说无状态对象不会发生线程安全,线程对公共变量（实例变量，类变量）进行操作才会发生线程安全问题，而方法中变量是保存在每个线程的私有栈中的,所以不存在线程安全问题</p>\n<h2 id=\"_2-什么时候要保证线程安全\"> 2. 什么时候要保证线程安全？</h2>\n<ol>\n<li>当变量属于实例,该实例被多线程操作</li>\n<li>当多线程会影响到执行结果时候,需要保证线程安全</li>\n<li>当变量属于共享属性时候需要保证线程安全,而方法内变量属于每个\n线程的空间,则不需要。</li>\n</ol>\n<h2 id=\"_3-如何保证线程安全\"> 3. 如何保证线程安全？</h2>\n<ol>\n<li>原子性 lock操作,Syn...</li>\n<li>可见性 volatile</li>\n<li>顺序性 防止被重排序</li>\n</ol>\n<h2 id=\"_3-1-原子性\"> 3.1 原子性</h2>\n<p>原子是世界上的最小单位，具有不可分割性。比如 a=0；（a非long和double类型） 这个操作是不可分割的，那么我们说这个操作时原子操作。再比如：a++； 这个操作实际是a = a + 1；是可分割的，所以他不是一个原子操作。非原子操作都会存在线程安全问题，需要我们使用同步技术（sychronized）来让它变成一个原子操作。</p>\n<h2 id=\"_3-2-可见性\"> 3.2 可见性</h2>\n<p>可见性，是指线程之间的可见性，一个线程修改的状态对另一个线程是可见的。也就是一个线程修改的结果。另一个线程马上就能看到。比如：用volatile修饰的变量，就会具有可见性。volatile修饰的变量不允许线程内部缓存和重排序，即直接修改内存。所以对其他线程是可见的。</p>\n<ul>\n<li>volatile 本质是在告诉jvm当前变量在寄存器中的值是不确定的,需要从主存中读取,</li>\n<li>synchronized 则是锁定当前变量,只有当前线程可以访问该变量,其他线程被阻塞住.</li>\n</ul>\n<h2 id=\"_3-3-那么什么时候用可见性\"> 3.3 那么什么时候用可见性？</h2>\n<p>当多线程并不直接进行原子性操作的时候，可以用 volatile 修饰,这样可以保证每个线程读取的都是最新的</p>\n<h2 id=\"_3-4-什么时候用原子性\"> 3.4 什么时候用原子性?</h2>\n<p>当涉及到多个线程对同一个数据进行操作的时候，为了保证在同一刻只有一个操作，就用 synchronized 修饰加锁🔐</p>\n<h2 id=\"_4-servlet线程安全问题思考\"> 4. Servlet线程安全问题思考</h2>\n<p>Servlet本身是无状态的，一个无状态的Servlet是绝对线程安全的，无状态对象设计也是解决线程安全问题的一种有效手段。</p>\n<p>所以，servlet是否线程安全是由它的实现来决定的，如果它内部的属性或方法会被多个线程改变，它就是线程不安全的，反之，就是线程安全的。</p>\n<p>在一个无状态的情况下，是不存在线程安全问题的，即使存在那也是跟它的实现类相关</p>\n<p>在Servlet中避免使用实例变量是保证Servlet线程安全的最佳选择。</p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1608963968000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Lambda函数式编程",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<blockquote>\n<p>Java8所有的新特性基本基于函数式编程的思想，函数式编程给Java带来了注入了新鲜的活力。\n函数式编程其实并不是很难，小编在学习函数式编程时候刚开始一头雾水，最后仔细观察就发现了其中的小窍门，读了本篇文章如果还没有掌握，就算我输了</p>\n</blockquote>\n<h1 id=\"函数式编程\"> 函数式编程</h1>\n<h2 id=\"一、lambda表达式\"> 一、Lambda表达式</h2>\n<p><strong>注意</strong>: 以下方法都可以使用表达式来进行缩写</p>\n<p>我们来看Java中如何来定义一个方法</p>\n<h3 id=\"_1-语法\"> 1. 语法</h3>\n<p><code>()-&gt;{}</code></p>\n<p>其中小括号里面可以放入参，大括号就是方法体，里面也允许有返回值。</p>\n<p><strong>当方法体中只有返回值而没有其他语句时候，大括号和 <code>return</code> 关键字都可以省略不写。</strong></p>\n<h3 id=\"_2-方法引用\"> 2. 方法引用</h3>\n<p><em>只要用.引用不报错的，都可以将.换成:</em></p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>语法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1、引用静态方法</td>\n<td>ClassName::staticMethodName</td>\n</tr>\n<tr>\n<td>2、引用构造函数</td>\n<td>ClassName::new</td>\n</tr>\n<tr>\n<td>3、引用特定类型的实例方法</td>\n<td>ClassName::instanceMethodName</td>\n</tr>\n<tr>\n<td>4、引用特定对象的实例方法</td>\n<td>objectName::instanceMethodName</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"二、java8新增函数式接口\"> 二、Java8新增函数式接口</h2>\n<h3 id=\"_1-predicate接口\"> 1. Predicate接口</h3>\n<p>Predicate 接口只有一个参数，返回boolean类型。该接口包含多种默认方法来将Predicate组合成其他复杂的逻辑（比如：与，或，非）</p>\n<div><pre><code>Predicate&lt;String&gt; predicate = (s) -&gt; s.length() &gt; 0;\n</code></pre>\n<div><span>1</span><br></div></div><p>根据前面的语法我们知道小括号里面可以放入参，大括号里面放出参，当大括号里面只有返回值时候，大括号和 <code>return</code> 关键字也可以省略。如上。</p>\n<h3 id=\"_2-function-接口\"> 2. Function 接口</h3>\n<p>Function 接口有一个参数并且返回一个结果，并附带了一些可以和其他函数组合的默认方法（compose, andThen）：</p>\n<div><pre><code>Function&lt;Integer, Integer&gt; function = (x) -&gt; 2 * x;\n</code></pre>\n<div><span>1</span><br></div></div><p>同理，这个接口有一个入参和出参，如果返回体重不包含其他逻辑，只有一个返回值，大括号和 <code>return</code> 关键字也可以省略。如上。</p>\n<h3 id=\"_3-supplier-接口\"> 3. Supplier 接口</h3>\n<p>Supplier 接口返回一个任意范型的值，和Function接口不同的是该接口没有任何参数</p>\n<div><pre><code>public class Main{\n    public static void main(String[] args) {\n        //构造方法\n        Supplier&lt;Main&gt; supplier = () -&gt; new Main();\n        Supplier&lt;Main&gt; mainSupplier = Main::new;\n        Supplier&lt;Main&gt; mainSupplier1 = Main::staticMethod;\n    }\n    private static Main staticMethod() {\n        return new Main();\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>因为没有入参，所以小括号里面什么都不用写。当遇到这种情况，同样可以用上面其他两种来替换</p>\n<h3 id=\"_4-consumer-接口\"> 4. Consumer 接口</h3>\n<p>Consumer 是一个只有入参，但是无出参的接口。</p>\n<div><pre><code>public class Main {\n    public static void main(String[] args) {\n        List&lt;String&gt; dataList = Arrays.asList(&quot;1&quot;, &quot;2&quot;);\n\n        //特定类的静态方法\n        dataList.forEach(Main::staticMethod);\n        dataList.forEach((x) -&gt; System.out.println(x));\n        dataList.forEach(System.out::println);\n\n    }\n    private static void staticMethod(String name) {\n        System.out.println(&quot;对象静态方法引用:&quot; + name);\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><h2 id=\"三、快速记忆\"> 三、快速记忆</h2>\n<p>虽然新增的函数式接口并不多，但是想要一次性死记住，还是有一点点的难度。小编的学习方式是\n理解这记忆。</p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>简记</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1、Predicate</td>\n<td>条件类型</td>\n</tr>\n<tr>\n<td>2、Supplier</td>\n<td>无入参，有出参</td>\n</tr>\n<tr>\n<td>3、Function</td>\n<td>有入参，有出参</td>\n</tr>\n<tr>\n<td>4、Consumer</td>\n<td>有入参，无出参</td>\n</tr>\n</tbody>\n</table>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "委派双亲之类加载器",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%A7%94%E6%B4%BE%E5%8F%8C%E4%BA%B2%E4%B9%8B%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E5%A7%94%E6%B4%BE%E5%8F%8C%E4%BA%B2%E4%B9%8B%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1589811713000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<ul>\n<li>BootStrap ClassLoader：称为启动类加载器，是Java类加载层次中最顶层的类加载器，负责加载JDK中的核心类库，如：rt.jar、resources.jar、charsets.jar等，可通过如下程序获得该类加载器从哪些地方加载了相关的jar或class文件：</li>\n<li>Extension ClassLoader：称为扩展类加载器，负责加载Java的扩展类库，默认加载JAVA_HOME/jre/lib/ext/目下的所有jar。</li>\n<li>App ClassLoader：称为系统类加载器，负责加载应用程序classpath目录下的所有jar和class文件。</li>\n</ul>\n<h2 id=\"一、类加载器\"> 一、类加载器</h2>\n<p>类的加载在JVM的外部实现。对于任意的一个类，都必须由加载它的类加载器和这个类本身共同确立其在Java虚拟机中的唯一性。JVM提供中类加载器。</p>\n<h2 id=\"二、启动类加载器-bootstrap-classloader\"> 二、启动类加载器（Bootstrap ClassLoader）</h2>\n<p>负责加载 JAVA_HOME\\lib 目录中的，或通过-Xbootclasspath 参数指定路径中的，且被 虚拟机认可（按文件名识别，如 rt.jar）的类。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589811324000.png\" alt=\"\" /></p>\n<h2 id=\"三、扩展类加载器-extension-classloader\"> 三、扩展类加载器(Extension ClassLoader)</h2>\n<p>负责加载 JAVA_HOME\\lib\\ext 目录中的，或通过 java.ext.dirs 系统变量指定路径中的类 库。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589811366000.png\" alt=\"\" /></p>\n<h2 id=\"四、应用程序类加载器-application-classloader\"> 四、应用程序类加载器(Application ClassLoader)</h2>\n<p>负责加载用户路径（classpath）上的类库。 JVM 通过双亲委派模型进行类的加载，当然我们也可以通过继承 java.lang.ClassLoader 实现自定义的类加载器。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589811400000.png\" alt=\"\" /></p>\n<h2 id=\"五、原理解释\"> 五、原理解释</h2>\n<p>ClassLoader使用的是双亲委托模型来搜索类的，每个ClassLoader实例都有一个父类加载器的引用（不是继承的关系，是一个包含的关系），虚拟机内置的类加载器（Bootstrap ClassLoader）本身没有父类加载器，但可以用作其它ClassLoader实例的的父类加载器。当一个ClassLoader实例需要加载某个类时，它会试图亲自搜索某个类之前，先把这个任务委托给它的父类加载器，这个过程是由上至下依次检查的，首先由最顶层的类加载器Bootstrap ClassLoader试图加载，如果没加载到，则把任务转交给Extension ClassLoader试图加载，如果也没加载到，则转交给App ClassLoader 进行加载，如果它也没有加载得到的话，则返回给委托的发起者，由它到指定的文件系统或网络等URL中加载该类。如果它们都没有加载到这个类时，则抛出ClassNotFoundException异常。否则将这个找到的类生成一个类的定义，并将它加载到内存当中，最后返回这个类在内存中的Class实例对象。</p>\n<h2 id=\"六、为什么要使用双亲委托这种模型呢\"> 六、为什么要使用双亲委托这种模型呢？</h2>\n<p>因为这样可以避免重复加载，当父亲已经加载了该类的时候，就没有必要子ClassLoader再加载一次。考虑到安全因素，我们试想一下，如果不使用这种委托模式，那我们就可以随时使用自定义的String来动态替代java核心api中定义的类型，这样会存在非常大的安全隐患，而双亲委托的方式，就可以避免这种情况，因为String已经在启动时就被引导类加载器（Bootstrcp ClassLoader）加载，所以用户自定义的ClassLoader永远也无法加载一个自己写的String，除非你改变JDK中ClassLoader搜索类的默认算法。</p>\n<h2 id=\"七、但是jvm在搜索类的时候-又是如何判定两个class是相同的呢\"> 七、但是JVM在搜索类的时候，又是如何判定两个class是相同的呢？</h2>\n<p>JVM在判定两个class是否相同时，不仅要判断两个类名是否相同，而且要判断是否由同一个类加载器实例加载的。只有两者同时满足的情况下，JVM才认为这两个class是相同的。就算两个class是同一份class字节码，如果被两个不同的ClassLoader实例所加载，JVM也会认为它们是两个不同class。</p>\n<div><pre><code> /**\n         * rt目录:\n         * 加载rt.jar的类加载器\n         */\n        ClassLoader rtClassLoader = StringBuffer.class.getClassLoader();\n        System.out.println(rtClassLoader);\n\n        /**\n         * lib/ext扩展包\n         * sun.misc.Launcher$ExtClassLoader@67b6d4ae\n         */\n        ClassLoader extClassLoader = EventID.class.getClassLoader();\n        System.out.println(extClassLoader);\n\n        /**\n         * 当前应用加载器\n         * sun.misc.Launcher$AppClassLoader@33909752\n         */\n        ClassLoader classLoader = BaseSyntaxTest.class.getClassLoader();\n        System.out.println(classLoader);\n\n        /**\n         * sun.misc.Launcher$AppClassLoader@33909752\n         */\n        ClassLoader currentClassLoader = Thread.currentThread().getContextClassLoader();\n        System.out.println(currentClassLoader);\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br></div></div><p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1589811713000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "成熟的线程要懂得拒绝",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E6%8B%92%E7%BB%9D%E7%AD%96%E7%95%A5/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E6%8B%92%E7%BB%9D%E7%AD%96%E7%95%A5/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h1 id=\"拒绝策略\"> 拒绝策略</h1>\n<p><strong>拒绝策略就是任务实在是已经执行不了，那么就需要你告诉程序，怎么样去拒绝在执行其他任务</strong></p>\n<p>在实际开发场景中，基本使用JDK自带的策略就可以完成日常开发，但是作为程序员必须要知道。下面说一下JDK自带有哪些线程策略</p>\n<div><pre><code><span>public</span> <span>interface</span> <span>RejectedExecutionHandler</span> <span>{</span>\n    <span>void</span> <span>rejectedExecution</span><span>(</span><span>Runnable</span> r<span>,</span> <span>ThreadPoolExecutor</span> executor<span>)</span><span>;</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h1 id=\"四种拒绝策略\"> 四种拒绝策略</h1>\n<blockquote>\n<p>ThreadPoolExecutor类里面是内置了4中拒绝策略，我们一个一个来分析</p>\n</blockquote>\n<h2 id=\"_1-callerrunspolicy\"> 1. CallerRunsPolicy</h2>\n<p>直接执行该任务，如果线程池已经关闭，就不运行</p>\n<div><pre><code>    <span>public</span> <span>static</span> <span>class</span> <span>CallerRunsPolicy</span> <span>implements</span> <span>RejectedExecutionHandler</span> <span>{</span>\n        <span>public</span> <span>CallerRunsPolicy</span><span>(</span><span>)</span> <span>{</span> <span>}</span>\n        <span>public</span> <span>void</span> <span>rejectedExecution</span><span>(</span><span>Runnable</span> r<span>,</span> <span>ThreadPoolExecutor</span> e<span>)</span> <span>{</span>\n            <span>if</span> <span>(</span><span>!</span>e<span>.</span><span>isShutdown</span><span>(</span><span>)</span><span>)</span> <span>{</span>\n                r<span>.</span><span>run</span><span>(</span><span>)</span><span>;</span>\n            <span>}</span>\n        <span>}</span>\n    <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h2 id=\"_2-abortpolicy-【默认策略】\"> 2. AbortPolicy 【默认策略】</h2>\n<p>直接报异常，简单粗暴</p>\n<div><pre><code><span>public</span> <span>static</span> <span>class</span> <span>AbortPolicy</span> <span>implements</span> <span>RejectedExecutionHandler</span> <span>{</span>\n        <span>public</span> <span>AbortPolicy</span><span>(</span><span>)</span> <span>{</span> <span>}</span>\n        <span>public</span> <span>void</span> <span>rejectedExecution</span><span>(</span><span>Runnable</span> r<span>,</span> <span>ThreadPoolExecutor</span> e<span>)</span> <span>{</span>\n            <span>throw</span> <span>new</span> <span>RejectedExecutionException</span><span>(</span><span>\"Task \"</span> <span>+</span> r<span>.</span><span>toString</span><span>(</span><span>)</span> <span>+</span>\n                                                 <span>\" rejected from \"</span> <span>+</span>\n                                                 e<span>.</span><span>toString</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        <span>}</span>\n    <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h2 id=\"_3-discardpolicy\"> 3. DiscardPolicy</h2>\n<p>直接丢弃，不记录任何信息</p>\n<div><pre><code> <span>public</span> <span>static</span> <span>class</span> <span>DiscardPolicy</span> <span>implements</span> <span>RejectedExecutionHandler</span> <span>{</span>\n        <span>public</span> <span>DiscardPolicy</span><span>(</span><span>)</span> <span>{</span> <span>}</span>\n        <span>public</span> <span>void</span> <span>rejectedExecution</span><span>(</span><span>Runnable</span> r<span>,</span> <span>ThreadPoolExecutor</span> e<span>)</span> <span>{</span>\n        <span>}</span>\n    <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h2 id=\"_4-discardoldestpolicy\"> 4. DiscardOldestPolicy</h2>\n<p>丢弃一个老任务，然后执行当前任务</p>\n<div><pre><code><span>public</span> <span>static</span> <span>class</span> <span>DiscardOldestPolicy</span> <span>implements</span> <span>RejectedExecutionHandler</span> <span>{</span>\n        <span>public</span> <span>DiscardOldestPolicy</span><span>(</span><span>)</span> <span>{</span> <span>}</span>\n        <span>public</span> <span>void</span> <span>rejectedExecution</span><span>(</span><span>Runnable</span> r<span>,</span> <span>ThreadPoolExecutor</span> e<span>)</span> <span>{</span>\n            <span>if</span> <span>(</span><span>!</span>e<span>.</span><span>isShutdown</span><span>(</span><span>)</span><span>)</span> <span>{</span>\n\t\t\t\t<span>// Retrieves and removes the head of this queue 移出最头任务，也就是老任务</span>\n                e<span>.</span><span>getQueue</span><span>(</span><span>)</span><span>.</span><span>poll</span><span>(</span><span>)</span><span>;</span>\n                e<span>.</span><span>execute</span><span>(</span>r<span>)</span><span>;</span>\n            <span>}</span>\n        <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><h1 id=\"分析\"> 分析</h1>\n<p>拒绝策略其实很简单，知己知彼百战百胜，在多线程多任务编程场景下，我们可以根据业务特性定义拒绝策略。\n比如，在任务满的情况将，任务放到数据库中，或者打印到特殊的日志中，用来恢复任务。</p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "SPI服务发现机制",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/SPI/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/SPI/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1590160192000.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h2 id=\"一、什么是spi\"> 一、什么是SPI</h2>\n<p>SPI ，全称为 Service Provider Interface，是一种服务发现机制。JDK中的SPI是通过在ClassPath路径下的META-INF/services文件夹查找扩展文件,自动加载文件里所定义的类。</p>\n<p>在小编的理解来,觉得它更是一种思想。即找到服务的接口, 美其名曰: 服务发现机制思想。很多开源框架都有借用这种思想，比如dubbo、jdbc。</p>\n<h2 id=\"二、spi在jdk中如何使用\"> 二、SPI在JDK中如何使用</h2>\n<p>SPI在JDK中,我们可以使用 <code>ServiceLoader</code> 类进行使用。\n<img src=\"https://img.springlearn.cn/blog/learn_1590225886000.png\" alt=\"\" /></p>\n<h3 id=\"_1-前提准备\"> 1. 前提准备</h3>\n<div><pre><code>public interface SpiService {\n    String say();\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>两个实现类</p>\n<div><pre><code>public class ASpiServiceImpl implements SpiService {\n    static {\n        System.out.println(&quot;static init a&quot;);\n    }\n\n    {\n        System.out.println(&quot;init a&quot;);\n    }\n\n    @Override\n    public String say() {\n        return &quot;A&quot;;\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><div><pre><code>public class BSpiServiceImpl implements SpiService {\n    static {\n        System.out.println(&quot;static init b&quot;);\n    }\n\n    {\n        System.out.println(&quot;init b&quot;);\n    }\n    @Override\n    public String say() {\n        return &quot;B&quot;;\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h3 id=\"_2-进行配置\"> 2. 进行配置</h3>\n<p>在resources中创建META-INF/services目录</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590225980000.png\" alt=\"\" /></p>\n<div><pre><code>│  └── resources\n│      └── META-INF\n│          └── services\n│              └── com.github.easylog.spi.SpiService\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>com.github.easylog.spi.SpiService文件内容</p>\n<div><pre><code>com.github.easylog.spi.impl.ASpiServiceImpl\ncom.github.easylog.spi.impl.BSpiServiceImpl\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><h3 id=\"_3-使用\"> 3. 使用</h3>\n<p>通过ServiceLoader类我们可以加载到所有配置的实现类,并对实现类进行处理。需要注意一点的是，看4使用注意。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590226089000.png\" alt=\"\" /></p>\n<div><pre><code>public class SpiTester {\n    public static void main(String[] args) {\n        ServiceLoader&lt;SpiService&gt; spiServices = ServiceLoader.load(SpiService.class);\n        Iterator&lt;SpiService&gt; iterator = spiServices.iterator();\n        while (iterator.hasNext()) {\n            SpiService next = iterator.next();\n            System.out.println(next.say());\n        }\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h3 id=\"_4-使用注意\"> 4. 使用注意</h3>\n<p>可以看下小编前面声明的两个实现类,都定义了静态代码块和非静态代码块。正常情况当这个字节码被加载,就会执行静态代码块里面的内容，但是实际运行时候却没有执行, 其实是有原因的。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590223793000.png\" alt=\"\" /></p>\n<p>可以看到第二个参数是false。即加载时候不进行初始化。</p>\n<h2 id=\"三、dubbo中服务发现思想\"> 三、Dubbo中服务发现思想</h2>\n<p>服务发现这种思想的特点是: 代码不是硬编码的方式,而是可配置的。只要将要支持的实现类放到指定配置文件下面,就会自动被加载起来了。然后代码中只关心使用即可。我们可以利用这种思想来实现, 框架的扩展,比如前面说了。Dubbo会利用SPI的思想进行，加载用户自定义的过滤器。</p>\n<p>这种思想特别适合做服务扩展。现在大多数开源框架中都会使用到这种思想。</p>\n<h3 id=\"_1-定义过滤器\"> 1. 定义过滤器</h3>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590226192000.png\" alt=\"\" /></p>\n<div><pre><code>@Activate(group = { Constants.PROVIDER })\npublic class ProviderHelloFilter implements Filter {\n  \n    @Override\n    public Result invoke(Invoker&lt;?&gt; invoker, Invocation invocation) throws RpcException {\n        System.out.pringln(&quot;hello ok!&quot;);\n        return invoker.invoke(invocation);\n    }\n\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h3 id=\"_2-添加配置文件\"> 2. 添加配置文件</h3>\n<p><code>META-INF/dubbo/Interal/com.alibaba.dubbo.rpc.Filter</code></p>\n<p>默认支持的过滤器</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590224576000.png\" alt=\"\" /></p>\n<p>利用SPI原理,我们自定义一个过滤器</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590224824000.png\" alt=\"\" /></p>\n<h3 id=\"_3-使用-2\"> 3. 使用</h3>\n<p>其实API跟JDK中使用ServiceLoader的方式,非常类同。唯一不同的是Dubbo中是使用ExtensionLoader。因为dubbo中做了一些特殊的增强处理。比如在配置文件中支持自定义一个别名key。如上图hello就是key。通过getExtension(&quot;hello&quot;)就能获取指定的实现类。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1590226285000.png\" alt=\"\" /></p>\n<div><pre><code>public class SpiTester {\n    public static void main(String[] args) throws Exception{\n        ExtensionLoader&lt;Filter&gt; filterExtensionLoader = ExtensionLoader.getExtensionLoader(Filter.class);\n        Set&lt;String&gt; supportedExtensions = filterExtensionLoader.getSupportedExtensions();\n        System.out.println(supportedExtensions);\n        //[accesslog, activelimit, cache...]\n        Filter hello = filterExtensionLoader.getExtension(&quot;hello&quot;);\n        //com.github.easylog.spi.ProviderHelloFilter@299a06ac\n        System.out.println(hello);\n    }\n    \n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p>**那么这种思想你学会了吗? **</p>\n<p><img src=\"https://i04piccdn.sogoucdn.com/96a6f7554ee28b9c\" alt=\"\" /></p>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1590160192000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "自定义布局",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/layout/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/layout/",
      "content_html": "<p>您可以使用带有 Markdown 支持的插槽来自定义页面布局。</p>\n<div><p>注意</p>\n<p>此处仅仅是一个演示，你应该自行根据需求添加样式。</p>\n\n\n</div>\n<template #page-top><p>页面顶部内容</p>\n</template><template #page-bottom><p>页面底部内容</p>\n</template><template #content-top><p>内容顶部内容</p>\n</template><template #content-bottom><p>内容底部内容</p>\n</template><template #navbar-start><p>导航栏起始内容</p>\n</template><template #navbar-center><p>导航栏中部内容</p>\n</template><template #navbar-end><p>导航栏末尾内容</p>\n</template><template #sidebar-top><p>侧边栏顶部内容</p>\n</template><template #sidebar-center><p>侧边栏中部内容</p>\n</template><template #sidebar-bottom><p>侧边栏底部内容</p>\n</template><p>更多详情，详见 <a href=\"https://vuepress-theme-hope.github.io/zh/guide/layout/custom/\" target=\"_blank\" rel=\"noopener noreferrer\">自定义布局</a>.</p>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "开个工厂造线程",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E7%BA%BF%E7%A8%8B%E5%B7%A5%E5%8E%82/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E7%BA%BF%E7%A8%8B%E5%B7%A5%E5%8E%82/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h1 id=\"线程工厂\"> 线程工厂</h1>\n<p>线程是Java里面很重要的一个概念，具体体现就是Thread这个类。我们平时最常用的创建线程就是在用Executors来创建线程池。在前面的章节\n也可以看到，创建线程池时候有一个入参就是线程工厂，ThreadFactory这个类。那么这个类具体有什么用呢? 其实就是为了统一在创建线程时设置一些参数，\n如是否守护线程。线程一些特性等，如优先级，名称。</p>\n<div><pre><code>\t<span>/**\n\t * @param threadFactory 线程工厂\n     */</span>\n      <span>public</span> <span>ThreadPoolExecutor</span><span>(</span><span>int</span> corePoolSize<span>,</span>\n                                 <span>int</span> maximumPoolSize<span>,</span>\n                                 <span>long</span> keepAliveTime<span>,</span>\n                                 <span>TimeUnit</span> unit<span>,</span>\n                                 <span>BlockingQueue</span><span><span>&lt;</span><span>Runnable</span><span>></span></span> workQueue<span>,</span>\n                                 <span>ThreadFactory</span> threadFactory<span>)</span> <span>{</span>\n           <span>this</span><span>(</span>corePoolSize<span>,</span> maximumPoolSize<span>,</span> keepAliveTime<span>,</span> unit<span>,</span> workQueue<span>,</span>\n                threadFactory<span>,</span> defaultHandler<span>)</span><span>;</span>\n       <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h1 id=\"自定义\"> 自定义</h1>\n<p>所谓线程工厂其实就是创建线程使用的。正常情况下我们创建线程是下面这样的。</p>\n<div><pre><code>  <span>Thread</span> ret <span>=</span> <span>new</span> <span>Thread</span><span>(</span>runnable<span>)</span><span>;</span>\n</code></pre>\n<div><span>1</span><br></div></div><p>但是线程的构造其实并不是只有一个,它有一个线程组的概念,另外也可以给每个线程去设置一个名字。这样的目的是可以通过名字就能辨认是什么线程在执行。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1599299678000.png\" alt=\"\" /></p>\n<p>那么我们就看下这里面怎么实现的,其实非常简单。</p>\n<div><pre><code><span>public</span> <span>class</span> <span>NamedThreadFactory</span> <span>implements</span> <span>ThreadFactory</span> <span>{</span>\n\n  <span>protected</span> <span>static</span> <span>final</span> <span>AtomicInteger</span> POOL_SEQ <span>=</span> <span>new</span> <span>AtomicInteger</span><span>(</span><span>1</span><span>)</span><span>;</span>\n\n  <span>protected</span> <span>final</span> <span>AtomicInteger</span> mThreadNum <span>=</span> <span>new</span> <span>AtomicInteger</span><span>(</span><span>1</span><span>)</span><span>;</span>\n\n  <span>protected</span> <span>final</span> <span>String</span> mPrefix<span>;</span>\n\n  <span>protected</span> <span>final</span> <span>boolean</span> mDaemon<span>;</span>\n\n  <span>protected</span> <span>final</span> <span>ThreadGroup</span> mGroup<span>;</span>\n\n  <span>public</span> <span>NamedThreadFactory</span><span>(</span><span>)</span> <span>{</span>\n    <span>this</span><span>(</span><span>\"pool-\"</span> <span>+</span> POOL_SEQ<span>.</span><span>getAndIncrement</span><span>(</span><span>)</span><span>,</span> <span>false</span><span>)</span><span>;</span>\n  <span>}</span>\n\n  <span>public</span> <span>NamedThreadFactory</span><span>(</span><span>String</span> prefix<span>)</span> <span>{</span>\n    <span>this</span><span>(</span>prefix<span>,</span> <span>false</span><span>)</span><span>;</span>\n  <span>}</span>\n\n  <span>public</span> <span>NamedThreadFactory</span><span>(</span><span>String</span> prefix<span>,</span> <span>boolean</span> daemon<span>)</span> <span>{</span>\n    mPrefix <span>=</span> prefix <span>+</span> <span>\"-thread-\"</span><span>;</span>\n    mDaemon <span>=</span> daemon<span>;</span>\n    <span>SecurityManager</span> s <span>=</span> <span>System</span><span>.</span><span>getSecurityManager</span><span>(</span><span>)</span><span>;</span>\n    mGroup <span>=</span> <span>(</span>s <span>==</span> <span>null</span><span>)</span> <span>?</span> <span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getThreadGroup</span><span>(</span><span>)</span> <span>:</span> s<span>.</span><span>getThreadGroup</span><span>(</span><span>)</span><span>;</span>\n  <span>}</span>\n\n  <span>@Override</span>\n  <span>public</span> <span>Thread</span> <span>newThread</span><span>(</span><span>Runnable</span> runnable<span>)</span> <span>{</span>\n    <span>//就是给线程创建了一个名字和指定了一个线程组</span>\n    <span>String</span> name <span>=</span> mPrefix <span>+</span> mThreadNum<span>.</span><span>getAndIncrement</span><span>(</span><span>)</span><span>;</span>\n    <span>Thread</span> ret <span>=</span> <span>new</span> <span>Thread</span><span>(</span>mGroup<span>,</span> runnable<span>,</span> name<span>,</span> <span>0</span><span>)</span><span>;</span>\n    ret<span>.</span><span>setDaemon</span><span>(</span>mDaemon<span>)</span><span>;</span>\n    <span>return</span> ret<span>;</span>\n  <span>}</span>\n\n  <span>public</span> <span>ThreadGroup</span> <span>getThreadGroup</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> mGroup<span>;</span>\n  <span>}</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div><p>如此而已,线程工厂就是这样。</p>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Java异常体系",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java2/Java%E5%BC%82%E5%B8%B8%E4%BD%93%E7%B3%BB/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java2/Java%E5%BC%82%E5%B8%B8%E4%BD%93%E7%B3%BB/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/blog/learn_1589293715000.png\" alt=\"\" /></p>\n<p>知己知彼方能百战不殆,在小编初学Java时候特别怕程序报异常,经常会因为异常不知所措,相信这个问题应该是所有\n初学者都会有的心理感受;如果你也有这种感受,那么只有一种解决方法:\n迎难而上,攻克Java异常体系,长痛不如短痛,只要清楚了Java的异常体系,就不会再有这种感受了。下面跟着小编来窥探Java的异常体系吧。</p>\n<h1 id=\"一、java异常体系其实很简单\"> 一、Java异常体系其实很简单</h1>\n<p>其实Java的异常体系是非常简单的,简单到只要你看过本文就能明白百分之八九十的样子。当你清楚了Java的异常体系\n那么在遇到项目执行异常的时候,基本看报错的异常就大概明白问题出在哪里,遇到的错误多了,就成长了,处理的问题就是\n你未来在技术路上所积累的财富。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589294764000.png\" alt=\"\" /></p>\n<p>在Java的异常体系中 <code>Throwable</code> 我们可以理解为是一个根异常,即所有的异常都是它的子类</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589295509000.png\" alt=\"\" /></p>\n<h1 id=\"二、error\"> 二、Error</h1>\n<p>前面我们说了Java的异常体系中 <code>Throwable</code> 可以理解是一个根异常,那么 <code>Error</code> 就是这个根节点的一个子节点。\n<code>Error</code> 类对象由 <code>Java</code> 虚拟机生成并抛出，大多数错误与代码编写者所执行的操作无关。程序无法处理的异常，一般伴随者jvm虚拟机停止，或者断电之类\n这种问题，是无法通过程序来解决的。</p>\n<p><strong>这种异常基本很少,如果遇到也不要慌,跟你的业务逻辑没有关系,顶多是Java代码写的有问题,只要不是业务问题其实大多都能先通过重启解决;\n但是假如项目还未上线,只是在开发过程中出现这种问题一定要弄清楚原因,是那一部分代码编写异常导致的,否则上线可能有重大隐患</strong></p>\n<p><strong>经验教学:</strong></p>\n<ol>\n<li>如果是在项目系统过程中遇到这种问题,可能是因为Jar包冲突导致的。</li>\n<li>如果是在项目运行过程中遇到这种问题,可能是因为对象创建过多没有释放,导致堆栈溢出。这个时候就要看GC是否频繁,然后对堆栈日志进行分析,看存在最多的对象是哪一个,然后分析代码解决。</li>\n</ol>\n<h1 id=\"三、exception\"> 三、Exception</h1>\n<p><code>Exception</code> 异常时我们平时在开发中遇到最多，其实 <code>Exception</code> 也分为两种即:</p>\n<ol>\n<li><code>checkException</code> 编译异常，这种异常，是哪些没有遵守java语言规则，容易看出和解决的</li>\n<li><code>uncheckException</code> 运行异常，运行异常，具有不确定性，往往难以排查，包括处理逻辑问题。</li>\n</ol>\n<p>然而 <code>checkException</code> 和 <code>uncheckException</code> 其实只是一个概念,并没有对应的 <code>Java异常类</code>。我们基本可以忽略\n<code>checkException</code> 因为这种异常基本现在的编译器都会给我们做了，我们在写代码时候就会实时的给我提示错误了。我们\n只用关心 <code>uncheckException</code>即可。</p>\n<p><strong>uncheckException</strong></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589297073000.png\" alt=\"\" /></p>\n<p><code>RuntimeException</code> + <code>Error</code> 和其子类都是属于 <code>uncheckException</code></p>\n<p>前面我们已经对 <code>Error</code> 做了说明，现在就主要来看下 <code>RuntimeException</code>。 <code>RuntimeException</code> 从名字来看就是\n运行异常,所谓运行异常就是可能在程序运行过程中发生的异常,这种异常一般是可以通过代码逻辑进行处理的。\n我们举例一个例子,我们都知道0不能作为除数。但是假如在下面这个代码中</p>\n<div><pre><code>public class Tester {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;请输入被除数a:&quot;);\n        int a = sc.nextInt();\n        System.out.print(&quot;请输入除数b:&quot;);\n        int b = sc.nextInt();\n        System.out.println(&quot;a/b=&quot; + a / b);\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><p>当输入a=8,b=2,那么结果就是4。</p>\n<p><img src=\"https://i02piccdn.sogoucdn.com/8206a4441e0386c3\" alt=\"\" /></p>\n<p><strong>假如我们输入b=0呢?</strong></p>\n<p>学过数学都知道0不能做除数,程序也不运行你这么输入,但是却不能阻止你,只能通过报错的方式来告诉你。</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589298143000.png\" alt=\"\" /></p>\n<p>那么我们就要对这个异常进行处理,当发现有这个异常就在控制台来提醒用户。那么代码就会变成这样</p>\n<div><pre><code>public class Tester {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;请输入被除数a:&quot;);\n        int a = sc.nextInt();\n        System.out.print(&quot;请输入除数b:&quot;);\n        int b = sc.nextInt();\n        try {\n            System.out.println(&quot;a/b=&quot; + a / b);\n        } catch (ArithmeticException ate) {\n            //对算术异常进行捕捉\n            System.err.println(&quot;0不能作为除数,请输入不为0的任意数&quot;);\n        }\n    }\n}\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p>当出现算术异常直接提示: &quot;0不能作为除数,请输入不为0的任意数&quot;\n<img src=\"https://img.springlearn.cn/blog/learn_1589298261000.png\" alt=\"\" /></p>\n<p>那么像这种程序中无可避免会出现,且又能通过逻辑来处理的异常就是运行异常。运行异常一般都可以正常运行,只是在特定情况下会导致异常发生。\n像这面这个例子,我们只要看到 <code>ArithmeticException</code> 就知道是算术异常。所以只要我们对运行异常类有一个认识，其实就能解决大多数的程序问题了。\n下面我们来看下运行异常都要有哪些类把。</p>\n<p><img src=\"https://i03piccdn.sogoucdn.com/f960e6a461d218d2\" alt=\"\" /></p>\n<p><strong>只要对下面运行异常类进行熟悉了,基本就清楚掌握了Java的异常体系了</strong></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589299119000.png\" alt=\"\" /></p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589299523000.png\" alt=\"\" /></p>\n<p>以上就是常见的运行异常类,当然Java中还有很多不常见的异常类。剩下的我们就可以在日常工作中去学习了。</p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1589293715000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "给线程归归类",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E7%BA%BF%E7%A8%8B%E7%BB%84/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E7%BA%BF%E7%A8%8B%E7%BB%84/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<h1 id=\"线程组\"> 线程组</h1>\n<p>可以把线程归属到某一个线程组中，线程组中可以有线程对象，也可以有线程组，组中还可以有线程，这样的组织结构有点类似于树的形式，如图所示.</p>\n<p>线程组的作用是：可以批量管理线程或线程组对象，有效地对线程或线程组对象进行组织\n<img src=\"https://img.springlearn.cn/blog/learn_1599301362000.png\" alt=\"\" /></p>\n<p>线程组提供对组内的线程的管理能力,如我们可以用一个线程组里面的线程去执行任务,任何一个任务失败,就把所有组内的线程都给中断。</p>\n<div><pre><code><span>public</span> <span>class</span> <span>MThreadGroup</span> <span>extends</span> <span>ThreadGroup</span> <span>{</span>\n    <span>public</span> <span>MThreadGroup</span><span>(</span><span>String</span> s<span>)</span> <span>{</span>\n        <span>super</span><span>(</span>s<span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>public</span> <span>MThreadGroup</span><span>(</span><span>ThreadGroup</span> threadGroup<span>,</span> <span>String</span> s<span>)</span> <span>{</span>\n        <span>super</span><span>(</span>threadGroup<span>,</span> s<span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>@Override</span>\n    <span>public</span> <span>void</span> <span>uncaughtException</span><span>(</span><span>Thread</span> thread<span>,</span> <span>Throwable</span> throwable<span>)</span> <span>{</span>\n        <span>//任何一个线程异常就讲所有组内的线程中断</span>\n        thread<span>.</span><span>getThreadGroup</span><span>(</span><span>)</span><span>.</span><span>interrupt</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div>",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "hehe",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java2/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java2/",
      "content_html": "<h1 id=\"hehe\"> hehe</h1>\n",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "函数式编程",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java2/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java2/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/",
      "content_html": "<div><p>提示</p>\n<p>Java8所有的新特性基本基于函数式编程的思想，函数式编程给Java带来了注入了新鲜的活力。\n函数式编程其实并不是很难，小编在学习函数式编程时候刚开始一头雾水，最后仔细观察就发现了其中的小窍门，读了本篇文章如果还没有掌握，就算我输了\n加我微信: lxchinesszz 找我一对一教学</p>\n</div>\n<h1 id=\"函数式编程\"> 函数式编程</h1>\n<h2 id=\"一、lambda表达式\"> 一、Lambda表达式</h2>\n<p><strong>注意</strong>: 以下方法都可以使用表达式来进行缩写</p>\n<p>我们来看Java中如何来定义一个方法</p>\n<h3 id=\"_1-语法\"> 1. 语法</h3>\n<p><code>()-&gt;{}</code></p>\n<p>其中小括号里面可以放入参，大括号就是方法体，里面也允许有返回值。</p>\n<p><strong>当方法体中只有返回值而没有其他语句时候，大括号和 <code>return</code> 关键字都可以省略不写。</strong></p>\n<h3 id=\"_2-方法引用\"> 2. 方法引用</h3>\n<p><em>只要用.引用不报错的，都可以将.换成:</em></p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>语法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1、引用静态方法</td>\n<td>ClassName::staticMethodName</td>\n</tr>\n<tr>\n<td>2、引用构造函数</td>\n<td>ClassName::new</td>\n</tr>\n<tr>\n<td>3、引用特定类型的实例方法</td>\n<td>ClassName::instanceMethodName</td>\n</tr>\n<tr>\n<td>4、引用特定对象的实例方法</td>\n<td>objectName::instanceMethodName</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"二、java8新增函数式接口\"> 二、Java8新增函数式接口</h2>\n<h3 id=\"_1-predicate接口\"> 1. Predicate接口</h3>\n<p>Predicate 接口只有一个参数，返回boolean类型。该接口包含多种默认方法来将Predicate组合成其他复杂的逻辑（比如：与，或，非）</p>\n<div><pre><code>Predicate&lt;String&gt; predicate = (s) -&gt; s.length() &gt; 0;\n</code></pre>\n<div><span>1</span><br></div></div><p>根据前面的语法我们知道小括号里面可以放入参，大括号里面放出参，当大括号里面只有返回值时候，大括号和 <code>return</code> 关键字也可以省略。如上。</p>\n<h3 id=\"_2-function-接口\"> 2. Function 接口</h3>\n<p>Function 接口有一个参数并且返回一个结果，并附带了一些可以和其他函数组合的默认方法（compose, andThen）：</p>\n<div><pre><code>Function&lt;Integer, Integer&gt; function = (x) -&gt; 2 * x;\n</code></pre>\n<div><span>1</span><br></div></div><p>同理，这个接口有一个入参和出参，如果返回体重不包含其他逻辑，只有一个返回值，大括号和 <code>return</code> 关键字也可以省略。如上。</p>\n<h3 id=\"_3-supplier-接口\"> 3. Supplier 接口</h3>\n<p>Supplier 接口返回一个任意范型的值，和Function接口不同的是该接口没有任何参数</p>\n<div><pre><code>public class Main{\n    public static void main(String[] args) {\n        //构造方法\n        Supplier&lt;Main&gt; supplier = () -&gt; new Main();\n        Supplier&lt;Main&gt; mainSupplier = Main::new;\n        Supplier&lt;Main&gt; mainSupplier1 = Main::staticMethod;\n    }\n    private static Main staticMethod() {\n        return new Main();\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>因为没有入参，所以小括号里面什么都不用写。当遇到这种情况，同样可以用上面其他两种来替换</p>\n<h3 id=\"_4-consumer-接口\"> 4. Consumer 接口</h3>\n<p>Consumer 是一个只有入参，但是无出参的接口。</p>\n<div><pre><code>public class Main {\n    public static void main(String[] args) {\n        List&lt;String&gt; dataList = Arrays.asList(&quot;1&quot;, &quot;2&quot;);\n\n        //特定类的静态方法\n        dataList.forEach(Main::staticMethod);\n        dataList.forEach((x) -&gt; System.out.println(x));\n        dataList.forEach(System.out::println);\n\n    }\n    private static void staticMethod(String name) {\n        System.out.println(&quot;对象静态方法引用:&quot; + name);\n    }\n}\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><h2 id=\"三、快速记忆\"> 三、快速记忆</h2>\n<p>虽然新增的函数式接口并不多，但是想要一次性死记住，还是有一点点的难度。小编的学习方式是\n理解这记忆。</p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>简记</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1、Predicate</td>\n<td>条件类型</td>\n</tr>\n<tr>\n<td>2、Supplier</td>\n<td>无入参，有出参</td>\n</tr>\n<tr>\n<td>3、Function</td>\n<td>有入参，有出参</td>\n</tr>\n<tr>\n<td>4、Consumer</td>\n<td>有入参，无出参</td>\n</tr>\n</tbody>\n</table>\n<p>最后求关注,求订阅,谢谢你的阅读!</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1589360371000.png\" alt=\"\" /></p>\n",
      "image": "https://img.springlearn.cn/blog/learn_1589360371000.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2021-12-25T09:26:08.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "线程池扫盲",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E7%BA%BF%E7%A8%8B%E6%B1%A0/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/java/%E7%BA%BF%E7%A8%8B%E6%B1%A0/",
      "content_html": "<p><img src=\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\" alt=\"\" /></p>\n<p><strong>作者</strong>: 西魏陶渊明\n<strong>博客</strong>: <a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.springlearn.cn/</a></p>\n<div><p>西魏陶渊明</p>\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\n</div>\n<blockquote>\n<p>[!TIP]\n本篇文章通读时间大概3分钟,希望在三分钟内的讲解，对你有所帮助，\n一定要认真看并思考，好了。废话不多数，直接上干货,本节内容我们讲\n的是Java的线程池,在讲之前我们首先看一下有哪些线程池，这些线程池\n我们不过多讲解,因为我们的关注点是他们是如何实现的,和其运行的原理。</p>\n</blockquote>\n<h1 id=\"一、常用线程池列表\"> 一、常用线程池列表</h1>\n<p>这部分内容,只是帮助你回顾一下线程池的知识，大家重点看方法内的实现</p>\n<p>1、构造一个固定线程数目的线程池，配置的corePoolSize与maximumPoolSize大小相同，同时使用了一个无界LinkedBlockingQueue存放阻塞任务，因此多余的任务将存在再阻塞队列，不会由RejectedExecutionHandler处理</p>\n<div><pre><code>    <span>public</span> <span>static</span> <span>ExecutorService</span> <span>newFixedThreadPool</span><span>(</span><span>int</span> nThreads<span>)</span> <span>{</span>\n        <span>return</span> <span>new</span> <span>ThreadPoolExecutor</span><span>(</span>nThreads<span>,</span> nThreads<span>,</span>\n                                      <span>0L</span><span>,</span> <span>TimeUnit</span><span>.</span>MILLISECONDS<span>,</span>\n                                      <span>new</span> <span>LinkedBlockingQueue</span><span><span>&lt;</span><span>Runnable</span><span>></span></span><span>(</span><span>)</span><span>)</span><span>;</span>\n    <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>2、构造一个缓冲功能的线程池，配置corePoolSize=0，maximumPoolSize=Integer.MAX_VALUE，keepAliveTime=60s,以及一个无容量的阻塞队列 SynchronousQueue，因此任务提交之后，将会创建新的线程执行；线程空闲超过60s将会销毁</p>\n<div><pre><code>    <span>public</span> <span>static</span> <span>ExecutorService</span> <span>newCachedThreadPool</span><span>(</span><span>)</span> <span>{</span>\n        <span>return</span> <span>new</span> <span>ThreadPoolExecutor</span><span>(</span><span>0</span><span>,</span> <span>Integer</span><span>.</span>MAX_VALUE<span>,</span>\n                                      <span>60L</span><span>,</span> <span>TimeUnit</span><span>.</span>SECONDS<span>,</span>\n                                      <span>new</span> <span>SynchronousQueue</span><span><span>&lt;</span><span>Runnable</span><span>></span></span><span>(</span><span>)</span><span>)</span><span>;</span>\n    <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>3、构造一个只支持一个线程的线程池，配置corePoolSize=maximumPoolSize=1，无界阻塞队列LinkedBlockingQueue；保证任务由一个线程串行执行</p>\n<div><pre><code>    <span>public</span> <span>static</span> <span>ExecutorService</span> <span>newSingleThreadExecutor</span><span>(</span><span>)</span> <span>{</span>\n        <span>return</span> <span>new</span> <span>FinalizableDelegatedExecutorService</span>\n            <span>(</span><span>new</span> <span>ThreadPoolExecutor</span><span>(</span><span>1</span><span>,</span> <span>1</span><span>,</span>\n                                    <span>0L</span><span>,</span> <span>TimeUnit</span><span>.</span>MILLISECONDS<span>,</span>\n                                    <span>new</span> <span>LinkedBlockingQueue</span><span><span>&lt;</span><span>Runnable</span><span>></span></span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>\n    <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>4、构造有定时功能的线程池，配置corePoolSize，无界延迟阻塞队列DelayedWorkQueue；有意思的是：maximumPoolSize=Integer.MAX_VALUE，由于DelayedWorkQueue是无界队列，所以这个值是没有意义的</p>\n<div><pre><code>    <span>/**\n     * Creates a thread pool that can schedule commands to run after a\n     * given delay, or to execute periodically.\n     * @param corePoolSize the number of threads to keep in the pool,\n     * even if they are idle\n     * @return a newly created scheduled thread pool\n     * @throws IllegalArgumentException if {@code corePoolSize &lt; 0}\n     */</span>\n    <span>public</span> <span>static</span> <span>ScheduledExecutorService</span> <span>newScheduledThreadPool</span><span>(</span><span>int</span> corePoolSize<span>)</span> <span>{</span>\n        <span>return</span> <span>new</span> <span>ScheduledThreadPoolExecutor</span><span>(</span>corePoolSize<span>)</span><span>;</span>\n    <span>}</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h1 id=\"二、threadpoolexecutor\"> 二、ThreadPoolExecutor</h1>\n<p>相信大家从上面的众多线程池中都已经看到了这个类,因为上面的线程池底层的构造都是由这个类创建的,</p>\n<p>那么我们就开始研究这个类</p>\n<div><pre><code><span>/**\n * @since 1.5\n * @author Doug Lea\n */</span>\n<span>public</span> <span>class</span> <span>ThreadPoolExecutor</span> <span>extends</span> <span>AbstractExecutorService</span> <span>{</span>\n\t<span>.</span><span>.</span><span>.</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>首先看一下构造方法，关于注释一定要好好看，每个参数都理解了，那么你就弄懂了</p>\n<div><pre><code>\n<span>/**\n     *\n     * @param corePoolSize 核心线程池大小\n     * @param maximumPoolSize 线程池最大容量\n     * @param keepAliveTime 线程池空闲时，线程存活时间\n     * @param unit 时间单位\n     * @param workQueue 工作队列\n\t * @param threadFactory 线程工厂\n     * @throws IllegalArgumentException if one of the following holds:&lt;br>\n     *         {@code corePoolSize &lt; 0}&lt;br>\n     *         {@code keepAliveTime &lt; 0}&lt;br>\n     *         {@code maximumPoolSize &lt;= 0}&lt;br>\n     *         {@code maximumPoolSize &lt; corePoolSize}\n     * @throws NullPointerException if {@code workQueue} is null\n     */</span>\n      <span>public</span> <span>ThreadPoolExecutor</span><span>(</span><span>int</span> corePoolSize<span>,</span>\n                                 <span>int</span> maximumPoolSize<span>,</span>\n                                 <span>long</span> keepAliveTime<span>,</span>\n                                 <span>TimeUnit</span> unit<span>,</span>\n                                 <span>BlockingQueue</span><span><span>&lt;</span><span>Runnable</span><span>></span></span> workQueue<span>,</span>\n                                 <span>ThreadFactory</span> threadFactory<span>)</span> <span>{</span>\n           <span>this</span><span>(</span>corePoolSize<span>,</span> maximumPoolSize<span>,</span> keepAliveTime<span>,</span> unit<span>,</span> workQueue<span>,</span>\n                threadFactory<span>,</span> defaultHandler<span>)</span><span>;</span>\n       <span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div><h1 id=\"三、构造参数详解\"> 三、构造参数详解</h1>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>corePoolSize</td>\n<td>核心的线程数</td>\n</tr>\n<tr>\n<td>maximumPoolSize</td>\n<td>最大线程池就是说你定义的线程池运行创建的最大线程数量</td>\n</tr>\n<tr>\n<td>keepAliveTime</td>\n<td>空闲时间回收，当这个时间后还没有任务执行就将线程回收</td>\n</tr>\n<tr>\n<td>unit</td>\n<td>单位,控制上面时间的单位，可以为秒，或者分钟</td>\n</tr>\n<tr>\n<td>workQueue</td>\n<td>核心线程都已经去执行任务但是，任务还有，那么久先放到这个队列里，就相当于集合</td>\n</tr>\n<tr>\n<td>threadFactory</td>\n<td>创建线程用户的线程工厂,里面只有一个方法就是newThread，你可以自定义线程名</td>\n</tr>\n</tbody>\n</table>\n<p><font color=red>上面的文字可能你看的不太明白，小编这里画了一个图，大家仔细看看 </font></p>\n<p>这张图是小编之前画的，但是头条压缩了，导致图不太清楚，大家看到字就行了</p>\n<p><img src=\"https://img.springlearn.cn/blog/learn_1640316132000.png\" alt=\"\" /></p>\n<h2 id=\"_1-执行顺序\"> 1. 执行顺序</h2>\n<ol>\n<li>首先交给核心线程数来执行corePoolSize</li>\n<li>如果核心都用完了，就放到workQueue队列里面</li>\n<li>当队列和核心线程数都满了，就继续创建线程，直到等于maximumPoolSize为止</li>\n<li>当任务已经塞不下了，就开始执行拒绝策略(下一篇讲)</li>\n</ol>\n",
      "image": "https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",
      "date_published": "2021-12-25T09:26:08.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "maven-surefire-plugin",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/maven-surefire-plugin/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/maven-surefire-plugin/",
      "content_html": "<blockquote>\n<p>maven-surefire-plugin</p>\n</blockquote>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Maven基础入门",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/",
      "content_html": "<blockquote>\n<p>Maven 翻译为&quot;专家&quot;、&quot;内行&quot;，是 Apache 下的一个纯 Java 开发的开源项目。基于项目对象模型（缩写：POM）概念，Maven利用一个中央信息片断能管理一个项目的构建、报告和文档等步骤。\nMaven 是一个项目管理工具，可以对 Java 项目进行构建、依赖管理。\nMaven 也可被用于构建和管理各种项目，例如 C#，Ruby，Scala 和其他语言编写的项目。Maven 曾是 Jakarta 项目的子项目，现为由 Apache 软件基金会主持的独立 Apache 项目。</p>\n</blockquote>\n<h2 id=\"maven-默认插件\"> Maven 默认插件</h2>\n<p>已知 Maven 使用 plugin 来执行实际操作的，在默认情况下，Maven 会绑定以下几个插件来完成基本操作。</p>\n<table>\n<thead>\n<tr>\n<th>plugin</th>\n<th>function</th>\n<th>life cycle phase</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>maven-clean-plugin</td>\n<td>清理上一次执行创建的目标文件</td>\n<td>clean</td>\n</tr>\n<tr>\n<td>maven-resources-plugin</td>\n<td>处理源资源文件和测试资源文件</td>\n<td>resources,testResources</td>\n</tr>\n<tr>\n<td>maven-compiler-plugin</td>\n<td>编译源文件和测试源文件</td>\n<td>compile,testCompile</td>\n</tr>\n<tr>\n<td>maven-surefire-plugin</td>\n<td>执行测试文件</td>\n<td>test</td>\n</tr>\n<tr>\n<td>maven-jar-plugin</td>\n<td>创建 jar</td>\n<td>jar</td>\n</tr>\n<tr>\n<td>maven-install-plugin</td>\n<td>安装 jar，将创建生成的 jar 拷贝到 .m2/repository 下面</td>\n<td>install</td>\n</tr>\n<tr>\n<td>maven-deploy-plugin</td>\n<td>发布 jar</td>\n<td>deploy</td>\n</tr>\n</tbody>\n</table>\n<p>如果针对各个 plugin 有特殊配置的话，需要显示指定 plugin 和 属性配置。</p>\n<h2 id=\"maven-生命周期\"> Maven 生命周期</h2>\n<blockquote>\n<p>官网地址: http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html</p>\n</blockquote>\n<p>下面列出了default,clean和site生命周期的所有构建阶段，它们按照指定的时间点之前的顺序执行。</p>\n<p><code>mvn test -X</code> 查看debug日志</p>\n<div><pre><code>[DEBUG] Lifecycle clean -&gt; [pre-clean, clean, post-clean]\n[DEBUG] Lifecycle site -&gt; [pre-site, site, post-site, site-deploy]\n[DEBUG] Lifecycle default -&gt; [validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy]\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"default生命周期\"> default生命周期</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">阶段</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>validate</code></td>\n<td style=\"text-align:left\">验证项目是否正确并且所有必要的信息都可用。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>initialize</code></td>\n<td style=\"text-align:left\">初始化构建状态，例如设置属性或创建目录。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>generate-sources</code></td>\n<td style=\"text-align:left\">生成包含在编译中的任何源代码。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>process-sources</code></td>\n<td style=\"text-align:left\">处理源代码，例如过滤任何值。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>generate-resources</code></td>\n<td style=\"text-align:left\">生成包含在包中的资源。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>process-resources</code></td>\n<td style=\"text-align:left\">将资源复制并处理到目标目录中，准备打包。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>compile</code></td>\n<td style=\"text-align:left\">编译项目的源代码。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>process-classes</code></td>\n<td style=\"text-align:left\">对编译生成的文件进行后处理，例如对 Java 类进行字节码增强。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>generate-test-sources</code></td>\n<td style=\"text-align:left\">生成任何测试源代码以包含在编译中。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>process-test-sources</code></td>\n<td style=\"text-align:left\">处理测试源代码，例如过滤任何值。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>generate-test-resources</code></td>\n<td style=\"text-align:left\">创建用于测试的资源。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>process-test-resources</code></td>\n<td style=\"text-align:left\">将资源复制并处理到测试目标目录中。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>test-compile</code></td>\n<td style=\"text-align:left\">将测试源代码编译到测试目标目录中</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>process-test-classes</code></td>\n<td style=\"text-align:left\">对测试编译生成的文件进行后处理，例如对 Java 类进行字节码增强。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>test</code></td>\n<td style=\"text-align:left\">使用合适的单元测试框架运行测试。这些测试不应该要求打包或部署代码。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>prepare-package</code></td>\n<td style=\"text-align:left\">在实际包装之前执行准备包装所需的任何操作。这通常会导致包的解压缩、处理版本。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>package</code></td>\n<td style=\"text-align:left\">获取编译后的代码并将其打包为其可分发格式，例如 JAR。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>pre-integration-test</code></td>\n<td style=\"text-align:left\">在执行集成测试之前执行所需的操作。这可能涉及诸如设置所需环境之类的事情。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>integration-test</code></td>\n<td style=\"text-align:left\">如有必要，处理并部署包到可以运行集成测试的环境中。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>post-integration-test</code></td>\n<td style=\"text-align:left\">执行集成测试后执行所需的操作。这可能包括清理环境。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>verify</code></td>\n<td style=\"text-align:left\">运行任何检查以验证包裹是否有效并符合质量标准。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>install</code></td>\n<td style=\"text-align:left\">将包安装到本地存储库中，用作本地其他项目的依赖项。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>deploy</code></td>\n<td style=\"text-align:left\">在集成或发布环境中完成，将最终包复制到远程存储库以与其他开发人员和项目共享。</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"site生命周期\"> site生命周期</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">阶段</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>pre-site</code></td>\n<td style=\"text-align:left\">在实际项目现场生成之前执行所需的流程</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>site</code></td>\n<td style=\"text-align:left\">生成项目的站点文档</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>post-site</code></td>\n<td style=\"text-align:left\">执行完成站点生成和准备站点部署所需的流程</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>site-deploy</code></td>\n<td style=\"text-align:left\">将生成的站点文档部署到指定的 Web 服务器</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"clean生命周期\"> clean生命周期</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">阶段</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>pre-clean</code></td>\n<td style=\"text-align:left\">在实际项目清理之前执行所需的流程</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>clean</code></td>\n<td style=\"text-align:left\">删除先前构建生成的所有文件</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>post-clean</code></td>\n<td style=\"text-align:left\">执行完成项目清理所需的流程</td>\n</tr>\n</tbody>\n</table>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Get新技能,Java实现文件监控",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/java-watch-file/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/java-watch-file/",
      "content_html": "<p><strong>作者: 八阿哥的剑</strong></p>\n<p><em>博客: https://springlearn.cn</em></p>\n<div><p>一日一句毒鸡汤</p>\n<p>问世间钱为何物，只叫人生死相许。！😄</p>\n</div>\n<h2 id=\"java原生版本监控\"> Java原生版本监控</h2>\n<div><pre><code><span>public</span> <span>class</span> <span>JavaWatchAPI</span> <span>{</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>//第一步：取得WatchService</span>\n        <span>WatchService</span> watchService <span>=</span> <span>FileSystems</span><span>.</span><span>getDefault</span><span>(</span><span>)</span><span>.</span><span>newWatchService</span><span>(</span><span>)</span><span>;</span>\n        <span>//第二步：确定要监控的路径</span>\n        <span>Path</span> path <span>=</span> <span>Paths</span><span>.</span><span>get</span><span>(</span><span>\"/Users/liuxin/Github/nobug-learn-project/nobug-learn-01/src/main/java\"</span><span>)</span><span>;</span>\n\n        <span>//第三步：为本路径绑定WatchService，并确定监控的事件</span>\n        path<span>.</span><span>register</span><span>(</span>\n                watchService<span>,</span>\n                <span>// StandardWatchEventKinds.ENTRY_CREATE—当有新文件时触发。可能是创建了一个新文件</span>\n                <span>StandardWatchEventKinds</span><span>.</span>ENTRY_CREATE<span>,</span>\n                <span>// StandardWatchEventKinds.ENTRY_DELETE—当文件被删除、移动或重命名时触发</span>\n                <span>StandardWatchEventKinds</span><span>.</span>ENTRY_DELETE<span>,</span>\n                <span>// StandardWatchEventKinds.ENTRY_MODIFY—当文件被修改时触发。</span>\n                <span>StandardWatchEventKinds</span><span>.</span>ENTRY_MODIFY<span>)</span><span>;</span>\n        <span>// StandardWatchEventKinds.OVERFLOW—触发表示丢失或丢弃的事件。</span>\n        <span>WatchKey</span> key <span>=</span> <span>null</span><span>;</span>\n        <span>while</span> <span>(</span><span>(</span>key <span>=</span> watchService<span>.</span><span>take</span><span>(</span><span>)</span><span>)</span> <span>!=</span> <span>null</span><span>)</span> <span>{</span>\n            <span>for</span> <span>(</span><span>WatchEvent</span><span><span>&lt;</span><span>?</span><span>></span></span> event <span>:</span> key<span>.</span><span>pollEvents</span><span>(</span><span>)</span><span>)</span> <span>{</span>\n                <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"事件\"</span> <span>+</span> event<span>.</span><span>kind</span><span>(</span><span>)</span> <span>+</span> <span>\"发生了，文件是：\"</span> <span>+</span> event<span>.</span><span>context</span><span>(</span><span>)</span><span>)</span><span>;</span>\n            <span>}</span>\n            key<span>.</span><span>reset</span><span>(</span><span>)</span><span>;</span>\n        <span>}</span>\n    <span>}</span>\n<span>}</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br></div></div><h2 id=\"common-io-工具包监控\"> Common IO 工具包监控</h2>\n<div><pre><code><span>package</span> <span>cn<span>.</span>github<span>.</span>chinesszz</span><span>;</span>\n\n<span>import</span> <span>org<span>.</span>apache<span>.</span>commons<span>.</span>io<span>.</span>filefilter<span>.</span></span><span>FileFilterUtils</span><span>;</span>\n<span>import</span> <span>org<span>.</span>apache<span>.</span>commons<span>.</span>io<span>.</span>monitor<span>.</span></span><span>FileAlterationListener</span><span>;</span>\n<span>import</span> <span>org<span>.</span>apache<span>.</span>commons<span>.</span>io<span>.</span>monitor<span>.</span></span><span>FileAlterationMonitor</span><span>;</span>\n<span>import</span> <span>org<span>.</span>apache<span>.</span>commons<span>.</span>io<span>.</span>monitor<span>.</span></span><span>FileAlterationObserver</span><span>;</span>\n<span>import</span> <span>org<span>.</span>junit<span>.</span></span><span>Test</span><span>;</span>\n\n<span>import</span> <span>java<span>.</span>io<span>.</span></span><span>File</span><span>;</span>\n<span>import</span> <span>java<span>.</span>util<span>.</span>concurrent<span>.</span></span><span>TimeUnit</span><span>;</span>\n\n<span>/**\n * @author liuxin\n * 2021/11/9 8:55 下午\n */</span>\n<span>public</span> <span>class</span> <span>CommonIOAPI</span> <span>{</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>File</span> directory <span>=</span> <span>new</span> <span>File</span><span>(</span><span>\"/Users/liuxin/Github/nobug-learn-project/nobug-learn-01/src/main/java\"</span><span>)</span><span>;</span>\n        <span>// 轮询间隔 5 秒</span>\n        <span>long</span> interval <span>=</span> <span>TimeUnit</span><span>.</span>SECONDS<span>.</span><span>toMillis</span><span>(</span><span>5</span><span>)</span><span>;</span>\n        <span>// 创建一个文件观察器用于处理文件的格式</span>\n        <span>FileAlterationObserver</span> observer <span>=</span> <span>new</span> <span>FileAlterationObserver</span><span>(</span>directory<span>,</span> <span>FileFilterUtils</span><span>.</span><span>and</span><span>(</span>\n                <span>FileFilterUtils</span><span>.</span><span>fileFileFilter</span><span>(</span><span>)</span><span>,</span> <span>FileFilterUtils</span><span>.</span><span>suffixFileFilter</span><span>(</span><span>\".txt\"</span><span>)</span><span>,</span>\n                <span>FileFilterUtils</span><span>.</span><span>prefixFileFilter</span><span>(</span><span>\"lx\"</span><span>)</span><span>)</span><span>)</span><span>;</span>\n        <span>// 设置文件变化监听器</span>\n        observer<span>.</span><span>addListener</span><span>(</span><span>new</span> <span>MyFileListener</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        <span>FileAlterationMonitor</span> monitor <span>=</span> <span>new</span> <span>FileAlterationMonitor</span><span>(</span>interval<span>,</span> observer<span>)</span><span>;</span>\n        monitor<span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>1</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>@Test</span>\n    <span>public</span> <span>void</span> <span>watchDir</span><span>(</span><span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>File</span> directory <span>=</span> <span>new</span> <span>File</span><span>(</span><span>\"/Users/liuxin/Github/nobug-learn-project/nobug-learn-01/src/main/java\"</span><span>)</span><span>;</span>\n        <span>FileAlterationObserver</span> fileAlterationObserver <span>=</span> <span>new</span> <span>FileAlterationObserver</span><span>(</span>directory<span>,</span> <span>FileFilterUtils</span><span>.</span><span>and</span><span>(</span>\n                <span>FileFilterUtils</span><span>.</span><span>directoryFileFilter</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>\n        <span>long</span> interval <span>=</span> <span>TimeUnit</span><span>.</span>SECONDS<span>.</span><span>toMillis</span><span>(</span><span>5</span><span>)</span><span>;</span>\n        <span>// 设置文件变化监听器</span>\n        fileAlterationObserver<span>.</span><span>addListener</span><span>(</span><span>new</span> <span>MyFileListener</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        <span>FileAlterationMonitor</span> monitor <span>=</span> <span>new</span> <span>FileAlterationMonitor</span><span>(</span>interval<span>,</span> fileAlterationObserver<span>)</span><span>;</span>\n        monitor<span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>while</span> <span>(</span><span>true</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>static</span> <span>final</span> <span>class</span> <span>MyFileListener</span> <span>implements</span> <span>FileAlterationListener</span> <span>{</span>\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onStart</span><span>(</span><span>FileAlterationObserver</span> fileAlterationObserver<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"monitor start scan files..\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onDirectoryCreate</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" director created.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onDirectoryChange</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" director changed.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onDirectoryDelete</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" director deleted.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onFileCreate</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" created.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onFileChange</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" changed.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onFileDelete</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" deleted.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onStop</span><span>(</span><span>FileAlterationObserver</span> fileAlterationObserver<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"monitor stop scanning..\"</span><span>)</span><span>;</span>\n        <span>}</span>\n    <span>}</span>\n<span>}</span>\n\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br></div></div>",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "自定义插件教程",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/%E8%87%AA%E5%AE%9A%E4%B9%89maven%E6%8F%92%E4%BB%B6/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/%E8%87%AA%E5%AE%9A%E4%B9%89maven%E6%8F%92%E4%BB%B6/",
      "content_html": "<blockquote>\n<p>Maven插件官网: https://maven.apache.org/guides/plugin/guide-java-plugin-development.html</p>\n</blockquote>\n<div><p>前言介绍</p>\n<p>前面我们大概了解了Maven的生命周期,本篇主要是学习如何在Maven的生命周期内指定一些插件的执行。主要分为3个步骤。<br>\n<i>Not supported content</i> 第一个步骤先了解学习下Maven官方的命名规则建议。<br>\n<i>Not supported content</i> 第二个步骤根据命名规则,我们自定义一个插件 Mojo。<br>\n<i>Not supported content</i> 第三个部分学习如何向插件内 Mojo 注入一些，Maven的配置和自定义的配置信息。<br></p>\n</div>\n<h2 id=\"一、命名规范\"> 一、命名规范</h2>\n<ul>\n<li>官方的命名规则: <code>maven-&lt;yourplugin&gt;-plugin</code>（注意“Maven”位于插件名称的开头)</li>\n<li>个人自定义建议: <code>&lt;yourplugin&gt;-maven-plugin</code>（注意“Maven”位于插件名称的中间)</li>\n</ul>\n<p>个人不得使用官方命名规则,因为它是 Apache Maven 团队使用的插件保留命名模式。\n如果个人使用这种命名模式是会侵犯了 Apache Maven 商标。<code>org.apache.maven.plugins</code></p>\n<h2 id=\"二、自定义mojo\"> 二、自定义Mojo</h2>\n<p>当我们使用idea创建一个maven插件,里面已经为我们创建了一个Mojo。定义Mojo首先要集成\n<code>AbstractMojo</code> 抽象类。另外要声明这个Mojo的名字和Maven执行阶段。有两种方法声明</p>\n<h3 id=\"_2-1-使用javadoc的方式声明\"> 2.1 使用javadoc的方式声明</h3>\n<p>因为maven诞生比较早,当时没有注解。所以使用了javadoc。</p>\n<div><pre><code><span>/**\n* Goal which touches a timestamp file.\n*\n* @goal touch\n* @phase process-sources\n*/</span>\n<span>public</span> <span>class</span> <span>MyMojo</span> <span>extends</span> <span>AbstractMojo</span> <span>{</span>\n\n    <span>@Override</span>\n    <span>public</span> <span>void</span> <span>execute</span><span>(</span><span>)</span>\n    <span>throws</span> <span>MojoExecutionException</span> <span>{</span>\n    <span>getLog</span><span>(</span><span>)</span><span>.</span><span>info</span><span>(</span><span>\"我是一个Maven插件: FirstDemo\"</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><p>指定mvn install 安装到本地仓库,然后找个项目执行一下。</p>\n<div><pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] ---------------------&lt; org.example:nobug-learn-01 &gt;---------------------\n[INFO] Building nobug-learn-01 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- firstdemo-maven-plugin:1.0-SNAPSHOT:touch (default-cli) @ nobug-learn-01 ---\n[INFO] 我是一个Maven插件: FirstDemo\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.296 s\n[INFO] Finished at: 2021-11-26T17:00:32+08:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><h3 id=\"_2-2-使用注解的方式\"> 2.2 使用注解的方式</h3>\n<p>首先引入注解包</p>\n<div><pre><code>    <span><span><span>&lt;</span>properties</span><span>></span></span>\n        <span><span><span>&lt;</span>dep.maven-api.version</span><span>></span></span>3.5.2<span><span><span>&lt;/</span>dep.maven-api.version</span><span>></span></span>\n    <span><span><span>&lt;/</span>properties</span><span>></span></span>\n    <span><span><span>&lt;</span>dependencies</span><span>></span></span>\n        <span><span><span>&lt;</span>dependency</span><span>></span></span>\n            <span><span><span>&lt;</span>groupId</span><span>></span></span>org.apache.maven<span><span><span>&lt;/</span>groupId</span><span>></span></span>\n            <span><span><span>&lt;</span>artifactId</span><span>></span></span>maven-plugin-api<span><span><span>&lt;/</span>artifactId</span><span>></span></span>\n            <span><span><span>&lt;</span>version</span><span>></span></span>${dep.maven-api.version}<span><span><span>&lt;/</span>version</span><span>></span></span>\n        <span><span><span>&lt;/</span>dependency</span><span>></span></span>\n        <span><span><span>&lt;</span>dependency</span><span>></span></span>\n            <span><span><span>&lt;</span>groupId</span><span>></span></span>org.apache.maven<span><span><span>&lt;/</span>groupId</span><span>></span></span>\n            <span><span><span>&lt;</span>artifactId</span><span>></span></span>maven-model<span><span><span>&lt;/</span>artifactId</span><span>></span></span>\n            <span><span><span>&lt;</span>version</span><span>></span></span>${dep.maven-api.version}<span><span><span>&lt;/</span>version</span><span>></span></span>\n        <span><span><span>&lt;/</span>dependency</span><span>></span></span>\n        <span><span><span>&lt;</span>dependency</span><span>></span></span>\n            <span><span><span>&lt;</span>groupId</span><span>></span></span>org.apache.maven.plugin-tools<span><span><span>&lt;/</span>groupId</span><span>></span></span>\n            <span><span><span>&lt;</span>artifactId</span><span>></span></span>maven-plugin-annotations<span><span><span>&lt;/</span>artifactId</span><span>></span></span>\n            <span><span><span>&lt;</span>version</span><span>></span></span>${dep.maven-api.version}<span><span><span>&lt;/</span>version</span><span>></span></span>\n        <span><span><span>&lt;/</span>dependency</span><span>></span></span>\n        <span><span><span>&lt;</span>dependency</span><span>></span></span>\n            <span><span><span>&lt;</span>groupId</span><span>></span></span>org.apache.maven.plugins<span><span><span>&lt;/</span>groupId</span><span>></span></span>\n            <span><span><span>&lt;</span>artifactId</span><span>></span></span>maven-plugin-plugin<span><span><span>&lt;/</span>artifactId</span><span>></span></span>\n            <span><span><span>&lt;</span>version</span><span>></span></span>3.5<span><span><span>&lt;/</span>version</span><span>></span></span>\n        <span><span><span>&lt;/</span>dependency</span><span>></span></span>\n        <span><span><span>&lt;</span>dependency</span><span>></span></span>\n            <span><span><span>&lt;</span>groupId</span><span>></span></span>junit<span><span><span>&lt;/</span>groupId</span><span>></span></span>\n            <span><span><span>&lt;</span>artifactId</span><span>></span></span>junit<span><span><span>&lt;/</span>artifactId</span><span>></span></span>\n            <span><span><span>&lt;</span>version</span><span>></span></span>3.8.1<span><span><span>&lt;/</span>version</span><span>></span></span>\n            <span><span><span>&lt;</span>scope</span><span>></span></span>test<span><span><span>&lt;/</span>scope</span><span>></span></span>\n        <span><span><span>&lt;/</span>dependency</span><span>></span></span>\n    <span><span><span>&lt;/</span>dependencies</span><span>></span></span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br></div></div><p>Mojo类</p>\n<div><pre><code><span>@Mojo</span><span>(</span>name <span>=</span> <span>\"myMojo\"</span><span>,</span> defaultPhase <span>=</span> <span>LifecyclePhase</span><span>.</span>VALIDATE<span>,</span> threadSafe <span>=</span> <span>true</span><span>)</span>\n<span>@Execute</span><span>(</span>phase <span>=</span> <span>LifecyclePhase</span><span>.</span>VALIDATE<span>)</span>\n<span>public</span> <span>class</span> <span>MyMojo</span>\n        <span>extends</span> <span>AbstractMojo</span> <span>{</span>\n\n    <span>public</span> <span>void</span> <span>execute</span><span>(</span><span>)</span>\n            <span>throws</span> <span>MojoExecutionException</span> <span>{</span>\n        <span>getLog</span><span>(</span><span>)</span><span>.</span><span>info</span><span>(</span><span>\"我是一个Maven插件: FirstDemo\"</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><p>注意: 自定义的maven插件是没办法指定在maven声明周期执行的。</p>\n<div><pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;firstdemo-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.2-SNAPSHOT&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n        &lt;!--                        如果插件中没有生命周期,这里要进行声明。如果插件中声明了就不用写这个--&gt;\n         &lt;phase&gt;clean&lt;/phase&gt;\n         &lt;goals&gt;\n         &lt;!--                            自定义的插件,不会自动执行,要在这里进行声明--&gt;\n            &lt;goal&gt;myMojo&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h2 id=\"三、mojo数据介绍\"> 三、Mojo数据介绍</h2>\n<div><p>官方支持的文档</p>\n<p>maven插件中是可以自定以参数的,通过配置然后传递到Mojo类中。\n主要使用 <code>@Parameter</code> 注解完成，下面是详细介绍。</p>\n</div>\n<p>主要使用<code>@Parameter</code>进行定义。</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>声明参数的名字</td>\n</tr>\n<tr>\n<td>alias</td>\n<td>声明一个别名</td>\n</tr>\n<tr>\n<td>property</td>\n<td>从pom的propertys标签中读取</td>\n</tr>\n<tr>\n<td>defaultValue</td>\n<td>字段的默认值</td>\n</tr>\n<tr>\n<td>required</td>\n<td>是否必须</td>\n</tr>\n<tr>\n<td>readonly</td>\n<td>是否只读</td>\n</tr>\n</tbody>\n</table>\n<p>字段的类型可以是多样的。</p>\n<h3 id=\"_3-1-boolean类型\"> 3.1 boolean类型</h3>\n<p>这包括类型为 boolean 和 Boolean 的变量。 读取配置时，文本“true”会导致参数设置为 true，所有其他文本都会导致参数设置为 false。 例子：</p>\n<div><pre><code>    /**\n     * My boolean.\n     */\n    @Parameter\n    private boolean myBoolean;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p><code>&lt;myBoolean&gt;true&lt;/myBoolean&gt;</code></p>\n<h3 id=\"_3-2-integer类型\"> 3.2 Integer类型</h3>\n<p>这包括类型为 byte、Byte、int、Integer、long、Long、short 和 Short 的变量。 读取配置时，使用 Integer.parseInt() 或相应类的 valueOf() 方法将 XML 文件中的文本转换为整数值。 这意味着字符串必须是有效的十进制整数值，仅由数字 0 到 9 组成，前面有一个可选的 - 表示负值。 例子：</p>\n<div><pre><code>    /**\n     * My Integer.\n     */\n    @Parameter\n    private Integer myInteger;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p><code>&lt;myInteger&gt;10&lt;/myInteger&gt;</code></p>\n<h3 id=\"_3-3-double类型\"> 3.3 Double类型</h3>\n<p>这包括类型为 double、Double、float 和 Float 的变量。 读取配置时，XML 文件中的文本使用相应类的 valueOf() 方法转换为二进制形式。</p>\n<div><pre><code>    /**\n     * My Double.\n     */\n    @Parameter\n    private Double myDouble;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p><code>&lt;myDouble&gt;1.0&lt;/myDouble&gt;</code></p>\n<h3 id=\"_3-4-date类型\"> 3.4 Date类型</h3>\n<p>这包括类型为日期的变量。 读取配置时，XML 文件中的文本使用以下日期格式之一进行转换：“yyyy-MM-dd HH:mm:ss.S a”（示例日期为“2005-10-06 2:22 :55.1 PM”）或“yyyy-MM-dd HH:mm:ssa”（示例日期为“2005-10-06 2:22:55PM”）。 请注意，解析是使用 DateFormat.parse() 完成的，它允许对格式进行一些宽容。 如果该方法可以解析指定的日期和时间，即使它与上面的模式不完全匹配，它也会这样做。 例子：</p>\n<div><pre><code>    /**\n     * My Date.\n     */\n    @Parameter\n    private Date myDate;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p><code>&lt;myDate&gt;2005-10-06 2:22:55.1 PM&lt;/myDate&gt;</code></p>\n<h3 id=\"_3-5-file类型\"> 3.5 File类型</h3>\n<p>这包括类型为 File 的变量。 读取配置时，XML 文件中的文本用作所需文件或目录的路径。 如果路径是相对的（不以 / 或 C: 之类的驱动器号开头），则该路径是相对于包含 POM 的目录。 例子：</p>\n<div><pre><code>    /**\n     * My File.\n     */\n    @Parameter\n    private File myFile;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p><code>&lt;myFile&gt;c:\\temp&lt;/myFile&gt;</code></p>\n<h3 id=\"_3-6-url\"> 3.6 URL</h3>\n<p>这包括变量类型的 URL。 读取配置时，使用 XML 文件中的文本作为 URL。 格式必须遵循 RFC 2396 准则，并且看起来像任何 Web 浏览器 URL (scheme://host:port/path/to/file)。 转换 URL 时，对 URL 任何部分的内容都没有限制。</p>\n<div><pre><code>    /**\n     * My URL.\n     */\n    @Parameter\n    private URL myURL;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p><code>&lt;myURL&gt;http://maven.apache.org&lt;/myURL&gt;</code></p>\n<h3 id=\"_3-7-枚举\"> 3.7 枚举</h3>\n<p>也可以使用枚举类型参数。 首先你需要定义你的枚举类型，然后你可以在参数定义中使用枚举类型：</p>\n<div><pre><code>    public enum Color {\n      GREEN,\n      RED,\n      BLUE\n    }\n \n    /**\n     * My Enum\n     */\n    @Parameter\n    private Color myColor;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p><code>&lt;myColor&gt;GREEN&lt;/myColor&gt;</code></p>\n<h3 id=\"_3-8-arrays\"> 3.8 Arrays</h3>\n<div><pre><code>    /**\n     * My Array.\n     */\n    @Parameter\n    private String[] myArray;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><div><pre><code>&lt;myArray&gt;\n  &lt;param&gt;value1&lt;/param&gt;\n  &lt;param&gt;value2&lt;/param&gt;\n&lt;/myArray&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id=\"_3-9-collections\"> 3.9 Collections</h3>\n<p>此类别涵盖任何实现 java.util.Collection 的类，例如 ArrayList 或 HashSet。 这些参数是通过多次指定参数来配置的，就像数组一样。 例子：</p>\n<div><pre><code>   /**\n     * My List.\n     */\n    @Parameter\n    private List myList;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><div><pre><code>&lt;myList&gt;\n  &lt;param&gt;value1&lt;/param&gt;\n  &lt;param&gt;value2&lt;/param&gt;\n&lt;/myList&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id=\"_3-10-maps\"> 3.10 Maps</h3>\n<p>此类别涵盖任何实现 java.util.Map（例如 HashMap）但未实现 java.util.Properties 的类。 这些参数是通过在参数配置中以 <key>value</key> 形式包含 XML 标签来配置的。 例子：</p>\n<div><pre><code>    /**\n     * My Map.\n     */\n    @Parameter\n    private Map myMap;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><div><pre><code>&lt;myMap&gt;\n  &lt;key1&gt;value1&lt;/key1&gt;\n  &lt;key2&gt;value2&lt;/key2&gt;\n&lt;/myMap&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id=\"_3-11-properties\"> 3.11 Properties</h3>\n<p>此类别涵盖实现 java.util.Properties 的任何地图。 这些参数是通过在参数配置中以 <property><name>myName</name> <value>myValue</value> </property> 形式包含 XML 标记来配置的。 例子：</p>\n<div><pre><code>    /**\n     * My Properties.\n     */\n    @Parameter\n    private Properties myProperties;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><div><pre><code>&lt;myProperties&gt;\n  &lt;property&gt;\n    &lt;name&gt;propertyName1&lt;/name&gt;\n    &lt;value&gt;propertyValue1&lt;/value&gt;\n  &lt;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;propertyName2&lt;/name&gt;\n    &lt;value&gt;propertyValue2&lt;/value&gt;\n  &lt;property&gt;\n&lt;/myProperties&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h3 id=\"_12-object\"> 12. Object</h3>\n<div><pre><code>    /**\n     * My Object.\n     */\n    @Parameter\n    private MyObject myObject;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><div><pre><code>&lt;myObject&gt;\n  &lt;myField&gt;test&lt;/myField&gt;\n&lt;/myObject&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id=\"_13-mavensession\"> 13. MavenSession</h3>\n<div><pre><code>    @Parameter(defaultValue = &quot;${session}&quot;, readonly = true)\n    private MavenSession session;\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><h3 id=\"_14-mavenproject\"> 14. MavenProject</h3>\n<div><pre><code>    @Parameter(defaultValue = &quot;${project}&quot;, readonly = true)\n    private MavenProject project;\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><h3 id=\"_15-mojoexecution\"> 15. MojoExecution</h3>\n<div><pre><code>    @Parameter(defaultValue = &quot;${mojoExecution}&quot;, readonly = true)\n    private MojoExecution mojo;\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><h3 id=\"_16-plugindescriptor\"> 16. PluginDescriptor</h3>\n<div><pre><code>    @Parameter(defaultValue = &quot;${plugin}&quot;, readonly = true)\n    private PluginDescriptor plugin;\n</code></pre>\n<div><span>1</span><br><span>2</span><br></div></div><h3 id=\"_17-settings\"> 17. Settings</h3>\n<div><pre><code>    /**\n     * maven的配置信息\n     */\n    @Parameter(defaultValue = &quot;${settings}&quot;, readonly = true)\n    private Settings settings;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h3 id=\"_18-项目路径\"> 18. 项目路径</h3>\n<div><pre><code>    /**\n     * 项目路径\n     */\n    @Parameter(defaultValue = &quot;${project.basedir}&quot;, readonly = true)\n    private File basedir;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h3 id=\"_19-编译后目录\"> 19. 编译后目录</h3>\n<div><pre><code>    /**\n     * 编译后目录\n     */\n    @Parameter(defaultValue = &quot;${project.build.directory}&quot;, readonly = true)\n    private File target;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h2 id=\"四、插件执行\"> 四、插件执行</h2>\n<blockquote>\n<p>类似问题: https://www.coder.work/article/3592058</p>\n</blockquote>\n<div><p>注意</p>\n<p>我们自己开发的插件,要想执行必须要在项目的pom文件中来指定,插件不会默认来进行执行的。如下。</p>\n</div>\n<div><pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;firstdemo-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.2-SNAPSHOT&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n        &lt;!--                        如果插件中没有生命周期,这里要进行声明。如果插件中声明了就不用写这个--&gt;\n         &lt;phase&gt;clean&lt;/phase&gt;\n         &lt;goals&gt;\n         &lt;!--                            自定义的插件,不会自动执行,要在这里进行声明--&gt;\n            &lt;goal&gt;myMojo&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><ul>\n<li><input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" id=\"task-item-0\"><label for=\"task-item-0\"> phase 如果插件中没有生命周期,这里要进行声明。如果插件中声明了就不用写这个</label></li>\n<li><input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" id=\"task-item-1\"><label for=\"task-item-1\"> goal  自定义的插件,不会自动执行,要在这里进行声明</label></li>\n</ul>\n<h3 id=\"命令行执行\"> 命令行执行</h3>\n<ul>\n<li>\n<p><code>mvn org.example:firstdemo-maven-plugin:1.4-SNAPSHOT:myMojo</code></p>\n</li>\n<li>\n<p><code>mvn ${groupId}:${artifactId}:${version}:${mojoName}</code></p>\n</li>\n</ul>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "maven-resources-plugin",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/maven-resources-plugin/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/maven-resources-plugin/",
      "content_html": "<blockquote>\n<p>maven-resources-plugin</p>\n</blockquote>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "spring-boot-maven-plugin",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/spring-boot-maven-plugin/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/maven/spring-boot-maven-plugin/",
      "content_html": "<blockquote>\n<p>spring-boot-maven-plugin</p>\n</blockquote>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "如何学会复盘",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%BC%9A%E5%A4%8D%E7%9B%98/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%BC%9A%E5%A4%8D%E7%9B%98/",
      "content_html": "<p><a href=\"https://mp.weixin.qq.com/s/skP5pXvjsepvoOTMRmGEFw\" target=\"_blank\" rel=\"noopener noreferrer\">不懂复盘，再努力都是低水平重复</a></p>\n<h2 id=\"一、复盘三角\"> 一、复盘三角</h2>\n<p>“复盘三角”，也就是记录、反思、提炼这三个动作。</p>\n<h3 id=\"_1-1-记录\"> 1.1 记录</h3>\n<p>一天过完以后，把你当天或者过往一天的主要发生记录下来，遇到了什么人，谈了什么话，做了什么事，情绪怎么样……</p>\n<p>刚开始的时候，最好老老实实把一整天能记录的都记录下来，作为一种刻意练习，作为一种基本功的修炼。</p>\n<p>有很多人会怀疑，说记录会不会是在浪费时间，其背后的意思，实际上是想有一个取巧的办法，能不花时间也有反思的成果，我目前的看法是，别想多了，还是老老实实、扎硬寨打呆仗。</p>\n<p>为什么要如实记录？因为我们的大脑不一定靠谱，大脑自己会编造事实，事后就变成了“我以为”，实际上不是真相。记忆有时候是会骗人的。</p>\n<p>当我们有一些我们无法接受的情况发生时，如果我们很痛苦的话，大脑就倾向于抹掉那一部分或者掩盖、改写一部分，好让自己变得舒服一点。</p>\n<h3 id=\"_1-2-反思\"> 1.2 反思</h3>\n<p>就某个点、某件事慢慢进行剖析，比如为什么有这种情绪？为什么不愉快，发生了什么？为什么发生？我的判断是什么？我为什么会有这种判断？这种判断是一时的还是一种固有的模式？怎么做，才能避免？</p>\n<h3 id=\"_1-3-提炼\"> 1.3 提炼</h3>\n<p>复盘到最后，提炼形成行动指南，用以指导自己的行动。</p>\n<p>提炼很简单，就是形成一句话，复盘到最后，你要找到一句话，用这句话作为你的行动指南，作为你的方法论，作为你的原则和价值观，然后再去践行出来。</p>\n<p>提炼也不简单，这句话要求有触发效应，能够在一个场景当中有效的指引自己，当你一想到这句话，就会让自己的行为有所改变。</p>\n<p>我们的行为处事要有一套指引体系，要有一套指南。我们要用这些东西去逐渐规范、干预、调整自己的行为，用这些东西去重塑一个不同的自己。</p>\n<p>这些指南、指引，实际上就是一些所谓的原则。史蒂芬·柯维的7个习惯就是7个原则，稻盛和夫的六项精进也是6个原则。</p>\n<p>但这些原则是史蒂芬·柯维、稻盛和夫的，不是你的，虽然你很认同，但是它不一定能指导你的实践，你需要转化成自己的，拥有自己的原则。</p>\n<p>就像达利欧在《原则》当中所指出的，“最重要的事情是总结出你自己的原则，最好将其写下来，尤其是在你与其他人共事的情况下。”</p>\n<p>提炼这个步骤就是直接指向原则，这一步就是为了生产我们工作和生活的原则的。提炼的标准最好是：自己的语言，够具体，一句话，记得住，用得上。</p>\n<h2 id=\"二、好的复盘长什么样\"> 二、好的复盘长什么样？</h2>\n<h3 id=\"_2-1-好的复盘首先都是-过电影\"> 2.1 好的复盘首先都是“过电影”</h3>\n<p>所谓“过电影”，就是对过去发生的事情一幕幕进行回顾。一天结束以后，先把一天的主要经历过一遍，今天到底发生了什么，今天到底过得怎么样，需要做到心里有数，掌握一定的素材，搞清事实状况，然后才能梳理出个所以然。</p>\n<h3 id=\"_2-2-复自己的盘\"> 2.2 复自己的盘</h3>\n<p>复盘需要指向自己，如果复盘来复盘去，找到的都是别人的问题，看到的都是别人的毛病，那就不叫复盘，那叫批评大会、抱怨大会、吐槽大会。</p>\n<p>所以还差一个东西，就是自我批评。有一个词叫反求诸己，这才是真正意义上的复盘。</p>\n<h3 id=\"_2-3-复盘给自己看\"> 2.3 复盘给自己看</h3>\n<p>当你写复盘的时候，不要想着写给别人看，本着这样的心态去写，自己面对自己。</p>\n<h3 id=\"_2-4-复盘自己的痛苦\"> 2.4 复盘自己的痛苦</h3>\n<p>《原则》的作者达利欧有一个公式：痛苦+反思=进步。没有经历足够的痛苦，没有痛彻心扉，反思通常也会停留于表面，不会那么深刻。\n所以，当你经历痛苦的时候，最好把痛苦记录下来。当然，这种时候还不是反思的最佳时刻，因为你很难保持头脑清醒。最好是在痛苦之后，进行回顾和反思。</p>\n<h3 id=\"_2-5-好的复盘会指向并加速行动\"> 2.5 好的复盘会指向并加速行动</h3>\n<p>我们判断一个复盘好不好，不是看你的复盘的文字写得好不好，而是看复盘之后，你有没有采取相应的行动，有没有取得相应的成果。复盘不是目的，而是达成目的的一种手段。</p>\n<h3 id=\"_2-6-好的复盘需要不断质疑\"> 2.6 好的复盘需要不断质疑</h3>\n<p>复盘也需要更多的质疑。质疑什么？质疑自己的基本假设，自己的判断标准。</p>\n<p>这一点是最难的，首先，你要能看到自己行为处事背后的原则和标准，其次，你要能够对这些原则和标准进行自我质疑。这不是一日之功，这才是复盘中最难突破的地方。</p>\n<h2 id=\"三、复盘的三个标准\"> 三、复盘的三个标准</h2>\n<h3 id=\"_3-1-能反观\"> 3.1 能反观</h3>\n<p>很多人在参加一项培训之后会要求自己进行复盘，但他们更多所做的动作其实叫复习，把学到的东西再过一遍，看看老师讲了什么、做了什么练习或者最触动自己的是什么。</p>\n<p>他们更多所做的是记忆或者说强化记忆的行为，从复盘的角度来看，只是完成了反观的一部分工作——反回头去看。</p>\n<p>不过，这还不彻底，还要去看看所学的内容如何和自己的工作相结合，如何去落地和应用，从而让自己的工作效率和成果有所改变。还要对照学习的内容，看自己有哪些优势和不足，找出差距，然后才能有机会弥补差距。</p>\n<p>这就是“能反观”。</p>\n<h3 id=\"_3-2-会反思\"> 3.2 会反思</h3>\n<p>“能反观”之外，还要做到“会反思”。根据史蒂芬·柯维的“观为得”模型，想法决定行为，行为决定结果。也就是所谓的“观”决定“为”，“为”决定“得”。</p>\n<p>反思就是从结果倒推，去看看我们当初到底都做了什么，有哪些行为，然后再去看我们所有行为背后的想法，为什么要这样去做，为什么有这些行为，原因是什么，背后的信念假设、思维模式是什么。</p>\n<div><pre><code>比如家里来了客人，作为家长，你希望自己的女儿将玩具和客人的孩子分享，但是你的孩子的表现令你非常失望，她把玩具据为己有，一点也不愿意分享。你刚开始还好言相劝，慢慢变成了言语威胁，最后竟演变成了打骂，家里立刻变得乌烟瘴气。\n\n\n\n从结果倒推，家里气氛不好，发生了什么呢？原来是你打了孩子。你为什么要打孩子呢？因为她不愿意分享，你觉得非常没有礼貌。\n\n\n\n再去倒推“观”的层面，你会发现孩子不配合，让自己在客人面前失了面子。要把玩具跟别人分享，这是你的需求，不是孩子的需求。\n\n\n\n再倒推，你可能会发现自己很虚伪，孩子却很真实；你可能会发现，孩子只有先学会拥有，才能学会分享；你可能会发现，自己之前对待孩子的方式有问题，你让孩子养成了吃独食的习惯，没有学会分享；你可能会发现，自己一直也是这样，跟人交往不愿多付出，只是一味索取，所以孩子也不知道什么叫付出和分享，等等等等。\n\n\n\n最后你一定会在自己身上发现很多问题，这个过程，就是反思，我们用的是“得-为-观”倒推的方法。\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><h3 id=\"_3-3-有反省\"> 3.3 有反省</h3>\n<p>一般的复盘，最多到这里就截止了，实际上，更高层面的复盘，还要有反省。</p>\n<p>有了反省，自己反观、反思出来的问题，才能得到真正的解决，你的固有模式才有可能被调整，你的“木马程序”才有可能被清除。</p>\n<p>反省是从事上，回到心上，去看自己的起心动念，去除恶念、保持善念。</p>\n",
      "date_published": "2022-01-04T17:14:21.000Z",
      "date_modified": "2022-01-04T17:14:21.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "程序猿到底有没有必要买一台阿里云服务器",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E5%88%B0%E5%BA%95%E6%9C%89%E6%B2%A1%E6%9C%89%E5%BF%85%E8%A6%81%E4%B9%B0%E4%B8%80%E5%8F%B0%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E5%88%B0%E5%BA%95%E6%9C%89%E6%B2%A1%E6%9C%89%E5%BF%85%E8%A6%81%E4%B9%B0%E4%B8%80%E5%8F%B0%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/",
      "content_html": "<p><img src=\"https://img-blog.csdnimg.cn/2019122518192512.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></p>\n<p><strong>做为一名程序猿多多少少每天都在跟服务器打交道,尤其是后端的小伙伴,那么你是否也有这样的想法呢 ?</strong></p>\n<h3 id=\"一、个人服务器究竟能做什么\"> 一、个人服务器究竟能做什么?</h3>\n<h4 id=\"_1-搭建个人博客\"> 1. 搭建个人博客</h4>\n<p>软件开发这个行业,知识技术日新月异,作为一名合格专注的程序猿每天都会浏览各种各样的技术网站,在这里我们排出一些大的技术博客网站,我们也经常会看到很多个人的技术博主。一般拥有个人博客网站的都是在某一个领域有很深认识的大牛,会经常把自己的学到的知识积累下来,分享给大家。那么如果要搭建自己的个人博客就必须要有一台个人服务器啦。 但是排出一种情况就是有些个人博主会把自己的博客部署在 <code>gitlab</code> 或者<code>github</code>、<code>coding</code> 的静态Pages上,然后通过域名<code>CNAME</code> 的方式访问, 像小编我自己之前也是用后面这种情况,可以免费部署自己的个人博客。但是唯一缺点就是访问太慢了。</p>\n<p><strong>下面就是小编我自己的个人网站,主要做Java后端的知识分享(非营利性哦)</strong>\n<a href=\"https://blog.springlearn.cn/\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https://img-blog.csdnimg.cn/20191225183752474.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></a></p>\n<h4 id=\"_2-搭建个人知识库\"> 2. 搭建个人知识库</h4>\n<p>做为技术人,我们每天都要处理各种各样的数据,有公司数据、有个人数据、或者碎片的知识点、API信息、备忘录信息等。相信每个开发者都会有这个需求吧，一般我们可以使用 <code>有道云笔记</code> 、 <code>印象笔记</code>。 小编使用的是前者，但是突然有一段时间不能用了,原因当然不是有道云挂了, 而是很多公司为了信息安全禁止员工登陆这种网站,\n比如云盘类网站, 当然就包括上面的。这个时候当我们访问上面的网站时候就会被公司后台记录，或者是直接就访问不到。这个时候我们就要考虑搭建一个人知识库了。小编现在用的是 <code>showdoc</code>。 非常简单。</p>\n<p>登陆服务器安装 <code>docker</code> 运行下面命令即可</p>\n<div><pre><code>docker pull xd2idwf5.mirror.aliyuncs.com/star7th/showdoc<span>;</span>\ndocker tag xd2idwf5.mirror.aliyuncs.com/star7th/showdoc:latest star7th/showdoc:latest<span>;</span>\n<span>mkdir</span> showdoc_data<span>;</span>\n<span>mkdir</span> showdoc_data/html<span>;</span>\n<span>chmod</span>  -R <span>777</span> showdoc_data<span>;</span>\ndocker run -d --name showdoc -p <span>6666</span>:80 -v /root/showdoc_data/html:/var/www/html/      star7th/showdoc\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p><strong>下面是小编的个人知识库</strong></p>\n<p><a href=\"http://doc.springlearn.cn\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https://img-blog.csdnimg.cn/20191225184550675.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></a></p>\n<h4 id=\"_3-搭建个人网盘\"> 3. 搭建个人网盘</h4>\n<p>网盘的用处只有一个就是存储文件,市面上的产品之前有很多但是近两年很多都倒闭了,不过现在还有 <code>百度网盘</code>依然坚挺。但是(太...慢了)。 那么我们就自己来搭建一个吧。小编使用的网盘是 <code>Seafile</code></p>\n<p>Seafile是一个开源、专业、可靠的云存储平台；解决文件集中存储、共享和跨平台访问等问题，除了一般网盘所提供的云存储以及共享功能外，Seafile还提供消息通信。 具体安装也不难。\n<img src=\"https://img-blog.csdnimg.cn/20191225185205331.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></p>\n<h4 id=\"_4-部署个人应用\"> 4. 部署个人应用</h4>\n<p>这个需求应该是购买服务器的最终目的，就是部署自己的服务, 小编就是部署的自己的博客应用。 使用nginx作为方向代理。不得不说使用自己服务器就是比免费的速度快。</p>\n<p>http://blog.springlearn.cn/ 响应在5毫秒内\nhttp://www.hanframework.com/ 免费的响应在400毫秒内</p>\n<p>虽然都不到1秒,但是具体使用时候用户体验差距还是很大的。可以自己体验下。\n<img src=\"https://img-blog.csdnimg.cn/20191225185514458.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></p>\n<h3 id=\"二、购买了服务器你还需要哪些知识储备\"> 二、购买了服务器你还需要哪些知识储备</h3>\n<h4 id=\"_1-服务器ssh登录\"> 1. 服务器ssh登录</h4>\n<p>当我们购买了服务器我们有两种登陆方式</p>\n<ol>\n<li>用户名和密码登陆</li>\n<li>秘钥登陆\n这两种登陆都离不开 <code>ssh</code> 命令</li>\n</ol>\n<p><strong>第一种</strong>\n<code>ssh root@127.32.32.122</code> 然后输入用户密码</p>\n<p><strong>第二种</strong>\n<code>ssh aliyun</code>  直接就访问</p>\n<p>对于如何配置小编就不说了,百度搜索就很多答案,如果不想搜索或者有问题，可以给小编私信。小编给你解决。</p>\n<h4 id=\"_2-服务器器安全组配置\"> 2. 服务器器安全组配置</h4>\n<p>安全组这个概念,如果没有购买过服务器的应该不是很清楚,其实就是防火墙的意思。当我们购买了阿里/百度/腾讯/华为/七牛之类的服务器，在后台都有一个安全组管理的。一个入站,一个出站端端口配置。 这个要注意,如果不配置的话，你是访问不到你的端口的\n<img src=\"https://img-blog.csdnimg.cn/20191225190257549.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></p>\n<h4 id=\"_3-域名配置\"> 3. 域名配置</h4>\n<p>我们可以选择一个自己心仪的域名, 一般域名很便宜一年<code>三十</code> 左右。但是别钻牛角尖, 天价的域名也很多。</p>\n<p>域名配置主要是域名转发之类的。</p>\n<ol>\n<li>第一种情况: 如果要将域名配置到一台服务器上使用，那么这种情况域名必须要备案，备案一般服务商会帮我们备案，我们只要提供认证信息,一般一周内可以下来。</li>\n<li>第二种情况: 如果我们没有服务器我们也可以购买一个域名,我们在配置域名转发的时候,可以不指定服务器,而是转发到一个CNAEM别名上也可以使用。</li>\n</ol>\n<p><img src=\"https://img-blog.csdnimg.cn/20191225191224799.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></p>\n<h4 id=\"_4-部署应用\"> 4. 部署应用</h4>\n<p>不会做饭的老司机不是好的厨师,同样只会写代码,不会部署的程序猿不是合格的程序猿。😸。</p>\n<p>部署应用我们可以使用 <code>docker</code> + <code>nginx或apache</code> 。 具体 <code>nginx</code> 和 <code>docker</code> 的使用网上很多就不细说了，如果你要购买服务器这些都是你要储备的知识点。</p>\n<h3 id=\"三、购买服务器要注意什么\"> 三、购买服务器要注意什么</h3>\n<h4 id=\"_1-价格\"> 1. 价格</h4>\n<p>作为软件开发者,能免费的东西绝对不花钱, 上面的各种场景,其实我们都可以使用免费的来替代。 除了部署应用。那么我们就研究下价格。 一般运营商的套路都是年底大甩卖。所以年中和年头不是购买服务器的时间, 一般都在 <code>双十一</code> 、<code>双十二</code>期间会大降价。\n关于价格对比的我们就以<code>2核4G</code>的服务器作为对比, 因为这个配置就能满足我们的需求。 那么我们就看看运营商的价格，因为是双十二期间,所以阿里云最近在搞活动,所以阿里云目前我看是最低的，新用户3年只要799。【如果不是新用户可以用其他人账号买,小编就是用自己家人账号买的】</p>\n<ol>\n<li>七牛云2核4g三年 ￥1767.61</li>\n<li>腾讯云2核4g三年 ￥3897</li>\n<li>华为云2核4g三年 ￥6,440.70</li>\n<li>阿里云2核4g三年 ￥1807.2(常规价) ￥799(活动价格)</li>\n</ol>\n<p><a href=\"https://www.aliyun.com/minisite/goods?userCode=oab21mxz\" target=\"_blank\" rel=\"noopener noreferrer\">活动优惠券领取</a>\n<img src=\"https://img-blog.csdnimg.cn/20191225192246879.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" />\n<img src=\"https://img-blog.csdnimg.cn/20191225192305678.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" />\n<img src=\"https://img-blog.csdnimg.cn/20191225192332835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" />\n<img src=\"https://img-blog.csdnimg.cn/2019122519235837.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></p>\n<h4 id=\"_2-售后-本人真实体验不是喷子-不是职业黑\"> 2. 售后(本人真实体验不是喷子,不是职业黑)</h4>\n<p>服务器一般什么情况下会有售后呢?\n当出现服务器 <code>cpu</code> 飙高, 流量异常被恶意攻击的时候,就考验售后了。我们就看服务商的工单回复速度。因为小编就用过阿里云和七牛云所以就对比下两家的工单体验吧。</p>\n<ol>\n<li>阿里云无论回复速度还是质量都满意。</li>\n<li>七牛云回复慢就算了，一个问题给我转几个人,每次让我重新再问一遍(没地方吐槽,就在这里吧)</li>\n</ol>\n<p><img src=\"https://img-blog.csdnimg.cn/20191225192754639.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></p>\n<p><img src=\"https://img-blog.csdnimg.cn/20191225192935155.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" /></p>\n<p><strong>时间到,下班了... 喜欢小编的可以关注一下,持续为你分享干货知识</strong></p>\n",
      "image": "https://img-blog.csdnimg.cn/2019122518192512.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "匆匆那年",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/school/students/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/school/students/",
      "content_html": "<ol>\n<li>介绍下自己的学习情况</li>\n<li>大学生的迷茫不是问题，问题要如何正确面对</li>\n<li>大学生要知道学习</li>\n</ol>\n",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Home",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/",
      "content_html": "",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "八阿哥的剑",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/bug/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/bug/",
      "content_html": "<p><strong>作者: 八阿哥的剑</strong></p>\n<p><em>博客: https://springlearn.cn</em></p>\n<div><p>一日一句毒鸡汤</p>\n<p>问世间钱为何物，只叫人生死相许。！😄</p>\n</div>\n<h2 id=\"java原生版本监控\"> Java原生版本监控</h2>\n<div><pre><code><span>public</span> <span>class</span> <span>JavaWatchAPI</span> <span>{</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>//第一步：取得WatchService</span>\n        <span>WatchService</span> watchService <span>=</span> <span>FileSystems</span><span>.</span><span>getDefault</span><span>(</span><span>)</span><span>.</span><span>newWatchService</span><span>(</span><span>)</span><span>;</span>\n        <span>//第二步：确定要监控的路径</span>\n        <span>Path</span> path <span>=</span> <span>Paths</span><span>.</span><span>get</span><span>(</span><span>\"/Users/liuxin/Github/nobug-learn-project/nobug-learn-01/src/main/java\"</span><span>)</span><span>;</span>\n\n        <span>//第三步：为本路径绑定WatchService，并确定监控的事件</span>\n        path<span>.</span><span>register</span><span>(</span>\n                watchService<span>,</span>\n                <span>// StandardWatchEventKinds.ENTRY_CREATE—当有新文件时触发。可能是创建了一个新文件</span>\n                <span>StandardWatchEventKinds</span><span>.</span>ENTRY_CREATE<span>,</span>\n                <span>// StandardWatchEventKinds.ENTRY_DELETE—当文件被删除、移动或重命名时触发</span>\n                <span>StandardWatchEventKinds</span><span>.</span>ENTRY_DELETE<span>,</span>\n                <span>// StandardWatchEventKinds.ENTRY_MODIFY—当文件被修改时触发。</span>\n                <span>StandardWatchEventKinds</span><span>.</span>ENTRY_MODIFY<span>)</span><span>;</span>\n        <span>// StandardWatchEventKinds.OVERFLOW—触发表示丢失或丢弃的事件。</span>\n        <span>WatchKey</span> key <span>=</span> <span>null</span><span>;</span>\n        <span>while</span> <span>(</span><span>(</span>key <span>=</span> watchService<span>.</span><span>take</span><span>(</span><span>)</span><span>)</span> <span>!=</span> <span>null</span><span>)</span> <span>{</span>\n            <span>for</span> <span>(</span><span>WatchEvent</span><span><span>&lt;</span><span>?</span><span>></span></span> event <span>:</span> key<span>.</span><span>pollEvents</span><span>(</span><span>)</span><span>)</span> <span>{</span>\n                <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"事件\"</span> <span>+</span> event<span>.</span><span>kind</span><span>(</span><span>)</span> <span>+</span> <span>\"发生了，文件是：\"</span> <span>+</span> event<span>.</span><span>context</span><span>(</span><span>)</span><span>)</span><span>;</span>\n            <span>}</span>\n            key<span>.</span><span>reset</span><span>(</span><span>)</span><span>;</span>\n        <span>}</span>\n    <span>}</span>\n<span>}</span>\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br></div></div><h2 id=\"common-io-工具包监控\"> Common IO 工具包监控</h2>\n<div><pre><code><span>package</span> <span>cn<span>.</span>github<span>.</span>chinesszz</span><span>;</span>\n\n<span>import</span> <span>org<span>.</span>apache<span>.</span>commons<span>.</span>io<span>.</span>filefilter<span>.</span></span><span>FileFilterUtils</span><span>;</span>\n<span>import</span> <span>org<span>.</span>apache<span>.</span>commons<span>.</span>io<span>.</span>monitor<span>.</span></span><span>FileAlterationListener</span><span>;</span>\n<span>import</span> <span>org<span>.</span>apache<span>.</span>commons<span>.</span>io<span>.</span>monitor<span>.</span></span><span>FileAlterationMonitor</span><span>;</span>\n<span>import</span> <span>org<span>.</span>apache<span>.</span>commons<span>.</span>io<span>.</span>monitor<span>.</span></span><span>FileAlterationObserver</span><span>;</span>\n<span>import</span> <span>org<span>.</span>junit<span>.</span></span><span>Test</span><span>;</span>\n\n<span>import</span> <span>java<span>.</span>io<span>.</span></span><span>File</span><span>;</span>\n<span>import</span> <span>java<span>.</span>util<span>.</span>concurrent<span>.</span></span><span>TimeUnit</span><span>;</span>\n\n<span>/**\n * @author liuxin\n * 2021/11/9 8:55 下午\n */</span>\n<span>public</span> <span>class</span> <span>CommonIOAPI</span> <span>{</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>File</span> directory <span>=</span> <span>new</span> <span>File</span><span>(</span><span>\"/Users/liuxin/Github/nobug-learn-project/nobug-learn-01/src/main/java\"</span><span>)</span><span>;</span>\n        <span>// 轮询间隔 5 秒</span>\n        <span>long</span> interval <span>=</span> <span>TimeUnit</span><span>.</span>SECONDS<span>.</span><span>toMillis</span><span>(</span><span>5</span><span>)</span><span>;</span>\n        <span>// 创建一个文件观察器用于处理文件的格式</span>\n        <span>FileAlterationObserver</span> observer <span>=</span> <span>new</span> <span>FileAlterationObserver</span><span>(</span>directory<span>,</span> <span>FileFilterUtils</span><span>.</span><span>and</span><span>(</span>\n                <span>FileFilterUtils</span><span>.</span><span>fileFileFilter</span><span>(</span><span>)</span><span>,</span> <span>FileFilterUtils</span><span>.</span><span>suffixFileFilter</span><span>(</span><span>\".txt\"</span><span>)</span><span>,</span>\n                <span>FileFilterUtils</span><span>.</span><span>prefixFileFilter</span><span>(</span><span>\"lx\"</span><span>)</span><span>)</span><span>)</span><span>;</span>\n        <span>// 设置文件变化监听器</span>\n        observer<span>.</span><span>addListener</span><span>(</span><span>new</span> <span>MyFileListener</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        <span>FileAlterationMonitor</span> monitor <span>=</span> <span>new</span> <span>FileAlterationMonitor</span><span>(</span>interval<span>,</span> observer<span>)</span><span>;</span>\n        monitor<span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>1</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>@Test</span>\n    <span>public</span> <span>void</span> <span>watchDir</span><span>(</span><span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>\n        <span>File</span> directory <span>=</span> <span>new</span> <span>File</span><span>(</span><span>\"/Users/liuxin/Github/nobug-learn-project/nobug-learn-01/src/main/java\"</span><span>)</span><span>;</span>\n        <span>FileAlterationObserver</span> fileAlterationObserver <span>=</span> <span>new</span> <span>FileAlterationObserver</span><span>(</span>directory<span>,</span> <span>FileFilterUtils</span><span>.</span><span>and</span><span>(</span>\n                <span>FileFilterUtils</span><span>.</span><span>directoryFileFilter</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>\n        <span>long</span> interval <span>=</span> <span>TimeUnit</span><span>.</span>SECONDS<span>.</span><span>toMillis</span><span>(</span><span>5</span><span>)</span><span>;</span>\n        <span>// 设置文件变化监听器</span>\n        fileAlterationObserver<span>.</span><span>addListener</span><span>(</span><span>new</span> <span>MyFileListener</span><span>(</span><span>)</span><span>)</span><span>;</span>\n        <span>FileAlterationMonitor</span> monitor <span>=</span> <span>new</span> <span>FileAlterationMonitor</span><span>(</span>interval<span>,</span> fileAlterationObserver<span>)</span><span>;</span>\n        monitor<span>.</span><span>start</span><span>(</span><span>)</span><span>;</span>\n        <span>while</span> <span>(</span><span>true</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>static</span> <span>final</span> <span>class</span> <span>MyFileListener</span> <span>implements</span> <span>FileAlterationListener</span> <span>{</span>\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onStart</span><span>(</span><span>FileAlterationObserver</span> fileAlterationObserver<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"monitor start scan files..\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onDirectoryCreate</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" director created.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onDirectoryChange</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" director changed.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onDirectoryDelete</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" director deleted.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onFileCreate</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" created.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onFileChange</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" changed.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onFileDelete</span><span>(</span><span>File</span> file<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>file<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>\" deleted.\"</span><span>)</span><span>;</span>\n        <span>}</span>\n\n\n        <span>@Override</span>\n        <span>public</span> <span>void</span> <span>onStop</span><span>(</span><span>FileAlterationObserver</span> fileAlterationObserver<span>)</span> <span>{</span>\n            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>\"monitor stop scanning..\"</span><span>)</span><span>;</span>\n        <span>}</span>\n    <span>}</span>\n<span>}</span>\n\n\n</code></pre>\n<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br></div></div>",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "重剑无锋大巧不工",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/%E9%87%8D%E5%89%91%E6%97%A0%E9%94%8B%E5%A4%A7%E5%B7%A7%E4%B8%8D%E5%B7%A5/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/other/%E9%87%8D%E5%89%91%E6%97%A0%E9%94%8B%E5%A4%A7%E5%B7%A7%E4%B8%8D%E5%B7%A5/",
      "content_html": "",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Home",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/",
      "content_html": "<h3 id=\"badge\"> Badge</h3>\n<ul>\n<li>\n<i>Not supported content</i>\n</li>\n<li>\n<i>Not supported content</i>\n</li>\n</ul>\n<CodeGroup>\n<CodeGroupItem title=\"yarn\">\n<div><pre><code><span>yarn</span> <span>add</span> -D vuepress-theme-hope\n</code></pre>\n<div><span>1</span><br></div></div></CodeGroupItem>\n<CodeGroupItem title=\"npm\" active>\n<div><pre><code><span>npm</span> i -D vuepress-theme-hope\n</code></pre>\n<div><span>1</span><br></div></div></CodeGroupItem>\n</CodeGroup>\n<div><div><br><div>&nbsp;</div><br><br><br><br><br></div><pre><code><span>public</span> <span>class</span> <span>Person</span><span>{</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span>args<span>)</span><span>{</span>\n\n    <span>}</span>\n<span>}</span>\n</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div>",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "Home",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/play/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/play/",
      "content_html": "<h3 id=\"badge\"> Badge</h3>\n<ul>\n<li>\n<i>Not supported content</i>\n</li>\n<li>\n<i>Not supported content</i>\n</li>\n</ul>\n<CodeGroup>\n<CodeGroupItem title=\"yarn\">\n<div><pre><code><span>yarn</span> <span>add</span> -D vuepress-theme-hope\n</code></pre>\n<div><span>1</span><br></div></div></CodeGroupItem>\n<CodeGroupItem title=\"npm\" active>\n<div><pre><code><span>npm</span> i -D vuepress-theme-hope\n</code></pre>\n<div><span>1</span><br></div></div></CodeGroupItem>\n</CodeGroup>\n<div><div><br><div>&nbsp;</div><br><br><br><br><br></div><pre><code><span>public</span> <span>class</span> <span>Person</span><span>{</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span>args<span>)</span><span>{</span>\n\n    <span>}</span>\n<span>}</span>\n</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div>",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2022-01-04T14:58:20.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    },
    {
      "title": "幻灯片页",
      "url": "https://vuepress-theme-hope-demo.mrhope.site/learn/slides/",
      "id": "https://vuepress-theme-hope-demo.mrhope.site/learn/slides/",
      "content_html": "\n<i>Not supported content</i>",
      "image": "https://vuepress-theme-hope-demo.mrhope.site/logo.svg",
      "date_published": "2021-12-21T05:46:37.000Z",
      "date_modified": "2021-12-21T05:46:37.000Z",
      "authors": [
        {
          "name": "西魏陶渊明"
        }
      ],
      "tags": []
    }
  ]
}